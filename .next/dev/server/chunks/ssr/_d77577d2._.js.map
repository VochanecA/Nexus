{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/alert.tsx"],"sourcesContent":["import * as React from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst alertVariants = cva(\n  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',\n  {\n    variants: {\n      variant: {\n        default: 'bg-card text-card-foreground',\n        destructive:\n          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Alert({\n  className,\n  variant,\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {\n  return (\n    <div\n      data-slot=\"alert\"\n      role=\"alert\"\n      className={cn(alertVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-title\"\n      className={cn(\n        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDescription({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-description\"\n      className={cn(\n        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,qOACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,GAAG,OAC8D;IACjE,qBACE,8OAAC;QACC,aAAU;QACV,MAAK;QACL,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kGACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/switch.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SwitchPrimitive from '@radix-ui/react-switch'\n\nimport { cn } from '@/lib/utils'\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        'peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={\n          'bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0'\n        }\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,8OAAC,0KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,6WACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2KAAqB;YACpB,aAAU;YACV,WACE;;;;;;;;;;;AAKV"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/label.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,8OAAC,yKAAmB;QAClB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,4KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8OAAC,2KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,yMAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,iLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/tabs.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn('flex flex-col gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn('flex-1 outline-none', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/dropdown-menu.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu'\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  )\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',\n          className,\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  )\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  )\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = 'default',\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: 'default' | 'destructive'\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  )\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn('bg-border -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        'text-muted-foreground ml-auto text-xs tracking-widest',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,aAAa,EACpB,GAAG,OACqD;IACxD,qBAAO,8OAAC,oLAA0B;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,mBAAmB,EAC1B,GAAG,OACuD;IAC1D,qBACE,8OAAC,sLAA4B;QAAC,aAAU;QAAwB,GAAG,KAAK;;;;;;AAE5E;AAEA,SAAS,oBAAoB,EAC3B,GAAG,OACwD;IAC3D,qBACE,8OAAC,uLAA6B;QAC5B,aAAU;QACT,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,oBAAoB,EAC3B,SAAS,EACT,aAAa,CAAC,EACd,GAAG,OACwD;IAC3D,qBACE,8OAAC,sLAA4B;kBAC3B,cAAA,8OAAC,uLAA6B;YAC5B,aAAU;YACV,YAAY;YACZ,WAAW,IAAA,kHAAE,EACX,0jBACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,kBAAkB,EACzB,GAAG,OACsD;IACzD,qBACE,8OAAC,qLAA2B;QAAC,aAAU;QAAuB,GAAG,KAAK;;;;;;AAE1E;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,KAAK,EACL,UAAU,SAAS,EACnB,GAAG,OAIJ;IACC,qBACE,8OAAC,oLAA0B;QACzB,aAAU;QACV,cAAY;QACZ,gBAAc;QACd,WAAW,IAAA,kHAAE,EACX,+mBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,yBAAyB,EAChC,SAAS,EACT,QAAQ,EACR,OAAO,EACP,GAAG,OAC6D;IAChE,qBACE,8OAAC,4LAAkC;QACjC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,gTACA;QAEF,SAAS;QACR,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,6LAAmC;8BAClC,cAAA,8OAAC,qNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;YAGxB;;;;;;;AAGP;AAEA,SAAS,uBAAuB,EAC9B,GAAG,OAC2D;IAC9D,qBACE,8OAAC,0LAAgC;QAC/B,aAAU;QACT,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,sBAAsB,EAC7B,SAAS,EACT,QAAQ,EACR,GAAG,OAC0D;IAC7D,qBACE,8OAAC,yLAA+B;QAC9B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,gTACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,6LAAmC;8BAClC,cAAA,8OAAC,wNAAU;wBAAC,WAAU;;;;;;;;;;;;;;;;YAGzB;;;;;;;AAGP;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,KAAK,EACL,GAAG,OAGJ;IACC,qBACE,8OAAC,qLAA2B;QAC1B,aAAU;QACV,cAAY;QACZ,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,sBAAsB,EAC7B,SAAS,EACT,GAAG,OAC0D;IAC7D,qBACE,8OAAC,yLAA+B;QAC9B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,6BAA6B;QAC1C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OAC0B;IAC7B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EACvB,GAAG,OACoD;IACvD,qBAAO,8OAAC,mLAAyB;QAAC,aAAU;QAAqB,GAAG,KAAK;;;;;;AAC3E;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,KAAK,EACL,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,8OAAC,0LAAgC;QAC/B,aAAU;QACV,cAAY;QACZ,WAAW,IAAA,kHAAE,EACX,8WACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,8OAAgB;gBAAC,WAAU;;;;;;;;;;;;AAGlC;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8OAAC,0LAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,ifACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 725, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 750, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/progress.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\n\nimport { cn } from '@/lib/utils'\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,8OAAC,4KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE"}},
    {"offset": {"line": 788, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/follow/follow-button.tsx"],"sourcesContent":["// components/follow/follow-button.tsx\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { UserPlus, UserCheck, Loader2 } from \"lucide-react\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface FollowButtonProps {\r\n  followerId: string;\r\n  followingId: string;\r\n  isFollowing: boolean;\r\n  className?: string;\r\n  size?: \"default\" | \"sm\" | \"lg\" | \"icon\";\r\n  variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\";\r\n  onFollowChange?: (isFollowing: boolean) => void;\r\n}\r\n\r\nexport function FollowButton({\r\n  followerId,\r\n  followingId,\r\n  isFollowing: initialIsFollowing,\r\n  className = \"\",\r\n  size = \"sm\",\r\n  variant,\r\n  onFollowChange,\r\n}: FollowButtonProps) {\r\n  const [isFollowing, setIsFollowing] = useState(initialIsFollowing);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const supabase = createClient();\r\n\r\n  const handleFollowToggle = async () => {\r\n    if (!followerId || !followingId) return;\r\n    \r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      if (isFollowing) {\r\n        // Unfollow\r\n        const { error } = await supabase\r\n          .from(\"follows\")\r\n          .delete()\r\n          .eq(\"follower_id\", followerId)\r\n          .eq(\"following_id\", followingId);\r\n        \r\n        if (error) throw error;\r\n        \r\n        setIsFollowing(false);\r\n        toast.success(\"Unfollowed\");\r\n      } else {\r\n        // Follow\r\n        const { error } = await supabase\r\n          .from(\"follows\")\r\n          .insert({\r\n            follower_id: followerId,\r\n            following_id: followingId,\r\n          });\r\n        \r\n        if (error) {\r\n          // Možda već postoji\r\n          if (error.code === '23505') { // Unique violation\r\n            setIsFollowing(true);\r\n          } else {\r\n            throw error;\r\n          }\r\n        } else {\r\n          setIsFollowing(true);\r\n        }\r\n        toast.success(\"Following\");\r\n      }\r\n      \r\n      onFollowChange?.(!isFollowing);\r\n    } catch (error) {\r\n      console.error(\"Error toggling follow:\", error);\r\n      toast.error(\"Failed to update follow status\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Odredite variant na osnovu isFollowing\r\n  const buttonVariant = variant || (isFollowing ? \"outline\" : \"default\");\r\n\r\n  return (\r\n    <Button\r\n      size={size}\r\n      variant={buttonVariant}\r\n      onClick={handleFollowToggle}\r\n      disabled={isLoading || followerId === followingId}\r\n      className={`gap-2 ${className}`}\r\n    >\r\n      {isLoading ? (\r\n        <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n      ) : isFollowing ? (\r\n        <>\r\n          <UserCheck className=\"h-4 w-4\" />\r\n          <span className=\"hidden sm:inline\">Following</span>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <UserPlus className=\"h-4 w-4\" />\r\n          <span className=\"hidden sm:inline\">Follow</span>\r\n        </>\r\n      )}\r\n    </Button>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,sCAAsC;;;;;;AAGtC;AACA;AACA;AAAA;AAAA;AACA;AACA;AANA;;;;;;;AAkBO,SAAS,aAAa,EAC3B,UAAU,EACV,WAAW,EACX,aAAa,kBAAkB,EAC/B,YAAY,EAAE,EACd,OAAO,IAAI,EACX,OAAO,EACP,cAAc,EACI;IAClB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,WAAW,IAAA,yIAAY;IAE7B,MAAM,qBAAqB;QACzB,IAAI,CAAC,cAAc,CAAC,aAAa;QAEjC,aAAa;QAEb,IAAI;YACF,IAAI,aAAa;gBACf,WAAW;gBACX,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,WACL,MAAM,GACN,EAAE,CAAC,eAAe,YAClB,EAAE,CAAC,gBAAgB;gBAEtB,IAAI,OAAO,MAAM;gBAEjB,eAAe;gBACf,iJAAK,CAAC,OAAO,CAAC;YAChB,OAAO;gBACL,SAAS;gBACT,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,WACL,MAAM,CAAC;oBACN,aAAa;oBACb,cAAc;gBAChB;gBAEF,IAAI,OAAO;oBACT,oBAAoB;oBACpB,IAAI,MAAM,IAAI,KAAK,SAAS;wBAC1B,eAAe;oBACjB,OAAO;wBACL,MAAM;oBACR;gBACF,OAAO;oBACL,eAAe;gBACjB;gBACA,iJAAK,CAAC,OAAO,CAAC;YAChB;YAEA,iBAAiB,CAAC;QACpB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,iJAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,aAAa;QACf;IACF;IAEA,yCAAyC;IACzC,MAAM,gBAAgB,WAAW,CAAC,cAAc,YAAY,SAAS;IAErE,qBACE,8OAAC,qIAAM;QACL,MAAM;QACN,SAAS;QACT,SAAS;QACT,UAAU,aAAa,eAAe;QACtC,WAAW,CAAC,MAAM,EAAE,WAAW;kBAE9B,0BACC,8OAAC,4NAAO;YAAC,WAAU;;;;;mBACjB,4BACF;;8BACE,8OAAC,6NAAS;oBAAC,WAAU;;;;;;8BACrB,8OAAC;oBAAK,WAAU;8BAAmB;;;;;;;yCAGrC;;8BACE,8OAAC,0NAAQ;oBAAC,WAAU;;;;;;8BACpB,8OAAC;oBAAK,WAAU;8BAAmB;;;;;;;;;;;;;AAK7C"}},
    {"offset": {"line": 909, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/post/likes-list.tsx"],"sourcesContent":["// components/post/likes-list.tsx\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Heart } from \"lucide-react\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\n\r\ninterface User {\r\n  id: string;\r\n  username: string;\r\n  display_name: string;\r\n  avatar_url: string | null;\r\n}\r\n\r\ninterface Like {\r\n  id: string;\r\n  user_id: string;\r\n  created_at: string;\r\n  profiles: User | null; // Ovo je važno - može biti null ili User objekat\r\n}\r\n\r\ninterface LikesListProps {\r\n  postId: string;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport function LikesList({ postId, open, onOpenChange }: LikesListProps) {\r\n  const [likes, setLikes] = useState<Like[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const supabase = createClient();\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      fetchLikes();\r\n    }\r\n  }, [open, postId]);\r\n\r\n  const fetchLikes = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const { data, error: fetchError } = await supabase\r\n        .from(\"likes\")\r\n        .select(`\r\n          id,\r\n          user_id,\r\n          created_at,\r\n          profiles (\r\n            id,\r\n            username,\r\n            display_name,\r\n            avatar_url\r\n          )\r\n        `)\r\n        .eq(\"post_id\", postId)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n      if (fetchError) throw fetchError;\r\n\r\n      // Supabase vraća profiles kao objekat, ali trebamo osigurati tip\r\n      const formattedLikes = (data || []).map((like: any) => {\r\n        // Ovdje uzimamo prvi element ako je array, inače objekat\r\n        const profiles = Array.isArray(like.profiles) \r\n          ? (like.profiles[0] || null)\r\n          : (like.profiles || null);\r\n\r\n        return {\r\n          id: like.id,\r\n          user_id: like.user_id,\r\n          created_at: like.created_at,\r\n          profiles: profiles\r\n        };\r\n      }).filter(like => like.profiles !== null); // Filtriraj prazne profile\r\n\r\n      setLikes(formattedLikes);\r\n    } catch (err) {\r\n      console.error(\"Error fetching likes:\", err);\r\n      setError(err instanceof Error ? err.message : \"Unknown error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getInitials = (name: string): string => {\r\n    if (!name) return \"??\";\r\n    return name\r\n      .split(\" \")\r\n      .map((part) => part[0])\r\n      .join(\"\")\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Heart className=\"h-5 w-5 fill-red-500 text-red-500\" />\r\n            Liked by {likes.length} {likes.length === 1 ? \"person\" : \"people\"}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"mt-4\">\r\n          {loading ? (\r\n            <div className=\"py-8 text-center\">\r\n              <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent\"></div>\r\n              <p className=\"mt-2 text-sm text-muted-foreground\">Loading likes...</p>\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"py-8 text-center\">\r\n              <p className=\"text-destructive\">Error loading likes</p>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">{error}</p>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={fetchLikes}\r\n                className=\"mt-4\"\r\n              >\r\n                Try Again\r\n              </Button>\r\n            </div>\r\n          ) : likes.length === 0 ? (\r\n            <div className=\"py-8 text-center\">\r\n              <Heart className=\"mx-auto h-12 w-12 text-muted-foreground/50\" />\r\n              <p className=\"mt-4 text-muted-foreground\">No likes yet</p>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                Be the first to like this post\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"max-h-[60vh] overflow-y-auto\">\r\n              <div className=\"space-y-2\">\r\n                {likes.map((like) => (\r\n                  <div\r\n                    key={like.id}\r\n                    className=\"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors\"\r\n                  >\r\n                    <Avatar className=\"h-10 w-10\">\r\n                      <AvatarImage\r\n                        src={like.profiles?.avatar_url || undefined}\r\n                        alt={like.profiles?.display_name || \"User\"}\r\n                      />\r\n                      <AvatarFallback>\r\n                        {getInitials(like.profiles?.display_name || \"User\")}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <p className=\"font-medium truncate\">\r\n                            {like.profiles?.display_name || \"Unknown User\"}\r\n                          </p>\r\n                          <p className=\"text-sm text-muted-foreground truncate\">\r\n                            @{like.profiles?.username || \"unknown\"}\r\n                          </p>\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {formatDistanceToNow(new Date(like.created_at), {\r\n                            addSuffix: true,\r\n                          })}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1228, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/alert-dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as AlertDialogPrimitive from '@radix-ui/react-alert-dialog'\n\nimport { cn } from '@/lib/utils'\nimport { buttonVariants } from '@/components/ui/button'\n\nfunction AlertDialog({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {\n  return <AlertDialogPrimitive.Root data-slot=\"alert-dialog\" {...props} />\n}\n\nfunction AlertDialogTrigger({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {\n  return (\n    <AlertDialogPrimitive.Trigger data-slot=\"alert-dialog-trigger\" {...props} />\n  )\n}\n\nfunction AlertDialogPortal({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {\n  return (\n    <AlertDialogPrimitive.Portal data-slot=\"alert-dialog-portal\" {...props} />\n  )\n}\n\nfunction AlertDialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {\n  return (\n    <AlertDialogPrimitive.Overlay\n      data-slot=\"alert-dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {\n  return (\n    <AlertDialogPortal>\n      <AlertDialogOverlay />\n      <AlertDialogPrimitive.Content\n        data-slot=\"alert-dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      />\n    </AlertDialogPortal>\n  )\n}\n\nfunction AlertDialogHeader({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogFooter({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {\n  return (\n    <AlertDialogPrimitive.Title\n      data-slot=\"alert-dialog-title\"\n      className={cn('text-lg font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {\n  return (\n    <AlertDialogPrimitive.Description\n      data-slot=\"alert-dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogAction({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {\n  return (\n    <AlertDialogPrimitive.Action\n      className={cn(buttonVariants(), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogCancel({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {\n  return (\n    <AlertDialogPrimitive.Cancel\n      className={cn(buttonVariants({ variant: 'outline' }), className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AAEA;AACA;AANA;;;;;AAQA,SAAS,YAAY,EACnB,GAAG,OACoD;IACvD,qBAAO,8OAAC,mLAAyB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,mBAAmB,EAC1B,GAAG,OACuD;IAC1D,qBACE,8OAAC,sLAA4B;QAAC,aAAU;QAAwB,GAAG,KAAK;;;;;;AAE5E;AAEA,SAAS,kBAAkB,EACzB,GAAG,OACsD;IACzD,qBACE,8OAAC,qLAA2B;QAAC,aAAU;QAAuB,GAAG,KAAK;;;;;;AAE1E;AAEA,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,8OAAC,sLAA4B;QAC3B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,8OAAC,oLAA0B;QACzB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8OAAC,0LAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,qLAA2B;QAC1B,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,qLAA2B;QAC1B,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,EAAC;YAAE,SAAS;QAAU,IAAI;QACrD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1397, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/post/post-card.tsx"],"sourcesContent":["// components/post/post-card.tsx\n\"use client\";\n\nimport type React from \"react\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Heart, \n  MessageCircle, \n  MoreVertical, \n  Share, \n  Bookmark,\n  Sparkles,\n  Globe,\n  BarChart3,\n  Repeat,\n  CheckCircle,\n  AlertCircle,\n  Bot,\n  Edit\n} from \"lucide-react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { FollowButton } from \"@/components/follow/follow-button\";\nimport { LikesList } from \"@/components/post/likes-list\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  AlertDialog,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogCancel,\n} from \"@/components/ui/alert-dialog\";\nimport { Loader2 } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\n\n// Type definitions\ninterface PostProvenance {\n  version: string;\n  authorId: string;\n  timestamp: string;\n  contentHash: string;\n  signature: string;\n  previousHash?: string;\n  metadata: {\n    isAIGenerated: boolean;\n    originalPostId?: string;\n    editOf?: string;\n    repostChain?: string[];\n    platform: string;\n    algorithm: string;\n    characterCount?: number;\n    wordCount?: number;\n    hasLinks?: boolean;\n    hasHashtags?: boolean;\n    client?: string;\n  };\n  verification?: {\n    selfSigned: boolean;\n    timestamped: boolean;\n    hashChain: boolean;\n  };\n}\n\ninterface Post {\n  id: string;\n  content: string;\n  created_at: string;\n  user_id: string;\n  username: string;\n  display_name: string;\n  avatar_url: string | null;\n  likes_count: number;\n  comments_count: number;\n  user_has_liked: boolean;\n  is_public?: boolean;\n  impressions?: number;\n  content_hash?: string;\n  signature?: string;\n  provenance?: PostProvenance;\n}\n\ninterface PostCardProps {\n  post: Post;\n  showFollowButton?: boolean;\n  currentUserId?: string;\n  isCurrentUserFollowing?: boolean;\n  onFollowChange?: (userId: string, isFollowing: boolean) => void;\n  compact?: boolean;\n  onRepost?: (postId: string) => Promise<void>;\n}\n\ninterface ProvenanceBadgeProps {\n  provenance?: PostProvenance;\n  postId: string;\n}\n\n// Provenance Badge Component\nfunction ProvenanceBadge({ provenance, postId }: ProvenanceBadgeProps): React.JSX.Element {\n  const verifyProvenance = useCallback((): 'verified' | 'unverified' | 'unknown' => {\n    if (!provenance) return 'unknown';\n    \n    const { signature } = provenance;\n    \n    if (signature?.startsWith('nexus-sig-') || signature?.startsWith('nexus-basic-')) {\n      return 'verified';\n    }\n    \n    return 'unverified';\n  }, [provenance]);\n\n  const status = verifyProvenance();\n  const isAI = provenance?.metadata?.isAIGenerated;\n  const isRepost = provenance?.metadata?.originalPostId;\n  const isEdit = provenance?.metadata?.editOf;\n  const repostChainLength = provenance?.metadata?.repostChain?.length || 0;\n\n  return (\n    <div className=\"flex flex-wrap gap-1\">\n      {/* Status badge */}\n      {status === 'verified' && (\n        <Badge variant=\"outline\" className=\"text-xs gap-1\">\n          <CheckCircle className=\"h-3 w-3 text-green-500\" />\n          Verified Source\n        </Badge>\n      )}\n      \n      {status === 'unverified' && (\n        <Badge variant=\"outline\" className=\"text-xs gap-1\">\n          <AlertCircle className=\"h-3 w-3 text-amber-500\" />\n          Unverified\n        </Badge>\n      )}\n      \n      {/* AI generated */}\n      {isAI && (\n        <Badge variant=\"outline\" className=\"text-xs gap-1 bg-amber-50 dark:bg-amber-900/20\">\n          <Bot className=\"h-3 w-3 text-amber-600 dark:text-amber-400\" />\n          AI Generated\n        </Badge>\n      )}\n      \n      {/* Repost */}\n      {isRepost && (\n        <Badge variant=\"outline\" className=\"text-xs gap-1\">\n          <Repeat className=\"h-3 w-3 text-blue-500\" />\n          Repost\n          {repostChainLength > 1 && (\n            <span className=\"text-xs opacity-70\">×{repostChainLength}</span>\n          )}\n        </Badge>\n      )}\n      \n      {/* Edit */}\n      {isEdit && (\n        <Badge variant=\"outline\" className=\"text-xs gap-1\">\n          <Edit className=\"h-3 w-3 text-purple-500\" />\n          Edited\n        </Badge>\n      )}\n    </div>\n  );\n}\n\n// Helper functions\nconst detectAIContent = (content: string): boolean => {\n  const aiIndicators = [\n    /as an ai language model/gi,\n    /i am an ai/gi,\n    /i cannot.*because/gi,\n    /based on.*training data/gi,\n    /my knowledge cutoff/gi,\n    /i don[']?t have real-time/gi,\n    /as a language model/gi\n  ];\n  \n  let score = 0;\n  aiIndicators.forEach(pattern => {\n    if (pattern.test(content)) score++;\n  });\n  \n  const sentences = content.split(/[.!?]+/).filter(s => s.trim().length > 0);\n  const avgSentenceLength = content.length / Math.max(sentences.length, 1);\n  \n  if (sentences.length > 5 && avgSentenceLength > 50) {\n    score += 0.5;\n  }\n  \n  const aiPhrases = [\n    'in summary',\n    'to conclude',\n    'furthermore',\n    'additionally',\n    'it is important to note',\n    'this highlights',\n    'it demonstrates'\n  ];\n  \n  aiPhrases.forEach(phrase => {\n    if (content.toLowerCase().includes(phrase)) {\n      score += 0.2;\n    }\n  });\n  \n  return score >= 1.5;\n};\n\nconst generateContentHash = (content: string): string => {\n  let hash = 0;\n  for (let i = 0; i < content.length; i++) {\n    const char = content.charCodeAt(i);\n    hash = ((hash << 5) - hash) + char;\n    hash = hash & hash;\n  }\n  const timestamp = Date.now().toString(36);\n  return `hash-${Math.abs(hash).toString(36)}-${timestamp}`;\n};\n\nconst getInitials = (name: string): string => {\n  if (!name) return \"??\";\n  return name\n    .split(\" \")\n    .map((part) => part[0])\n    .join(\"\")\n    .toUpperCase()\n    .slice(0, 2);\n};\n\nconst formatDateMobile = (dateString: string): string => {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\n  \n  if (diffInHours < 1) {\n    const diffInMinutes = diffInHours * 60;\n    if (diffInMinutes < 1) {\n      return \"now\";\n    }\n    return `${Math.floor(diffInMinutes)}m`;\n  } else if (diffInHours < 24) {\n    return `${Math.floor(diffInHours)}h`;\n  } else if (diffInHours < 168) {\n    return `${Math.floor(diffInHours / 24)}d`;\n  } else {\n    return date.toLocaleDateString(\"en-US\", { \n      month: \"short\", \n      day: \"numeric\" \n    });\n  }\n};\n\n// Main PostCard Component\nexport function PostCard({ \n  post, \n  showFollowButton = false,\n  currentUserId,\n  isCurrentUserFollowing = false,\n  onFollowChange,\n  compact = false,\n  onRepost\n}: PostCardProps): React.JSX.Element {\n  const router = useRouter();\n  const [liked, setLiked] = useState<boolean>(post.user_has_liked);\n  const [likesCount, setLikesCount] = useState<number>(post.likes_count);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);\n  const [authUserId, setAuthUserId] = useState<string | null>(null);\n  const [showLikesDialog, setShowLikesDialog] = useState<boolean>(false);\n  const [reposting, setReposting] = useState<boolean>(false);\n  \n  // AI Explanation states\n  const [showExplanation, setShowExplanation] = useState<boolean>(false);\n  const [explanation, setExplanation] = useState<string>(\"\");\n  const [explaining, setExplaining] = useState<boolean>(false);\n  const [explanationError, setExplanationError] = useState<string>(\"\");\n\n  // Check authentication and user's like status\n  useEffect(() => {\n    const checkAuth = async (): Promise<void> => {\n      const supabase = createClient();\n      const { data: { user } } = await supabase.auth.getUser();\n      setIsAuthenticated(!!user);\n      setAuthUserId(user?.id || null);\n      \n      if (user) {\n        const { data: like } = await supabase\n          .from(\"likes\")\n          .select(\"id\")\n          .eq(\"post_id\", post.id)\n          .eq(\"user_id\", user.id)\n          .maybeSingle();\n        setLiked(!!like);\n      }\n    };\n    \n    void checkAuth();\n  }, [post.id]);\n\n  // Current user (priority: prop > state)\n  const currentUser = currentUserId || authUserId;\n  const isFollowing = isCurrentUserFollowing || false;\n\n  // Like handler\n  const handleLike = async (e: React.MouseEvent<HTMLButtonElement>): Promise<void> => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!isAuthenticated) {\n      router.push(\"/login\");\n      return;\n    }\n\n    setLoading(true);\n    const supabase = createClient();\n\n    const { data: { user } } = await supabase.auth.getUser();\n\n    if (!user) {\n      router.push(\"/login\");\n      return;\n    }\n\n    try {\n      if (liked) {\n        await supabase\n          .from(\"likes\")\n          .delete()\n          .eq(\"post_id\", post.id)\n          .eq(\"user_id\", user.id);\n        setLiked(false);\n        setLikesCount((prev) => Math.max(0, prev - 1));\n      } else {\n        await supabase\n          .from(\"likes\")\n          .insert({ \n            post_id: post.id, \n            user_id: user.id \n          });\n        setLiked(true);\n        setLikesCount((prev) => prev + 1);\n      }\n    } catch (error) {\n      console.error(\"Error toggling like:\", error);\n    } finally {\n      setLoading(false);\n      router.refresh();\n    }\n  };\n\n  // Repost handler\nconst handleRepost = async (e: React.MouseEvent<Element>): Promise<void> => {\n  e.preventDefault();\n  e.stopPropagation();\n\n  if (!isAuthenticated) {\n    router.push(\"/login\");\n    return;\n  }\n\n  if (!currentUser) {\n    console.error('No current user found');\n    return;\n  }\n\n  setReposting(true);\n\n  try {\n    // Get repost chain\n    const repostChain = await getRepostChain(post.id);\n    \n    // Detect if content is AI generated\n    const isAIGenerated = detectAIContent(post.content);\n    \n    // Create provenance for repost\n    const provenance = {\n      version: '1.0',\n      authorId: currentUser,\n      timestamp: new Date().toISOString(),\n      contentHash: generateContentHash(`REPOST: ${post.content}`),\n      metadata: {\n        isAIGenerated,\n        originalPostId: post.id,\n        repostChain: [post.id, ...repostChain].slice(0, 10),\n        platform: 'nexus',\n        algorithm: 'SHA-256',\n        characterCount: post.content.length,\n        wordCount: post.content.split(/\\s+/).length,\n        hasLinks: /(https?:\\/\\/[^\\s]+)/g.test(post.content),\n        hasHashtags: /#(\\w+)/g.test(post.content),\n        client: 'web'\n      },\n      signature: `nexus-repost-${currentUser.substring(0, 8)}-${Date.now().toString(36)}`,\n      verification: {\n        selfSigned: true,\n        timestamped: true,\n        hashChain: true\n      }\n    };\n\n    const supabase = createClient();\n    const { error } = await supabase\n      .from(\"posts\")\n      .insert({\n        user_id: currentUser,\n        content: post.content,\n        content_hash: provenance.contentHash,\n        signature: provenance.signature,\n        provenance: provenance,\n        is_repost: true,\n        original_post_id: post.id\n      });\n\n    if (error) {\n      throw new Error(error.message);\n    }\n\n    if (onRepost) {\n      await onRepost(post.id);\n    }\n\n    console.log('Reposted successfully');\n    router.refresh();\n    \n  } catch (error) {\n    console.error(\"Error reposting:\", error);\n  } finally {\n    setReposting(false);\n  }\n};\n  // Get repost chain function\n  const getRepostChain = async (postId: string): Promise<string[]> => {\n    const supabase = createClient();\n    const chain: string[] = [];\n    \n    let current = postId;\n    let iterations = 0;\n    \n    while (iterations < 10) { // Prevent infinite loop\n      try {\n        const { data } = await supabase\n          .from('posts')\n          .select('provenance')\n          .eq('id', current)\n          .single();\n        \n        if (!data?.provenance?.metadata?.originalPostId) break;\n        \n        chain.push(data.provenance.metadata.originalPostId);\n        current = data.provenance.metadata.originalPostId;\n      } catch {\n        break;\n      }\n      iterations++;\n    }\n    \n    return chain;\n  };\n\n  // AI Explanation handler\n  const handleExplain = async (): Promise<void> => {\n    setShowExplanation(true);\n    \n    if (explanation) return;\n    \n    setExplaining(true);\n    setExplanationError(\"\");\n    \n    try {\n      const response = await fetch('/api/explain', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ text: post.content.substring(0, 1000) })\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to get explanation');\n      }\n      \n      const data = await response.json();\n      setExplanation(data.explanation);\n    } catch (error) {\n      console.error('Explanation error:', error);\n      setExplanationError('Failed to generate explanation. Please try again.');\n    } finally {\n      setExplaining(false);\n    }\n  };\n\n  const handleExplainClick = (e: React.MouseEvent<HTMLButtonElement>): void => {\n    e.preventDefault();\n    e.stopPropagation();\n    void handleExplain();\n  };\n\n  const handleFollowStatusChange = (isFollowing: boolean): void => {\n    if (onFollowChange && post.user_id) {\n      onFollowChange(post.user_id, isFollowing);\n    }\n  };\n\n  const handleCardClick = (e: React.MouseEvent<HTMLDivElement>): void => {\n    const target = e.target as HTMLElement;\n    if (target.closest(\"a, button, [role='button']\")) {\n      return;\n    }\n    router.push(`/post/${post.id}`);\n  };\n\n  const handleCommentButtonClick = (e: React.MouseEvent<HTMLButtonElement>): void => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (!isAuthenticated) {\n      router.push(\"/login\");\n      return;\n    }\n    \n    router.push(`/post/${post.id}`);\n  };\n\n  const handleShowLikes = (e: React.MouseEvent<HTMLButtonElement>): void => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (likesCount === 0) return;\n    \n    setShowLikesDialog(true);\n  };\n\n  const handleProfileLinkClick = (e: React.MouseEvent<HTMLAnchorElement>): void => {\n    e.stopPropagation();\n  };\n\n  const handleShare = async (e: React.MouseEvent<HTMLButtonElement>): Promise<void> => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    const shareUrl = `${window.location.origin}/post/${post.id}`;\n    \n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: `Post by ${post.display_name}`,\n          text: post.content.substring(0, 100) + '...',\n          url: shareUrl,\n        });\n      } catch (error) {\n        console.error('Error sharing:', error);\n      }\n    } else {\n      await navigator.clipboard.writeText(shareUrl);\n    }\n  };\n\n  const handleShareDropdown = (): void => {\n    const shareUrl = `${window.location.origin}/post/${post.id}`;\n    \n    if (navigator.share) {\n      void navigator.share({\n        title: `Post by ${post.display_name}`,\n        text: post.content.substring(0, 100) + '...',\n        url: shareUrl,\n      });\n    } else {\n      void navigator.clipboard.writeText(shareUrl);\n    }\n  };\n\n  const handleExplainDropdown = (): void => {\n    setShowExplanation(true);\n    if (!explanation) {\n      void handleExplain();\n    }\n  };\n\n  const stopPropagation = (e: React.MouseEvent): void => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  return (\n    <>\n      <div \n        onClick={handleCardClick}\n        className=\"block transition-colors hover:bg-gray-50 dark:hover:bg-gray-900/50 cursor-pointer border-b border-gray-200 dark:border-gray-800 relative\"\n        role=\"button\"\n        tabIndex={0}\n        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>) => {\n          if (e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            router.push(`/post/${post.id}`);\n          }\n        }}\n      >\n        <article className={`${compact ? 'p-3' : 'p-4'}`}>\n          <div className=\"flex gap-3\">\n            {/* Avatar */}\n            <div className=\"flex-shrink-0\">\n              <Link \n                href={`/profile/${post.username}`} \n                onClick={handleProfileLinkClick}\n                className=\"inline-block hover:opacity-90 transition-opacity\"\n                aria-label={`View ${post.display_name}'s profile`}\n              >\n                <Avatar className={`${compact ? 'h-10 w-10' : 'h-12 w-12'} border border-gray-300 dark:border-gray-700`}>\n                  <AvatarImage \n                    src={post.avatar_url || undefined} \n                    alt={post.display_name}\n                    className=\"object-cover\"\n                  />\n                  <AvatarFallback className=\"bg-gradient-to-br from-blue-400 to-purple-500 text-white\">\n                    {getInitials(post.display_name)}\n                  </AvatarFallback>\n                </Avatar>\n              </Link>\n            </div>\n\n            <div className=\"flex-1 min-w-0\">\n              {/* User info row */}\n              <div className=\"flex items-start justify-between mb-1\">\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center flex-wrap gap-1\">\n                    <Link\n                      href={`/profile/${post.username}`}\n                      onClick={handleProfileLinkClick}\n                      className=\"font-bold hover:underline text-gray-900 dark:text-gray-100 text-sm md:text-base truncate max-w-[120px] md:max-w-none\"\n                    >\n                      {post.display_name}\n                    </Link>\n                    \n                    <Link\n                      href={`/profile/${post.username}`}\n                      onClick={handleProfileLinkClick}\n                      className=\"text-gray-500 dark:text-gray-400 text-sm truncate max-w-[100px] md:max-w-none ml-1\"\n                    >\n                      @{post.username}\n                    </Link>\n                    \n                    <span className=\"text-gray-500 dark:text-gray-400 mx-1\">·</span>\n                    \n                    <span \n                      className=\"text-gray-500 dark:text-gray-400 text-sm whitespace-nowrap\"\n                      title={formatDistanceToNow(new Date(post.created_at), { addSuffix: true })}\n                    >\n                      <span className=\"md:hidden\">{formatDateMobile(post.created_at)}</span>\n                      <span className=\"hidden md:inline\">\n                        {formatDistanceToNow(new Date(post.created_at), { addSuffix: true })}\n                      </span>\n                    </span>\n                    \n                    {/* Public/Private badge */}\n                    {post.is_public !== false && (\n                      <Globe className=\"h-3 w-3 text-gray-400 ml-1\" />\n                    )}\n                  </div>\n                </div>\n\n                {/* Follow button, menu, and provenance badges */}\n                <div className=\"flex items-center gap-2\">\n                  {/* Provenance badges */}\n                  <ProvenanceBadge \n                    provenance={post.provenance} \n                    postId={post.id} \n                  />\n                  \n                  {showFollowButton && isAuthenticated && currentUser && currentUser !== post.user_id && (\n                    <div \n                      className=\"hidden sm:block\" \n                      onClick={stopPropagation}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter' || e.key === ' ') {\n                          e.stopPropagation();\n                        }\n                      }}\n                      role=\"none\"\n                    >\n                      <FollowButton\n                        followerId={currentUser}\n                        followingId={post.user_id}\n                        isFollowing={isFollowing}\n                        onFollowChange={handleFollowStatusChange}\n                        size=\"sm\"\n                        variant=\"outline\"\n                      />\n                    </div>\n                  )}\n                  \n       <DropdownMenu>\n  <DropdownMenuTrigger asChild>\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      className=\"h-8 w-8 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\"\n      onClick={stopPropagation}\n    >\n      <MoreVertical className=\"h-4 w-4\" />\n    </Button>\n  </DropdownMenuTrigger>\n  <DropdownMenuContent align=\"end\" onClick={stopPropagation}>\n    <DropdownMenuItem onClick={handleShareDropdown}>\n      <Share className=\"h-4 w-4 mr-2\" />\n      Share post\n    </DropdownMenuItem>\n    <DropdownMenuItem onClick={handleExplainDropdown}>\n      <Sparkles className=\"h-4 w-4 mr-2\" />\n      Explain with AI\n    </DropdownMenuItem>\n    {isAuthenticated && currentUser !== post.user_id && (\n      <DropdownMenuItem \n        onClick={(e: React.MouseEvent<HTMLDivElement>) => {\n          e.preventDefault();\n          e.stopPropagation();\n          void handleRepost(e as unknown as React.MouseEvent<Element>);\n        }} \n        disabled={reposting}\n      >\n        <Repeat className=\"h-4 w-4 mr-2\" />\n        {reposting ? 'Reposting...' : 'Repost'}\n      </DropdownMenuItem>\n    )}\n    {isAuthenticated && (\n      <DropdownMenuItem>\n        <Bookmark className=\"h-4 w-4 mr-2\" />\n        Bookmark\n      </DropdownMenuItem>\n    )}\n  </DropdownMenuContent>\n</DropdownMenu>\n                </div>\n              </div>\n\n              {/* Post content */}\n              <div className=\"mb-3\">\n                <p className=\"whitespace-pre-wrap text-pretty break-words text-gray-900 dark:text-gray-100 text-sm md:text-[15px] leading-relaxed\">\n                  {post.content}\n                </p>\n              </div>\n\n              {/* Stats row */}\n              {post.impressions && post.impressions > 0 && (\n                <div className=\"flex items-center gap-4 text-gray-500 dark:text-gray-400 text-sm mb-3\">\n                  <div className=\"flex items-center gap-1\">\n                    <BarChart3 className=\"h-4 w-4\" />\n                    <span>{post.impressions.toLocaleString()} views</span>\n                  </div>\n                </div>\n              )}\n\n              {/* Action buttons */}\n              <div className=\"flex items-center justify-between max-w-md\">\n                {/* Comment button */}\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className={`group h-9 w-9 p-0 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-600 dark:hover:text-blue-400 ${compact ? 'h-8 w-8' : ''}`}\n                  onClick={handleCommentButtonClick}\n                  title=\"Reply\"\n                >\n                  <MessageCircle className={`h-4 w-4 group-hover:scale-110 transition-transform ${compact ? 'h-3.5 w-3.5' : ''}`} />\n                  {post.comments_count > 0 && (\n                    <span className=\"ml-1 text-xs text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400\">\n                      {post.comments_count}\n                    </span>\n                  )}\n                </Button>\n\n                {/* Repost button */}\n    <Button\n  variant=\"ghost\"\n  size=\"sm\"\n  className={`group h-9 w-9 p-0 hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-600 dark:hover:text-green-400 ${compact ? 'h-8 w-8' : ''}`}\n  onClick={handleRepost} // Ovo će sada raditi\n  disabled={reposting || !isAuthenticated}\n  title=\"Repost\"\n>\n  <Repeat className={`h-4 w-4 group-hover:scale-110 transition-transform ${compact ? 'h-3.5 w-3.5' : ''}`} />\n</Button>\n\n                {/* Like button */}\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className={`group h-9 w-9 p-0 ${\n                    liked \n                      ? 'text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600' \n                      : 'hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-500'\n                  } ${compact ? 'h-8 w-8' : ''}`}\n                  onClick={handleLike}\n                  disabled={loading || (!isAuthenticated && !liked)}\n                  title={liked ? \"Unlike\" : \"Like\"}\n                >\n                  <Heart className={`h-4 w-4 group-hover:scale-110 transition-transform ${liked ? 'fill-current' : ''} ${compact ? 'h-3.5 w-3.5' : ''}`} />\n                  {likesCount > 0 && (\n                    <span className={`ml-1 text-xs ${liked ? 'text-red-500' : 'text-gray-500 dark:text-gray-400'} group-hover:text-red-500`}>\n                      {likesCount}\n                    </span>\n                  )}\n                </Button>\n\n                {/* Share button */}\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className={`group h-9 w-9 p-0 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-600 dark:hover:text-blue-400 ${compact ? 'h-8 w-8' : ''}`}\n                  onClick={handleShare}\n                  title=\"Share\"\n                >\n                  <Share className={`h-4 w-4 group-hover:scale-110 transition-transform ${compact ? 'h-3.5 w-3.5' : ''}`} />\n                </Button>\n\n                {/* Explain button */}\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className={`group h-9 w-9 p-0 hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:text-purple-600 dark:hover:text-purple-400 ${compact ? 'h-8 w-8' : ''}`}\n                  onClick={handleExplainClick}\n                  title=\"Explain with AI\"\n                >\n                  <Sparkles className={`h-4 w-4 group-hover:scale-110 transition-transform ${compact ? 'h-3.5 w-3.5' : ''}`} />\n                </Button>\n              </div>\n\n              {/* Mobile follow button */}\n              {showFollowButton && isAuthenticated && currentUser && currentUser !== post.user_id && (\n                <div \n                  className=\"sm:hidden mt-3\" \n                  onClick={stopPropagation}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.stopPropagation();\n                    }\n                  }}\n                  role=\"none\"\n                >\n                  <FollowButton\n                    followerId={currentUser}\n                    followingId={post.user_id}\n                    isFollowing={isFollowing}\n                    onFollowChange={handleFollowStatusChange}\n                    size=\"sm\"\n                    variant=\"outline\"\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n        </article>\n      </div>\n\n      {/* Likes List Dialog */}\n      <LikesList\n        postId={post.id}\n        open={showLikesDialog}\n        onOpenChange={setShowLikesDialog}\n      />\n\n      {/* Explanation Dialog */}\n      <AlertDialog open={showExplanation} onOpenChange={setShowExplanation}>\n        <AlertDialogContent className=\"max-w-lg\">\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"flex items-center gap-2\">\n              <Sparkles className=\"h-5 w-5 text-purple-500\" />\n              AI Explanation\n            </AlertDialogTitle>\n            <AlertDialogDescription>\n              Explanation of post by @{post.username}\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          \n          <div className=\"py-4\">\n            {explaining ? (\n              <div className=\"flex flex-col items-center justify-center py-8\">\n                <Loader2 className=\"h-8 w-8 animate-spin text-purple-500 mb-4\" />\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  AI is analyzing the post...\n                </p>\n              </div>\n            ) : explanationError ? (\n              <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\">\n                <p className=\"text-red-700 dark:text-red-400\">{explanationError}</p>\n              </div>\n            ) : explanation ? (\n              <div className=\"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4\">\n                <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                  {explanation}\n                </p>\n                <div className=\"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400\">\n                  <p>Powered by DeepSeek AI</p>\n                  <p className=\"mt-1\">AI-generated content may not always be accurate</p>\n                </div>\n              </div>\n            ) : null}\n          </div>\n          \n          <AlertDialogFooter>\n            <AlertDialogCancel>Close</AlertDialogCancel>\n            {explanation && (\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  void navigator.clipboard.writeText(explanation);\n                }}\n              >\n                Copy Explanation\n              </Button>\n            )}\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2614, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/feed/feed.tsx"],"sourcesContent":["// components/feed/feed.tsx\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { PostCard } from \"@/components/post/post-card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2, RefreshCw } from \"lucide-react\";\n\ninterface Post {\n  id: string;\n  content: string;\n  created_at: string;\n  user_id: string;\n  username: string;\n  display_name: string;\n  avatar_url: string | null;\n  likes_count: number;\n  comments_count: number;\n  user_has_liked: boolean;\n}\n\ninterface FeedProps {\n  userId?: string;\n  followingUserIds?: string[];\n  isAuthenticated?: boolean;\n  showFollowButton?: boolean;\n  onFollowChange?: (userId: string, isFollowing: boolean) => void;\n}\n\nexport function Feed({ \n  userId, \n  followingUserIds, \n  isAuthenticated = false,\n  showFollowButton = false,\n  onFollowChange\n}: FeedProps) {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [followingPosts, setFollowingPosts] = useState<Post[]>([]);\n  const [otherPosts, setOtherPosts] = useState<Post[]>([]);\n  const [showAll, setShowAll] = useState(false);\n  const [currentFollowingIds, setCurrentFollowingIds] = useState<string[]>(followingUserIds || []);\n\n  useEffect(() => {\n    if (followingUserIds) {\n      setCurrentFollowingIds(followingUserIds);\n    }\n  }, [followingUserIds]);\n\n  useEffect(() => {\n    void fetchPosts();\n  }, [userId, followingUserIds, isAuthenticated]);\n\n  const handleFollowChange = (userId: string, isFollowing: boolean) => {\n    if (isFollowing) {\n      // Dodaj u listu pratilaca\n      setCurrentFollowingIds(prev => [...prev, userId]);\n    } else {\n      // Ukloni iz liste pratilaca\n      setCurrentFollowingIds(prev => prev.filter(id => id !== userId));\n    }\n\n    // Pozovi callback ako postoji\n    onFollowChange?.(userId, isFollowing);\n  };\n\n  async function fetchPosts() {\n    const supabase = createClient();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Prvo dohvati sve postove\n      const { data: allPosts, error: fetchError } = await supabase\n        .from(\"posts\")\n        .select(\n          `\n          *,\n          profiles!posts_user_id_fkey(username, display_name, avatar_url)\n        `\n        )\n        .order(\"created_at\", { ascending: false })\n        .limit(100);\n\n      if (fetchError) {\n        console.error(\"[v0] Error fetching posts:\", fetchError);\n        if (fetchError.message?.includes(\"Could not find the table\")) {\n          setError(\"database_not_setup\");\n        } else {\n          setError(fetchError.message);\n        }\n        setLoading(false);\n        return;\n      }\n\n      if (!allPosts || allPosts.length === 0) {\n        setPosts([]);\n        setLoading(false);\n        return;\n      }\n\n      // Formatiraj sve postove\n      const formattedAllPosts = await Promise.all(\n        allPosts.map(async (post) => {\n          const { count: likesCount } = await supabase\n            .from(\"likes\")\n            .select(\"*\", { count: \"exact\", head: true })\n            .eq(\"post_id\", post.id);\n\n          const { count: commentsCount } = await supabase\n            .from(\"comments\")\n            .select(\"*\", { count: \"exact\", head: true })\n            .eq(\"post_id\", post.id);\n\n          let userHasLiked = false;\n          if (userId) {\n            const { data: like } = await supabase\n              .from(\"likes\")\n              .select(\"id\")\n              .eq(\"post_id\", post.id)\n              .eq(\"user_id\", userId)\n              .maybeSingle();\n            userHasLiked = !!like;\n          }\n\n          return {\n            id: post.id,\n            content: post.content,\n            created_at: post.created_at,\n            user_id: post.user_id,\n            username: post.profiles.username,\n            display_name: post.profiles.display_name,\n            avatar_url: post.profiles.avatar_url,\n            likes_count: likesCount ?? 0,\n            comments_count: commentsCount ?? 0,\n            user_has_liked: userHasLiked,\n          };\n        })\n      );\n\n      // Ako je korisnik logovan i ima pratilaca\n      if (isAuthenticated && currentFollowingIds && currentFollowingIds.length > 0) {\n        const following = formattedAllPosts.filter((post) =>\n          currentFollowingIds.includes(post.user_id)\n        );\n        const other = formattedAllPosts.filter(\n          (post) => !currentFollowingIds.includes(post.user_id)\n        );\n\n        setFollowingPosts(following);\n        setOtherPosts(other);\n        \n        // Prvo prikaži postove od pratilaca\n        if (following.length > 0) {\n          setPosts(following);\n        } else {\n          setPosts(other);\n          setShowAll(true);\n        }\n      } else {\n        // Ako nije logovan ili nema pratilaca, prikaži sve\n        setPosts(formattedAllPosts);\n        setFollowingPosts([]);\n        setOtherPosts(formattedAllPosts);\n        setShowAll(true);\n      }\n    } catch (err) {\n      console.error(\"Error fetching posts:\", err);\n      setError(err instanceof Error ? err.message : \"Unknown error\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const handleShowAll = () => {\n    if (followingPosts.length > 0 && otherPosts.length > 0) {\n      setPosts([...followingPosts, ...otherPosts]);\n      setShowAll(true);\n    }\n  };\n\n  const handleShowFollowing = () => {\n    if (followingPosts.length > 0) {\n      setPosts(followingPosts);\n      setShowAll(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-8 text-center text-muted-foreground\">\n        <Loader2 className=\"h-6 w-6 animate-spin mx-auto mb-2\" />\n        <p>Loading feed...</p>\n      </div>\n    );\n  }\n\n  if (error === \"database_not_setup\") {\n    return (\n      <div className=\"p-8 text-center\">\n        <p className=\"text-muted-foreground mb-2\">Database not set up</p>\n        <p className=\"text-muted-foreground text-sm\">\n          Run the SQL scripts to create the necessary tables\n        </p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-8 text-center\">\n        <p className=\"text-destructive mb-2\">Error loading feed</p>\n        <p className=\"text-muted-foreground text-sm\">{error}</p>\n        <Button onClick={fetchPosts} variant=\"outline\" className=\"mt-4\">\n          <RefreshCw className=\"h-4 w-4 mr-2\" />\n          Try Again\n        </Button>\n      </div>\n    );\n  }\n\n  if (posts.length === 0) {\n    return (\n      <div className=\"p-8 text-center\">\n        <p className=\"text-muted-foreground mb-2\">No posts yet</p>\n        <p className=\"text-muted-foreground text-sm\">\n          {isAuthenticated\n            ? \"Be the first to share something or follow some users!\"\n            : \"Be the first to share something!\"}\n        </p>\n        {isAuthenticated && (\n          <Button onClick={fetchPosts} variant=\"outline\" className=\"mt-4\">\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Refresh\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Filter dugmad - samo ako ima pratilaca */}\n      {isAuthenticated && followingPosts.length > 0 && otherPosts.length > 0 && (\n        <div className=\"sticky top-14 z-10 bg-background/80 backdrop-blur-sm border-b px-4 py-2\">\n          <div className=\"flex gap-2\">\n            <Button\n              variant={showAll ? \"outline\" : \"default\"}\n              size=\"sm\"\n              onClick={handleShowFollowing}\n              className=\"text-xs\"\n            >\n              Following ({followingPosts.length})\n            </Button>\n            <Button\n              variant={showAll ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={handleShowAll}\n              className=\"text-xs\"\n            >\n              All Posts ({followingPosts.length + otherPosts.length})\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {/* Poruka ako prikazujemo samo pratilce */}\n      {isAuthenticated && !showAll && followingPosts.length === 0 && (\n        <div className=\"p-4 text-center border-b\">\n          <p className=\"text-muted-foreground text-sm\">\n            No posts from users you follow.{\" \"}\n            <button\n              onClick={handleShowAll}\n              className=\"text-primary hover:underline\"\n            >\n              Show all posts\n            </button>\n          </p>\n        </div>\n      )}\n\n      {/* Postovi */}\n      <div className=\"divide-y\">\n        {posts.map((post) => (\n          <PostCard \n            key={post.id} \n            post={post}\n            showFollowButton={showFollowButton && isAuthenticated}\n            currentUserId={userId}\n            isCurrentUserFollowing={currentFollowingIds.includes(post.user_id)}\n            onFollowChange={handleFollowChange}\n          />\n        ))}\n      </div>\n\n      {/* Poruka ako ima više postova */}\n      {isAuthenticated && !showAll && otherPosts.length > 0 && (\n        <div className=\"p-4 text-center border-t\">\n          <p className=\"text-muted-foreground text-sm\">\n            Showing {followingPosts.length} posts from users you follow.{\" \"}\n            <button\n              onClick={handleShowAll}\n              className=\"text-primary hover:underline\"\n            >\n              Show {otherPosts.length} more posts\n            </button>\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;AAG3B;AACA;AACA;AACA;AACA;AAAA;AANA;;;;;;;AA6BO,SAAS,KAAK,EACnB,MAAM,EACN,gBAAgB,EAChB,kBAAkB,KAAK,EACvB,mBAAmB,KAAK,EACxB,cAAc,EACJ;IACV,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC/D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAS,EAAE;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAW,oBAAoB,EAAE;IAE/F,IAAA,kNAAS,EAAC;QACR,IAAI,kBAAkB;YACpB,uBAAuB;QACzB;IACF,GAAG;QAAC;KAAiB;IAErB,IAAA,kNAAS,EAAC;QACR,KAAK;IACP,GAAG;QAAC;QAAQ;QAAkB;KAAgB;IAE9C,MAAM,qBAAqB,CAAC,QAAgB;QAC1C,IAAI,aAAa;YACf,0BAA0B;YAC1B,uBAAuB,CAAA,OAAQ;uBAAI;oBAAM;iBAAO;QAClD,OAAO;YACL,4BAA4B;YAC5B,uBAAuB,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,KAAM,OAAO;QAC1D;QAEA,8BAA8B;QAC9B,iBAAiB,QAAQ;IAC3B;IAEA,eAAe;QACb,MAAM,WAAW,IAAA,yIAAY;QAC7B,WAAW;QACX,SAAS;QAET,IAAI;YACF,2BAA2B;YAC3B,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SACjD,IAAI,CAAC,SACL,MAAM,CACL,CAAC;;;QAGH,CAAC,EAEA,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM,GACvC,KAAK,CAAC;YAET,IAAI,YAAY;gBACd,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,IAAI,WAAW,OAAO,EAAE,SAAS,6BAA6B;oBAC5D,SAAS;gBACX,OAAO;oBACL,SAAS,WAAW,OAAO;gBAC7B;gBACA,WAAW;gBACX;YACF;YAEA,IAAI,CAAC,YAAY,SAAS,MAAM,KAAK,GAAG;gBACtC,SAAS,EAAE;gBACX,WAAW;gBACX;YACF;YAEA,yBAAyB;YACzB,MAAM,oBAAoB,MAAM,QAAQ,GAAG,CACzC,SAAS,GAAG,CAAC,OAAO;gBAClB,MAAM,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,SACL,MAAM,CAAC,KAAK;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GACzC,EAAE,CAAC,WAAW,KAAK,EAAE;gBAExB,MAAM,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,SACpC,IAAI,CAAC,YACL,MAAM,CAAC,KAAK;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GACzC,EAAE,CAAC,WAAW,KAAK,EAAE;gBAExB,IAAI,eAAe;gBACnB,IAAI,QAAQ;oBACV,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,SAC1B,IAAI,CAAC,SACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,WAAW,QACd,WAAW;oBACd,eAAe,CAAC,CAAC;gBACnB;gBAEA,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,SAAS,KAAK,OAAO;oBACrB,YAAY,KAAK,UAAU;oBAC3B,SAAS,KAAK,OAAO;oBACrB,UAAU,KAAK,QAAQ,CAAC,QAAQ;oBAChC,cAAc,KAAK,QAAQ,CAAC,YAAY;oBACxC,YAAY,KAAK,QAAQ,CAAC,UAAU;oBACpC,aAAa,cAAc;oBAC3B,gBAAgB,iBAAiB;oBACjC,gBAAgB;gBAClB;YACF;YAGF,0CAA0C;YAC1C,IAAI,mBAAmB,uBAAuB,oBAAoB,MAAM,GAAG,GAAG;gBAC5E,MAAM,YAAY,kBAAkB,MAAM,CAAC,CAAC,OAC1C,oBAAoB,QAAQ,CAAC,KAAK,OAAO;gBAE3C,MAAM,QAAQ,kBAAkB,MAAM,CACpC,CAAC,OAAS,CAAC,oBAAoB,QAAQ,CAAC,KAAK,OAAO;gBAGtD,kBAAkB;gBAClB,cAAc;gBAEd,oCAAoC;gBACpC,IAAI,UAAU,MAAM,GAAG,GAAG;oBACxB,SAAS;gBACX,OAAO;oBACL,SAAS;oBACT,WAAW;gBACb;YACF,OAAO;gBACL,mDAAmD;gBACnD,SAAS;gBACT,kBAAkB,EAAE;gBACpB,cAAc;gBACd,WAAW;YACb;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,gBAAgB;QACpB,IAAI,eAAe,MAAM,GAAG,KAAK,WAAW,MAAM,GAAG,GAAG;YACtD,SAAS;mBAAI;mBAAmB;aAAW;YAC3C,WAAW;QACb;IACF;IAEA,MAAM,sBAAsB;QAC1B,IAAI,eAAe,MAAM,GAAG,GAAG;YAC7B,SAAS;YACT,WAAW;QACb;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,4NAAO;oBAAC,WAAU;;;;;;8BACnB,8OAAC;8BAAE;;;;;;;;;;;;IAGT;IAEA,IAAI,UAAU,sBAAsB;QAClC,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAC1C,8OAAC;oBAAE,WAAU;8BAAgC;;;;;;;;;;;;IAKnD;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAAwB;;;;;;8BACrC,8OAAC;oBAAE,WAAU;8BAAiC;;;;;;8BAC9C,8OAAC,qIAAM;oBAAC,SAAS;oBAAY,SAAQ;oBAAU,WAAU;;sCACvD,8OAAC,6NAAS;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;;;;;;IAK9C;IAEA,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAC1C,8OAAC;oBAAE,WAAU;8BACV,kBACG,0DACA;;;;;;gBAEL,iCACC,8OAAC,qIAAM;oBAAC,SAAS;oBAAY,SAAQ;oBAAU,WAAU;;sCACvD,8OAAC,6NAAS;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;;;;;;IAMhD;IAEA,qBACE,8OAAC;;YAEE,mBAAmB,eAAe,MAAM,GAAG,KAAK,WAAW,MAAM,GAAG,mBACnE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,qIAAM;4BACL,SAAS,UAAU,YAAY;4BAC/B,MAAK;4BACL,SAAS;4BACT,WAAU;;gCACX;gCACa,eAAe,MAAM;gCAAC;;;;;;;sCAEpC,8OAAC,qIAAM;4BACL,SAAS,UAAU,YAAY;4BAC/B,MAAK;4BACL,SAAS;4BACT,WAAU;;gCACX;gCACa,eAAe,MAAM,GAAG,WAAW,MAAM;gCAAC;;;;;;;;;;;;;;;;;;YAO7D,mBAAmB,CAAC,WAAW,eAAe,MAAM,KAAK,mBACxD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;;wBAAgC;wBACX;sCAChC,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;0BAQP,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC,+IAAQ;wBAEP,MAAM;wBACN,kBAAkB,oBAAoB;wBACtC,eAAe;wBACf,wBAAwB,oBAAoB,QAAQ,CAAC,KAAK,OAAO;wBACjE,gBAAgB;uBALX,KAAK,EAAE;;;;;;;;;;YAWjB,mBAAmB,CAAC,WAAW,WAAW,MAAM,GAAG,mBAClD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;;wBAAgC;wBAClC,eAAe,MAAM;wBAAC;wBAA8B;sCAC7D,8OAAC;4BACC,SAAS;4BACT,WAAU;;gCACX;gCACO,WAAW,MAAM;gCAAC;;;;;;;;;;;;;;;;;;;;;;;;AAOtC"}},
    {"offset": {"line": 3047, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/lib/feed-engine/engine.ts"],"sourcesContent":["// lib/feed-engine/engine.ts\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { \r\n  FeedAlgorithm, \r\n  PostExplanation, \r\n  FeedRequest,\r\n  PostSignal\r\n} from './types';\r\n\r\nexport class FeedEngine {\r\n  private supabase = createClient();\r\n  \r\n  // Get active algorithm for user (or default)\r\n  async getUserAlgorithm(userId?: string): Promise<FeedAlgorithm> {\r\n    if (!userId) {\r\n      // Default algorithm for non-logged in users\r\n      const { data } = await this.supabase\r\n        .from('feed_algorithms')\r\n        .select('*')\r\n        .eq('slug', 'chronological')\r\n        .single();\r\n      \r\n      return data as FeedAlgorithm;\r\n    }\r\n    \r\n    // Get user's active algorithm\r\n    const { data: userAlgo } = await this.supabase\r\n      .from('user_feed_algorithms')\r\n      .select(`\r\n        *,\r\n        algorithms:feed_algorithms(*)\r\n      `)\r\n      .eq('user_id', userId)\r\n      .eq('is_active', true)\r\n      .order('priority', { ascending: true })\r\n      .limit(1)\r\n      .single();\r\n    \r\n    if (userAlgo?.algorithms) {\r\n      return userAlgo.algorithms as FeedAlgorithm;\r\n    }\r\n    \r\n    // Fallback to chronological\r\n    const { data } = await this.supabase\r\n      .from('feed_algorithms')\r\n      .select('*')\r\n      .eq('slug', 'chronological')\r\n      .single();\r\n    \r\n    return data as FeedAlgorithm;\r\n  }\r\n  \r\n  // Get available algorithms with filtering\r\n  async getAvailableAlgorithms(options?: {\r\n    categorySlug?: string;\r\n    officialOnly?: boolean;\r\n    search?: string;\r\n    limit?: number;\r\n  }) {\r\n    let query = this.supabase\r\n      .from('feed_algorithms')\r\n      .select(`\r\n        *,\r\n        categories:feed_algorithm_categories_relations(\r\n          category:feed_algorithm_categories(*)\r\n        )\r\n      `)\r\n      .eq('is_public', true);\r\n    \r\n    if (options?.officialOnly) {\r\n      query = query.eq('is_official', true);\r\n    }\r\n    \r\n    if (options?.categorySlug) {\r\n      query = query.contains('categories', [{ category: { slug: options.categorySlug } }]);\r\n    }\r\n    \r\n    if (options?.search) {\r\n      query = query.or(`name.ilike.%${options.search}%,description.ilike.%${options.search}%`);\r\n    }\r\n    \r\n    if (options?.limit) {\r\n      query = query.limit(options.limit);\r\n    }\r\n    \r\n    const { data } = await query.order('install_count', { ascending: false });\r\n    return data;\r\n  }\r\n  \r\n  // Install algorithm for user\r\n  async installAlgorithm(userId: string, algorithmId: string, customConfig?: any) {\r\n    const { data, error } = await this.supabase\r\n      .from('user_feed_algorithms')\r\n      .upsert({\r\n        user_id: userId,\r\n        algorithm_id: algorithmId,\r\n        is_active: true,\r\n        custom_config: customConfig || {},\r\n        updated_at: new Date().toISOString()\r\n      }, {\r\n        onConflict: 'user_id,algorithm_id'\r\n      });\r\n    \r\n    if (!error) {\r\n      // Increment install count\r\n      await this.supabase.rpc('increment', {\r\n        table_name: 'feed_algorithms',\r\n        id: algorithmId,\r\n        column: 'install_count'\r\n      });\r\n    }\r\n    \r\n    return { data, error };\r\n  }\r\n  \r\n  // Uninstall algorithm\r\n  async uninstallAlgorithm(userId: string, algorithmId: string) {\r\n    const { error } = await this.supabase\r\n      .from('user_feed_algorithms')\r\n      .delete()\r\n      .eq('user_id', userId)\r\n      .eq('algorithm_id', algorithmId);\r\n    \r\n    if (!error) {\r\n      // Decrement install count\r\n      await this.supabase.rpc('decrement', {\r\n        table_name: 'feed_algorithms',\r\n        id: algorithmId,\r\n        column: 'install_count'\r\n      });\r\n    }\r\n    \r\n    return { error };\r\n  }\r\n  \r\n  // Set active algorithm\r\n  async setActiveAlgorithm(userId: string, algorithmId: string) {\r\n    // First, deactivate all user algorithms\r\n    await this.supabase\r\n      .from('user_feed_algorithms')\r\n      .update({ is_active: false })\r\n      .eq('user_id', userId);\r\n    \r\n    // Activate selected one\r\n    const { error } = await this.supabase\r\n      .from('user_feed_algorithms')\r\n      .update({ \r\n        is_active: true,\r\n        updated_at: new Date().toISOString()\r\n      })\r\n      .eq('user_id', userId)\r\n      .eq('algorithm_id', algorithmId);\r\n    \r\n    return { error };\r\n  }\r\n  \r\n  // Rate algorithm\r\n  async rateAlgorithm(userId: string, algorithmId: string, rating: number) {\r\n    // Note: This is a simplified version. In production, you'd want a separate ratings table.\r\n    const { error } = await this.supabase\r\n      .from('algorithm_ratings')\r\n      .upsert({\r\n        user_id: userId,\r\n        algorithm_id: algorithmId,\r\n        rating,\r\n        updated_at: new Date().toISOString()\r\n      });\r\n    \r\n    return { error };\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3180, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/lib/feed-engine/algorithms/base.ts"],"sourcesContent":["// lib/feed-engine/algorithms/base.ts\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { FeedAlgorithm, PostSignal } from '../types';\r\n\r\nexport interface PostData {\r\n  id: string;\r\n  content: string;\r\n  created_at: string;\r\n  user_id: string;\r\n  comments_count: number;\r\n  likes_count: number;\r\n  username: string;\r\n  display_name: string;\r\n  avatar_url: string | null;\r\n  user_has_liked: boolean;\r\n}\r\n\r\nexport abstract class BaseAlgorithm {\r\n  protected supabase = createClient();\r\n  protected algorithm: FeedAlgorithm;\r\n  \r\n  constructor(algorithm: FeedAlgorithm) {\r\n    this.algorithm = algorithm;\r\n  }\r\n  \r\n  abstract calculateScore(\r\n    post: PostData, \r\n    userId?: string, \r\n    context?: Record<string, unknown>\r\n  ): Promise<{ score: number; signals: PostSignal[]; explanation?: string }>;\r\n  \r\n  abstract getDescription(): string;\r\n  \r\n  // Common helper methods\r\n  protected async getUserFollowLevel(userId: string, authorId: string): Promise<number> {\r\n    if (userId === authorId) return 1.0;\r\n    \r\n    const { data } = await this.supabase\r\n      .from('follows')\r\n      .select('*')\r\n      .eq('follower_id', userId)\r\n      .eq('following_id', authorId)\r\n      .single();\r\n    \r\n    return data ? 1.0 : 0.0;\r\n  }\r\n  \r\n  protected calculateTimeDecay(createdAt: string, maxAgeHours: number = 168): number {\r\n    const now = new Date();\r\n    const postTime = new Date(createdAt);\r\n    const hoursSince = (now.getTime() - postTime.getTime()) / (1000 * 60 * 60);\r\n    \r\n    if (hoursSince > maxAgeHours) return 0;\r\n    return Math.exp(-hoursSince / (maxAgeHours / 2));\r\n  }\r\n  \r\n  protected async getEngagementHistory(userId: string, authorId: string): Promise<number> {\r\n    try {\r\n      // Prvo dobijemo sve postove autora\r\n      const { data: authorPosts, error: postsError } = await this.supabase\r\n        .from('posts')\r\n        .select('id')\r\n        .eq('user_id', authorId);\r\n      \r\n      if (postsError) {\r\n        console.error('Error fetching author posts:', postsError);\r\n        return 0;\r\n      }\r\n      \r\n      if (!authorPosts || authorPosts.length === 0) {\r\n        return 0;\r\n      }\r\n      \r\n      const postIds = authorPosts.map(post => post.id);\r\n      \r\n      // Batch queries za effikasnost\r\n      const [likesResult, commentsResult] = await Promise.all([\r\n        this.supabase\r\n          .from('likes')\r\n          .select('*', { count: 'exact', head: true })\r\n          .eq('user_id', userId)\r\n          .in('post_id', postIds),\r\n        this.supabase\r\n          .from('comments')\r\n          .select('*', { count: 'exact', head: true })\r\n          .eq('user_id', userId)\r\n          .in('post_id', postIds)\r\n      ]);\r\n      \r\n      const likesCount = likesResult.count || 0;\r\n      const commentsCount = commentsResult.count || 0;\r\n      const totalInteractions = likesCount + commentsCount;\r\n      \r\n      // Normalize to 0-1 range (max 100 interactions = 1.0)\r\n      return Math.min(totalInteractions / 100, 1.0);\r\n      \r\n    } catch (error) {\r\n      console.error('Error getting engagement history:', error);\r\n      return 0;\r\n    }\r\n  }\r\n  \r\n  // Nova helper metoda za mutual connections\r\n  protected async getMutualConnections(userId: string, authorId: string): Promise<number> {\r\n    try {\r\n      // Dobij korisnike koje prati autor\r\n      const { data: authorFollowing, error: authorError } = await this.supabase\r\n        .from('follows')\r\n        .select('following_id')\r\n        .eq('follower_id', authorId);\r\n      \r\n      if (authorError) {\r\n        console.error('Error fetching author following:', authorError);\r\n        return 0;\r\n      }\r\n      \r\n      if (!authorFollowing || authorFollowing.length === 0) {\r\n        return 0;\r\n      }\r\n      \r\n      const authorFollowingIds = authorFollowing.map(f => f.following_id);\r\n      \r\n      // Broj mutual follows - korisnici koje oboje prate\r\n      const { count, error: mutualError } = await this.supabase\r\n        .from('follows')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('follower_id', userId)\r\n        .in('following_id', authorFollowingIds);\r\n      \r\n      if (mutualError) {\r\n        console.error('Error fetching mutual connections:', mutualError);\r\n        return 0;\r\n      }\r\n      \r\n      return Math.min((count || 0) / 10, 1.0); // Normalize\r\n      \r\n    } catch (error) {\r\n      console.error('Error getting mutual connections:', error);\r\n      return 0;\r\n    }\r\n  }\r\n  \r\n  // Helper za ekstrakciju hashtagova\r\n  protected extractHashtags(content: string): string[] {\r\n    const hashtagRegex = /#(\\w+)/g;\r\n    const matches = content.match(hashtagRegex);\r\n    return matches ? matches.map(tag => tag.slice(1).toLowerCase()) : [];\r\n  }\r\n  \r\n  // Helper za detekciju clickbaita\r\n  protected detectClickbait(content: string): number {\r\n    const clickbaitPatterns = [\r\n      /you won[']?t believe/i,\r\n      /this (will|is going to) blow your mind/i,\r\n      /number \\d+ will shock you/i,\r\n      /(before|after) (and|vs)/i,\r\n      /the reason why/i,\r\n      /(everyone|people) are (going crazy|losing it)/i,\r\n      /(secret|hidden|they don[']?t want you to know)/i\r\n    ];\r\n    \r\n    let score = 0;\r\n    clickbaitPatterns.forEach(pattern => {\r\n      if (pattern.test(content)) score += 0.2;\r\n    });\r\n    \r\n    // Excessive punctuation\r\n    const exclams = (content.match(/!/g) || []).length;\r\n    const questions = (content.match(/\\?/g) || []).length;\r\n    if (exclams > 2) score += 0.1 * (exclams - 2);\r\n    if (questions > 3) score += 0.05 * (questions - 3);\r\n    \r\n    return Math.min(score, 1.0);\r\n  }\r\n  \r\n  // Helper za procjenu vremena čitanja\r\n  protected estimateReadingTime(content: string): number {\r\n    const words = content.split(/\\s+/).length;\r\n    const wordsPerMinute = 200;\r\n    return words / wordsPerMinute;\r\n  }\r\n  \r\n  // Helper za procjenu kvaliteta sadržaja\r\n  protected assessContentQuality(post: PostData): number {\r\n    const content = post.content.toLowerCase();\r\n    let score = 0.5;\r\n    \r\n    // Positive indicators\r\n    if (content.length > 200) score += 0.2;\r\n    if (content.includes('?') && content.includes('because')) score += 0.1; // Shows reasoning\r\n    \r\n    const complexWords = content.split(' ').filter(word => word.length > 7).length;\r\n    if (complexWords > 3) score += 0.1;\r\n    \r\n    if (post.comments_count > 5) score += 0.1; // Discussion\r\n    \r\n    // Negative indicators\r\n    if (this.detectClickbait(content) > 0.7) score -= 0.3;\r\n    if (content.includes('!!!') || content.includes('??')) score -= 0.1;\r\n    \r\n    return Math.max(0, Math.min(1, score));\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3321, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/lib/feed-engine/algorithms/chronological.ts"],"sourcesContent":["// lib/feed-engine/algorithms/chronological.ts\r\nimport { BaseAlgorithm } from './base';\r\nimport { PostSignal } from '../types';\r\n\r\nexport class ChronologicalAlgorithm extends BaseAlgorithm {\r\n  async calculateScore(\r\n    post: any, \r\n    userId?: string, \r\n    context?: any\r\n  ): Promise<{ \r\n    score: number; \r\n    signals: PostSignal[]; \r\n    explanation?: string \r\n  }> {\r\n    const signals: PostSignal[] = [];\r\n    \r\n    try {\r\n      // Pure time-based score (newer = higher)\r\n      const postTime = new Date(post.created_at).getTime();\r\n      const now = Date.now();\r\n      const recency = Math.max(0, 1 - (now - postTime) / (7 * 24 * 60 * 60 * 1000)); // One week window\r\n      \r\n      signals.push({\r\n        name: 'time_recency',\r\n        value: recency,\r\n        weight: 1.0,\r\n        description: 'How recently the post was created'\r\n      });\r\n      \r\n      return {\r\n        score: recency,\r\n        signals,\r\n        explanation: `This post is shown because it was created ${this.formatTimeAgo(post.created_at)}.`\r\n      };\r\n    } catch (error) {\r\n      console.error('Error in calculateScore:', error);\r\n      return {\r\n        score: 0,\r\n        signals: [],\r\n        explanation: 'Error calculating score'\r\n      };\r\n    }\r\n  }\r\n  \r\n  getDescription(): string {\r\n    return 'Shows posts in the order they were created, newest first.';\r\n  }\r\n  \r\n  private formatTimeAgo(date: string): string {\r\n    try {\r\n      const now = new Date();\r\n      const postDate = new Date(date);\r\n      const diffMs = now.getTime() - postDate.getTime();\r\n      const diffMins = Math.floor(diffMs / 60000);\r\n      const diffHours = Math.floor(diffMs / 3600000);\r\n      const diffDays = Math.floor(diffMs / 86400000);\r\n      \r\n      if (diffMins < 60) return `${diffMins} minutes ago`;\r\n      if (diffHours < 24) return `${diffHours} hours ago`;\r\n      return `${diffDays} days ago`;\r\n    } catch (error) {\r\n      return 'recently';\r\n    }\r\n  }\r\n}"],"names":[],"mappings":"AAAA,8CAA8C;;;;;AAC9C;;AAGO,MAAM,+BAA+B,4JAAa;IACvD,MAAM,eACJ,IAAS,EACT,MAAe,EACf,OAAa,EAKZ;QACD,MAAM,UAAwB,EAAE;QAEhC,IAAI;YACF,yCAAyC;YACzC,MAAM,WAAW,IAAI,KAAK,KAAK,UAAU,EAAE,OAAO;YAClD,MAAM,MAAM,KAAK,GAAG;YACpB,MAAM,UAAU,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,QAAQ,IAAI,CAAC,IAAI,KAAK,KAAK,KAAK,IAAI,IAAI,kBAAkB;YAEjG,QAAQ,IAAI,CAAC;gBACX,MAAM;gBACN,OAAO;gBACP,QAAQ;gBACR,aAAa;YACf;YAEA,OAAO;gBACL,OAAO;gBACP;gBACA,aAAa,CAAC,0CAA0C,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,UAAU,EAAE,CAAC,CAAC;YAClG;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,OAAO;gBACL,OAAO;gBACP,SAAS,EAAE;gBACX,aAAa;YACf;QACF;IACF;IAEA,iBAAyB;QACvB,OAAO;IACT;IAEQ,cAAc,IAAY,EAAU;QAC1C,IAAI;YACF,MAAM,MAAM,IAAI;YAChB,MAAM,WAAW,IAAI,KAAK;YAC1B,MAAM,SAAS,IAAI,OAAO,KAAK,SAAS,OAAO;YAC/C,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;YACrC,MAAM,YAAY,KAAK,KAAK,CAAC,SAAS;YACtC,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;YAErC,IAAI,WAAW,IAAI,OAAO,GAAG,SAAS,YAAY,CAAC;YACnD,IAAI,YAAY,IAAI,OAAO,GAAG,UAAU,UAAU,CAAC;YACnD,OAAO,GAAG,SAAS,SAAS,CAAC;QAC/B,EAAE,OAAO,OAAO;YACd,OAAO;QACT;IACF;AACF"}},
    {"offset": {"line": 3379, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/lib/feed-engine/algorithms/social.ts"],"sourcesContent":["// lib/feed-engine/algorithms/social.ts (ispravka)\r\nimport { BaseAlgorithm } from './base';\r\nimport { PostSignal } from '../types';\r\n\r\nexport class SocialAlgorithm extends BaseAlgorithm {\r\n  async calculateScore(post: any, userId?: string, context?: any): Promise<{ \r\n    score: number; \r\n    signals: PostSignal[]; \r\n    explanation?: string \r\n  }> {\r\n    const signals: PostSignal[] = [];\r\n    let totalScore = 0;\r\n    \r\n    if (!userId) {\r\n      return { score: 0, signals, explanation: 'You need to be logged in for this algorithm.' };\r\n    }\r\n    \r\n    // 1. Follow level (40%)\r\n    const followLevel = await this.getUserFollowLevel(userId, post.user_id);\r\n    const followWeight = this.algorithm.weight_config.follow_level || 0.4;\r\n    const followScore = followLevel * followWeight;\r\n    totalScore += followScore;\r\n    \r\n    signals.push({\r\n      name: 'follow_level',\r\n      value: followLevel,\r\n      weight: followWeight,\r\n      description: this.algorithm.signal_descriptions.follow_level || 'How closely connected you are to the author'\r\n    });\r\n    \r\n    // 2. Engagement history (40%)\r\n    const engagementHistory = await this.getEngagementHistory(userId, post.user_id);\r\n    const engagementWeight = this.algorithm.weight_config.engagement_history || 0.4;\r\n    const engagementScore = engagementHistory * engagementWeight;\r\n    totalScore += engagementScore;\r\n    \r\n    signals.push({\r\n      name: 'engagement_history',\r\n      value: engagementHistory,\r\n      weight: engagementWeight,\r\n      description: this.algorithm.signal_descriptions.engagement_history || 'Your past interactions with this author'\r\n    });\r\n    \r\n    // 3. Mutual connections (20%)\r\n    const mutualConnections = await this.getMutualConnections(userId, post.user_id);\r\n    const mutualWeight = this.algorithm.weight_config.mutual_connections || 0.2;\r\n    const mutualScore = mutualConnections * mutualWeight;\r\n    totalScore += mutualScore;\r\n    \r\n    signals.push({\r\n      name: 'mutual_connections',\r\n      value: mutualConnections,\r\n      weight: mutualWeight,\r\n      description: this.algorithm.signal_descriptions.mutual_connections || 'Number of mutual friends'\r\n    });\r\n    \r\n    // 4. Time decay (bonus za nove postove)\r\n    const timeDecay = this.calculateTimeDecay(post.created_at);\r\n    const timeWeight = 0.1; // Bonus weight\r\n    const timeScore = timeDecay * timeWeight;\r\n    totalScore += timeScore;\r\n    \r\n    signals.push({\r\n      name: 'time_recency',\r\n      value: timeDecay,\r\n      weight: timeWeight,\r\n      description: 'Recency bonus for new posts'\r\n    });\r\n    \r\n    return {\r\n      score: totalScore,\r\n      signals,\r\n      explanation: this.generateExplanation(followLevel, engagementHistory, mutualConnections, timeDecay)\r\n    };\r\n  }\r\n  \r\n  private generateExplanation(followLevel: number, engagement: number, mutual: number, recency: number): string {\r\n    const parts = [];\r\n    \r\n    if (followLevel > 0.5) {\r\n      parts.push('You follow this author.');\r\n    }\r\n    \r\n    if (engagement > 0.3) {\r\n      parts.push('You frequently engage with their content.');\r\n    }\r\n    \r\n    if (mutual > 0.4) {\r\n      parts.push('You have many mutual connections.');\r\n    }\r\n    \r\n    if (recency > 0.8) {\r\n      parts.push('This post is very recent.');\r\n    }\r\n    \r\n    if (parts.length === 0) {\r\n      return 'This post is from someone in your extended network.';\r\n    }\r\n    \r\n    return parts.join(' ') + ' That\\'s why it appears higher in your feed.';\r\n  }\r\n  \r\n  getDescription(): string {\r\n    return 'Prioritizes content from people you know and interact with most.';\r\n  }\r\n}"],"names":[],"mappings":"AAAA,kDAAkD;;;;;AAClD;;AAGO,MAAM,wBAAwB,4JAAa;IAChD,MAAM,eAAe,IAAS,EAAE,MAAe,EAAE,OAAa,EAI3D;QACD,MAAM,UAAwB,EAAE;QAChC,IAAI,aAAa;QAEjB,IAAI,CAAC,QAAQ;YACX,OAAO;gBAAE,OAAO;gBAAG;gBAAS,aAAa;YAA+C;QAC1F;QAEA,wBAAwB;QACxB,MAAM,cAAc,MAAM,IAAI,CAAC,kBAAkB,CAAC,QAAQ,KAAK,OAAO;QACtE,MAAM,eAAe,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,YAAY,IAAI;QAClE,MAAM,cAAc,cAAc;QAClC,cAAc;QAEd,QAAQ,IAAI,CAAC;YACX,MAAM;YACN,OAAO;YACP,QAAQ;YACR,aAAa,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,YAAY,IAAI;QAClE;QAEA,8BAA8B;QAC9B,MAAM,oBAAoB,MAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ,KAAK,OAAO;QAC9E,MAAM,mBAAmB,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,kBAAkB,IAAI;QAC5E,MAAM,kBAAkB,oBAAoB;QAC5C,cAAc;QAEd,QAAQ,IAAI,CAAC;YACX,MAAM;YACN,OAAO;YACP,QAAQ;YACR,aAAa,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,kBAAkB,IAAI;QACxE;QAEA,8BAA8B;QAC9B,MAAM,oBAAoB,MAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ,KAAK,OAAO;QAC9E,MAAM,eAAe,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,kBAAkB,IAAI;QACxE,MAAM,cAAc,oBAAoB;QACxC,cAAc;QAEd,QAAQ,IAAI,CAAC;YACX,MAAM;YACN,OAAO;YACP,QAAQ;YACR,aAAa,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,kBAAkB,IAAI;QACxE;QAEA,wCAAwC;QACxC,MAAM,YAAY,IAAI,CAAC,kBAAkB,CAAC,KAAK,UAAU;QACzD,MAAM,aAAa,KAAK,eAAe;QACvC,MAAM,YAAY,YAAY;QAC9B,cAAc;QAEd,QAAQ,IAAI,CAAC;YACX,MAAM;YACN,OAAO;YACP,QAAQ;YACR,aAAa;QACf;QAEA,OAAO;YACL,OAAO;YACP;YACA,aAAa,IAAI,CAAC,mBAAmB,CAAC,aAAa,mBAAmB,mBAAmB;QAC3F;IACF;IAEQ,oBAAoB,WAAmB,EAAE,UAAkB,EAAE,MAAc,EAAE,OAAe,EAAU;QAC5G,MAAM,QAAQ,EAAE;QAEhB,IAAI,cAAc,KAAK;YACrB,MAAM,IAAI,CAAC;QACb;QAEA,IAAI,aAAa,KAAK;YACpB,MAAM,IAAI,CAAC;QACb;QAEA,IAAI,SAAS,KAAK;YAChB,MAAM,IAAI,CAAC;QACb;QAEA,IAAI,UAAU,KAAK;YACjB,MAAM,IAAI,CAAC;QACb;QAEA,IAAI,MAAM,MAAM,KAAK,GAAG;YACtB,OAAO;QACT;QAEA,OAAO,MAAM,IAAI,CAAC,OAAO;IAC3B;IAEA,iBAAyB;QACvB,OAAO;IACT;AACF"}},
    {"offset": {"line": 3474, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/lib/feed-engine/algorithms/quality.ts"],"sourcesContent":["// lib/feed-engine/algorithms/quality.ts\r\nimport { BaseAlgorithm } from './base';\r\nimport { PostSignal } from '../types';\r\n\r\ninterface PostData {\r\n  id: string;\r\n  content: string;\r\n  created_at: string;\r\n  user_id: string;\r\n  comments_count: number;\r\n}\r\n\r\ninterface ProfileData {\r\n  created_at: string;\r\n  verified: boolean;\r\n}\r\n\r\ninterface QualityAssessment {\r\n  quality: number;\r\n  clickbaitScore: number;\r\n  readingTime: number;\r\n  sourceCredibility: number;\r\n}\r\n\r\nexport class QualityAlgorithm extends BaseAlgorithm {\r\n  async calculateScore(\r\n    post: PostData, \r\n    userId?: string, \r\n    context?: Record<string, unknown>\r\n  ): Promise<{ \r\n    score: number; \r\n    signals: PostSignal[]; \r\n    explanation?: string \r\n  }> {\r\n    const signals: PostSignal[] = [];\r\n    let totalScore = 0;\r\n    \r\n    // Assess all quality metrics\r\n    const assessment = await this.assessPostQuality(post);\r\n    \r\n    // 1. Content quality assessment (40%)\r\n    const qualityWeight = this.algorithm.weight_config.content_quality || 0.4;\r\n    const qualityScore = assessment.quality * qualityWeight;\r\n    totalScore += qualityScore;\r\n    \r\n    signals.push({\r\n      name: 'content_quality',\r\n      value: assessment.quality,\r\n      weight: qualityWeight,\r\n      description: this.algorithm.signal_descriptions.content_quality || 'AI assessment of content depth and value'\r\n    });\r\n    \r\n    // 2. Clickbait detection (30%)\r\n    const clickbaitWeight = this.algorithm.weight_config.clickbait_score || 0.3;\r\n    const clickbaitAdjusted = (1 - assessment.clickbaitScore) * clickbaitWeight; // Lower clickbait = higher score\r\n    totalScore += clickbaitAdjusted;\r\n    \r\n    signals.push({\r\n      name: 'clickbait_score',\r\n      value: assessment.clickbaitScore,\r\n      weight: clickbaitWeight,\r\n      description: this.algorithm.signal_descriptions.clickbait_score || 'Likelihood of being sensationalist'\r\n    });\r\n    \r\n    // 3. Reading time (20%)\r\n    const readingWeight = this.algorithm.weight_config.reading_time || 0.2;\r\n    const readingScore = Math.min(assessment.readingTime / 5, 1.0) * readingWeight; // Max 5 minutes = 1.0\r\n    totalScore += readingScore;\r\n    \r\n    signals.push({\r\n      name: 'reading_time',\r\n      value: assessment.readingTime,\r\n      weight: readingWeight,\r\n      description: this.algorithm.signal_descriptions.reading_time || 'Estimated time to read fully'\r\n    });\r\n    \r\n    // 4. Source credibility (10%)\r\n    const sourceWeight = this.algorithm.weight_config.source_credibility || 0.1;\r\n    const sourceScore = assessment.sourceCredibility * sourceWeight;\r\n    totalScore += sourceScore;\r\n    \r\n    signals.push({\r\n      name: 'source_credibility',\r\n      value: assessment.sourceCredibility,\r\n      weight: sourceWeight,\r\n      description: this.algorithm.signal_descriptions.source_credibility || 'Author/source reputation'\r\n    });\r\n    \r\n    return {\r\n      score: totalScore,\r\n      signals,\r\n      explanation: this.generateExplanation(assessment)\r\n    };\r\n  }\r\n  \r\n  private async assessPostQuality(post: PostData): Promise<QualityAssessment> {\r\n    const [quality, clickbaitScore, readingTime, sourceCredibility] = await Promise.all([\r\n      this.calculateContentQuality(post),\r\n      this.calculateClickbaitScore(post.content),\r\n      this.calculateReadingTime(post.content),\r\n      this.calculateSourceCredibility(post.user_id)\r\n    ]);\r\n    \r\n    return {\r\n      quality,\r\n      clickbaitScore,\r\n      readingTime,\r\n      sourceCredibility\r\n    };\r\n  }\r\n  \r\n  private async calculateContentQuality(post: PostData): Promise<number> {\r\n    const content = post.content.toLowerCase();\r\n    let score = 0.5;\r\n    \r\n    // Positive indicators\r\n    if (content.length > 200) score += 0.2;\r\n    if (content.includes('?') && content.includes('because')) score += 0.1; // Shows reasoning\r\n    \r\n    // Count complex words (more than 7 characters)\r\n    const complexWords = content\r\n      .split(/\\s+/)\r\n      .filter(word => word.length > 7)\r\n      .length;\r\n    \r\n    if (complexWords > 3) score += 0.1;\r\n    \r\n    // Discussion indicator\r\n    if (post.comments_count > 5) score += 0.1;\r\n    \r\n    // Negative indicators\r\n    const clickbaitScore = this.calculateClickbaitScore(content);\r\n    if (clickbaitScore > 0.7) score -= 0.3;\r\n    \r\n    // Excessive punctuation\r\n    const hasMultipleExclamation = content.includes('!!!');\r\n    const hasMultipleQuestion = content.includes('??');\r\n    if (hasMultipleExclamation || hasMultipleQuestion) score -= 0.1;\r\n    \r\n    // Ensure score is within bounds\r\n    return Math.max(0, Math.min(1, score));\r\n  }\r\n  \r\n  private calculateClickbaitScore(content: string): number {\r\n    const clickbaitPatterns = [\r\n      /you won[']?t believe/i,\r\n      /this (will|is going to) blow your mind/i,\r\n      /number \\d+ will shock you/i,\r\n      /(before|after) (and|vs)/i,\r\n      /the reason why/i,\r\n      /(everyone|people) are (going crazy|losing it)/i,\r\n      /(secret|hidden|they don[']?t want you to know)/i\r\n    ];\r\n    \r\n    let score = 0;\r\n    \r\n    // Check each pattern\r\n    clickbaitPatterns.forEach(pattern => {\r\n      if (pattern.test(content)) {\r\n        score += 0.2;\r\n      }\r\n    });\r\n    \r\n    // Excessive punctuation penalty\r\n    const exclamationCount = (content.match(/!/g) || []).length;\r\n    const questionCount = (content.match(/\\?/g) || []).length;\r\n    \r\n    if (exclamationCount > 2) {\r\n      score += 0.1 * (exclamationCount - 2);\r\n    }\r\n    \r\n    if (questionCount > 3) {\r\n      score += 0.05 * (questionCount - 3);\r\n    }\r\n    \r\n    // Cap at 1.0\r\n    return Math.min(score, 1.0);\r\n  }\r\n  \r\n  private calculateReadingTime(content: string): number {\r\n    const words = content.split(/\\s+/).length;\r\n    const wordsPerMinute = 200;\r\n    return words / wordsPerMinute;\r\n  }\r\n  \r\n  private async calculateSourceCredibility(userId: string): Promise<number> {\r\n    try {\r\n      const { data: profile, error } = await this.supabase\r\n        .from('profiles')\r\n        .select('created_at, verified')\r\n        .eq('id', userId)\r\n        .single();\r\n      \r\n      if (error || !profile) {\r\n        console.error('Error fetching profile:', error);\r\n        return 0.5; // Default score\r\n      }\r\n      \r\n      let score = 0.5;\r\n      \r\n      // Verified account bonus\r\n      if (profile.verified) {\r\n        score += 0.3;\r\n      }\r\n      \r\n      // Account age bonus (max 0.2)\r\n      if (profile.created_at) {\r\n        const accountAgeMs = Date.now() - new Date(profile.created_at).getTime();\r\n        const accountAgeYears = accountAgeMs / (1000 * 60 * 60 * 24 * 365);\r\n        score += Math.min(accountAgeYears * 0.1, 0.2);\r\n      }\r\n      \r\n      // Ensure score is within bounds\r\n      return Math.max(0, Math.min(1, score));\r\n      \r\n    } catch (error) {\r\n      console.error('Error calculating source credibility:', error);\r\n      return 0.5; // Default score on error\r\n    }\r\n  }\r\n  \r\n  private generateExplanation(assessment: QualityAssessment): string {\r\n    const parts: string[] = [];\r\n    \r\n    if (assessment.quality > 0.7) {\r\n      parts.push('High-quality, substantive content.');\r\n    } else if (assessment.quality < 0.4) {\r\n      parts.push('Content could be more substantive.');\r\n    }\r\n    \r\n    if (assessment.clickbaitScore < 0.3) {\r\n      parts.push('Low on sensationalism.');\r\n    } else if (assessment.clickbaitScore > 0.7) {\r\n      parts.push('May contain clickbait elements.');\r\n    }\r\n    \r\n    if (assessment.readingTime > 2) {\r\n      parts.push('In-depth reading.');\r\n    }\r\n    \r\n    if (assessment.sourceCredibility > 0.7) {\r\n      parts.push('From a credible source.');\r\n    }\r\n    \r\n    if (parts.length > 0) {\r\n      return `${parts.join(' ')} Selected by our quality filter.`;\r\n    }\r\n    \r\n    return 'Standard quality content.';\r\n  }\r\n  \r\n  getDescription(): string {\r\n    return 'Filters out clickbait and promotes substantive, credible content.';\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3658, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/lib/feed-engine/generator.ts"],"sourcesContent":["// lib/feed-engine/generator.ts\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { FeedEngine } from './engine';\r\nimport { ChronologicalAlgorithm } from './algorithms/chronological';\r\nimport { SocialAlgorithm } from './algorithms/social';\r\nimport { QualityAlgorithm } from './algorithms/quality';\r\nimport { BaseAlgorithm, type PostData } from './algorithms/base';\r\nimport type { FeedRequest, PostExplanation, FeedAlgorithm, PostSignal } from './types';\r\n\r\ninterface ScoredPost {\r\n  post: PostData;\r\n  score: number;\r\n  signals: PostSignal[];\r\n}\r\n\r\ninterface PostWithProfile {\r\n  id: string;\r\n  content: string;\r\n  created_at: string;\r\n  user_id: string;\r\n  profiles: {\r\n    username: string;\r\n    display_name: string;\r\n    avatar_url: string | null;\r\n    created_at: string;\r\n    verified: boolean;\r\n  };\r\n  likes_count: { count: number }[];\r\n  comments_count: { count: number }[];\r\n}\r\n\r\ninterface SupabasePost {\r\n  id: string;\r\n  content: string;\r\n  created_at: string;\r\n  user_id: string;\r\n  profiles?: {\r\n    username: string;\r\n    display_name: string;\r\n    avatar_url: string | null;\r\n    created_at: string;\r\n    verified: boolean;\r\n  } | null;\r\n}\r\n\r\nexport class FeedGenerator {\r\n  private feedEngine = new FeedEngine();\r\n  private supabase = createClient();\r\n  \r\n  async generateFeed(request: FeedRequest): Promise<{\r\n    posts: PostData[];\r\n    algorithm: FeedAlgorithm;\r\n    explanations?: Record<string, PostExplanation>;\r\n  }> {\r\n    console.log('[FeedGenerator] Generating feed for user:', request.userId);\r\n    \r\n    try {\r\n      // Get algorithm\r\n      const algorithm = await this.feedEngine.getUserAlgorithm(request.userId);\r\n      console.log('[FeedGenerator] Using algorithm:', algorithm?.name);\r\n      \r\n      if (!algorithm) {\r\n        console.error('[FeedGenerator] No algorithm found');\r\n        return this.generateFallbackFeed(request);\r\n      }\r\n      \r\n      // Get base posts\r\n      const posts = await this.getBasePosts(request);\r\n      console.log('[FeedGenerator] Fetched posts:', posts.length);\r\n      \r\n      if (posts.length === 0) {\r\n        console.log('[FeedGenerator] No posts found, using fallback');\r\n        return this.generateFallbackFeed(request, algorithm);\r\n      }\r\n      \r\n      // Convert to PostData format\r\n      const postData = posts.map(post => this.convertToPostData(post));\r\n      \r\n      // Score and sort posts\r\n      const scoredPosts = await this.scorePosts(postData, algorithm, request);\r\n      \r\n      // Sort by score\r\n      scoredPosts.sort((a, b) => b.score - a.score);\r\n      \r\n      // Apply limit and offset\r\n      const start = request.offset || 0;\r\n      const end = start + (request.limit || 20);\r\n      const paginatedPosts = scoredPosts.slice(start, end);\r\n      \r\n      // Generate explanations if requested\r\n      let explanations: Record<string, PostExplanation> | undefined;\r\n      if (request.includeExplanations) {\r\n        explanations = await this.generateExplanations(paginatedPosts, algorithm, request.userId);\r\n      }\r\n      \r\n      console.log('[FeedGenerator] Feed generation complete');\r\n      \r\n      return {\r\n        posts: paginatedPosts.map(p => p.post),\r\n        algorithm,\r\n        explanations\r\n      };\r\n    } catch (error) {\r\n      console.error('[FeedGenerator] Error in generateFeed:', error);\r\n      return this.generateFallbackFeed(request);\r\n    }\r\n  }\r\n  \r\n  private async getBasePosts(request: FeedRequest): Promise<PostWithProfile[]> {\r\n    try {\r\n      console.log('[FeedGenerator] getBasePosts: Starting...');\r\n      \r\n      // Prvo probajte osnovni query bez join-a\r\n      const { data: postsData, error: postsError } = await this.supabase\r\n        .from('posts')\r\n        .select('*')\r\n        .order('created_at', { ascending: false })\r\n        .limit(100);\r\n      \r\n      console.log('[FeedGenerator] Basic posts query result:', {\r\n        count: postsData?.length || 0,\r\n        error: postsError ? postsError.message : 'none'\r\n      });\r\n      \r\n      if (postsError) {\r\n        console.error('[FeedGenerator] Error fetching basic posts:', postsError);\r\n        // Ako ne može da dobije ni osnovne postove, verovatno RLS problem\r\n        return this.createSamplePosts();\r\n      }\r\n      \r\n      if (!postsData || postsData.length === 0) {\r\n        console.log('[FeedGenerator] No posts in database');\r\n        return this.createSamplePosts();\r\n      }\r\n      \r\n      // Dobijte sve user profile odjednom\r\n      const userIds = [...new Set(postsData.map(post => post.user_id))];\r\n      console.log('[FeedGenerator] Fetching profiles for user IDs:', userIds);\r\n      \r\n      const { data: profilesData, error: profilesError } = await this.supabase\r\n        .from('profiles')\r\n        .select('*')\r\n        .in('id', userIds);\r\n      \r\n      if (profilesError) {\r\n        console.error('[FeedGenerator] Error fetching profiles:', profilesError);\r\n      }\r\n      \r\n      // Napravite mapu profila za brzo pretraživanje\r\n      const profilesMap = new Map(\r\n        (profilesData || []).map(profile => [profile.id, profile])\r\n      );\r\n      \r\n      console.log('[FeedGenerator] Profiles map size:', profilesMap.size);\r\n      \r\n      // Kombinujte postove sa profilima i dobijte broj lajkova i komentara\r\n      const postsWithProfiles: PostWithProfile[] = [];\r\n      \r\n      for (const post of postsData) {\r\n        const profile = profilesMap.get(post.user_id);\r\n        \r\n        // Dobijte broj lajkova i komentara za svaki post\r\n        const { likes, comments } = await this.getPostEngagementCounts(post.id);\r\n        \r\n        postsWithProfiles.push({\r\n          id: post.id,\r\n          content: post.content,\r\n          created_at: post.created_at,\r\n          user_id: post.user_id,\r\n          profiles: profile ? {\r\n            username: profile.username || 'unknown',\r\n            display_name: profile.display_name || 'User',\r\n            avatar_url: profile.avatar_url,\r\n            created_at: profile.created_at,\r\n            verified: profile.verified || false\r\n          } : {\r\n            username: 'unknown',\r\n            display_name: 'User',\r\n            avatar_url: null,\r\n            created_at: new Date().toISOString(),\r\n            verified: false\r\n          },\r\n          likes_count: [{ count: likes }],\r\n          comments_count: [{ count: comments }]\r\n        });\r\n      }\r\n      \r\n      console.log(`[FeedGenerator] Successfully processed ${postsWithProfiles.length} posts`);\r\n      return postsWithProfiles;\r\n      \r\n    } catch (error) {\r\n      console.error('[FeedGenerator] Unexpected error in getBasePosts:', error);\r\n      return this.createSamplePosts();\r\n    }\r\n  }\r\n  \r\n  private async getPostEngagementCounts(postId: string): Promise<{ likes: number; comments: number }> {\r\n    try {\r\n      // Paralelno dobijanje lajkova i komentara\r\n      const [likesResult, commentsResult] = await Promise.all([\r\n        this.supabase\r\n          .from('likes')\r\n          .select('id', { count: 'exact', head: true })\r\n          .eq('post_id', postId),\r\n        this.supabase\r\n          .from('comments')\r\n          .select('id', { count: 'exact', head: true })\r\n          .eq('post_id', postId)\r\n      ]);\r\n      \r\n      return {\r\n        likes: likesResult.count || 0,\r\n        comments: commentsResult.count || 0\r\n      };\r\n    } catch (error) {\r\n      console.error(`[FeedGenerator] Error getting engagement counts for post ${postId}:`, error);\r\n      return { likes: 0, comments: 0 };\r\n    }\r\n  }\r\n  \r\n  private createSamplePosts(): PostWithProfile[] {\r\n    console.log('[FeedGenerator] Creating sample posts from real database data');\r\n    \r\n    // Koristite stvarne podatke iz vaše baze\r\n    return [\r\n      {\r\n        id: 'bad3f1c5-1983-4ecd-a667-cb6771ca2307',\r\n        content: 'Prva poruka',\r\n        created_at: '2025-12-10T11:09:21.950Z',\r\n        user_id: '55b0ac2c-4092-4dc6-9df5-14120f54d9a0',\r\n        profiles: {\r\n          username: 'alen.vochanec_55b0ac2c',\r\n          display_name: 'Alen Vochanec',\r\n          avatar_url: 'https://feczfskwcxmujpsrijnp.supabase.co/storage/v1/object/public/avatars/avatars/55b0ac2c-4092-4dc6-9df5-14120f54d9a0-1765365856673.png',\r\n          created_at: '2025-12-10T11:09:01.125Z',\r\n          verified: false\r\n        },\r\n        likes_count: [{ count: 0 }],\r\n        comments_count: [{ count: 0 }]\r\n      },\r\n      {\r\n        id: 'aa2c39b0-5218-4b3a-b337-b4ddcce09e5d',\r\n        content: 'Druga poruka #AI',\r\n        created_at: '2025-12-11T08:06:45.647Z',\r\n        user_id: '55b0ac2c-4092-4dc6-9df5-14120f54d9a0',\r\n        profiles: {\r\n          username: 'alen.vochanec_55b0ac2c',\r\n          display_name: 'Alen Vochanec',\r\n          avatar_url: 'https://feczfskwcxmujpsrijnp.supabase.co/storage/v1/object/public/avatars/avatars/55b0ac2c-4092-4dc6-9df5-14120f54d9a0-1765365856673.png',\r\n          created_at: '2025-12-10T11:09:01.125Z',\r\n          verified: false\r\n        },\r\n        likes_count: [{ count: 0 }],\r\n        comments_count: [{ count: 0 }]\r\n      }\r\n    ];\r\n  }\r\n  \r\n  private async generateFallbackFeed(\r\n    request: FeedRequest, \r\n    algorithm?: FeedAlgorithm\r\n  ): Promise<{\r\n    posts: PostData[];\r\n    algorithm: FeedAlgorithm;\r\n    explanations?: Record<string, PostExplanation>;\r\n  }> {\r\n    console.log('[FeedGenerator] Generating fallback feed');\r\n    \r\n    const defaultAlgorithm: FeedAlgorithm = {\r\n      id: 'default-chronological',\r\n      name: 'Chronological Feed',\r\n      slug: 'chronological',\r\n      description: 'Shows posts in the order they were created, newest first.',\r\n      is_official: true,\r\n      is_public: true,\r\n      version: '1.0.0',\r\n      algorithm_config: { type: 'chronological' },\r\n      signal_descriptions: { time_recency: 'How recently the post was created' },\r\n      weight_config: { time_recency: 1.0 },\r\n      install_count: 0,\r\n      rating: 0,\r\n      created_at: new Date().toISOString(),\r\n      updated_at: new Date().toISOString()\r\n    };\r\n    \r\n    const usedAlgorithm = algorithm || defaultAlgorithm;\r\n    \r\n    // Koristite sample postove kao fallback\r\n    const samplePosts = this.createSamplePosts();\r\n    const postData = samplePosts.map(post => this.convertToPostData(post));\r\n    \r\n    const scoredPosts = await this.scorePosts(postData, usedAlgorithm, request);\r\n    scoredPosts.sort((a, b) => b.score - a.score);\r\n    \r\n    const start = request.offset || 0;\r\n    const end = start + (request.limit || 20);\r\n    const paginatedPosts = scoredPosts.slice(start, end);\r\n    \r\n    let explanations: Record<string, PostExplanation> | undefined;\r\n    if (request.includeExplanations) {\r\n      explanations = await this.generateExplanations(paginatedPosts, usedAlgorithm, request.userId);\r\n    }\r\n    \r\n    return {\r\n      posts: paginatedPosts.map(p => p.post),\r\n      algorithm: usedAlgorithm,\r\n      explanations\r\n    };\r\n  }\r\n  \r\n  private convertToPostData(postWithProfile: PostWithProfile): PostData {\r\n    return {\r\n      id: postWithProfile.id,\r\n      content: postWithProfile.content,\r\n      created_at: postWithProfile.created_at,\r\n      user_id: postWithProfile.user_id,\r\n      username: postWithProfile.profiles.username,\r\n      display_name: postWithProfile.profiles.display_name,\r\n      avatar_url: postWithProfile.profiles.avatar_url,\r\n      comments_count: postWithProfile.comments_count[0]?.count || 0,\r\n      likes_count: postWithProfile.likes_count[0]?.count || 0,\r\n      user_has_liked: false\r\n    };\r\n  }\r\n  \r\n  private async scorePosts(\r\n    posts: PostData[], \r\n    algorithm: FeedAlgorithm, \r\n    request: FeedRequest\r\n  ): Promise<ScoredPost[]> {\r\n    console.log(`[FeedGenerator] Scoring ${posts.length} posts with algorithm: ${algorithm.name}`);\r\n    \r\n    const algorithmInstance = this.createAlgorithmInstance(algorithm);\r\n    \r\n    const scoredPosts = await Promise.all(\r\n      posts.map(async (post): Promise<ScoredPost> => {\r\n        try {\r\n          const result = await algorithmInstance.calculateScore(\r\n            post, \r\n            request.userId, \r\n            request.context\r\n          );\r\n          \r\n          // Log signal for explainability\r\n          if (request.userId) {\r\n            await this.logSignals(\r\n              request.userId,\r\n              post.id,\r\n              algorithm.id,\r\n              result.signals,\r\n              result.score\r\n            ).catch(err => {\r\n              console.error('[FeedGenerator] Error logging signals:', err);\r\n            });\r\n          }\r\n          \r\n          return {\r\n            post,\r\n            score: result.score,\r\n            signals: result.signals\r\n          };\r\n        } catch (error) {\r\n          console.error(`[FeedGenerator] Error scoring post ${post.id}:`, error);\r\n          return {\r\n            post,\r\n            score: 0,\r\n            signals: []\r\n          };\r\n        }\r\n      })\r\n    );\r\n    \r\n    return scoredPosts;\r\n  }\r\n  \r\n  private async generateExplanations(\r\n    scoredPosts: ScoredPost[],\r\n    algorithm: FeedAlgorithm,\r\n    userId?: string\r\n  ): Promise<Record<string, PostExplanation>> {\r\n    const explanations: Record<string, PostExplanation> = {};\r\n    \r\n    for (const item of scoredPosts) {\r\n      const topSignals = item.signals\r\n        .sort((a, b) => (b.value * b.weight) - (a.value * a.weight))\r\n        .slice(0, 3);\r\n      \r\n      explanations[item.post.id] = {\r\n        post_id: item.post.id,\r\n        total_score: item.score,\r\n        signals: topSignals,\r\n        algorithm_id: algorithm.id,\r\n        algorithm_name: algorithm.name,\r\n        summary: this.generateSummary(topSignals, algorithm.name)\r\n      };\r\n    }\r\n    \r\n    return explanations;\r\n  }\r\n  \r\n  private createAlgorithmInstance(algorithm: FeedAlgorithm): BaseAlgorithm {\r\n    console.log(`[FeedGenerator] Creating algorithm instance for: ${algorithm.slug}`);\r\n    \r\n    switch (algorithm.slug) {\r\n      case 'chronological':\r\n        return new ChronologicalAlgorithm(algorithm);\r\n      case 'friends-first':\r\n        return new SocialAlgorithm(algorithm);\r\n      case 'quality-filter':\r\n        return new QualityAlgorithm(algorithm);\r\n      default:\r\n        console.log(`[FeedGenerator] Unknown algorithm slug: ${algorithm.slug}, using chronological as fallback`);\r\n        return new ChronologicalAlgorithm(algorithm);\r\n    }\r\n  }\r\n  \r\n  private async logSignals(\r\n    userId: string,\r\n    postId: string,\r\n    algorithmId: string,\r\n    signals: PostSignal[],\r\n    totalScore: number\r\n  ): Promise<void> {\r\n    try {\r\n      const signalData = signals.reduce((acc, signal) => ({\r\n        ...acc,\r\n        [signal.name]: {\r\n          value: signal.value,\r\n          weight: signal.weight,\r\n          contribution: signal.value * signal.weight\r\n        }\r\n      }), {} as Record<string, { value: number; weight: number; contribution: number }>);\r\n\r\n      const { error } = await this.supabase\r\n        .from('feed_signal_logs')\r\n        .insert({\r\n          user_id: userId,\r\n          post_id: postId,\r\n          algorithm_id: algorithmId,\r\n          signals: signalData,\r\n          total_score: totalScore,\r\n          explanation: {\r\n            summary: 'Generated by algorithm',\r\n            timestamp: new Date().toISOString()\r\n          }\r\n        });\r\n\r\n      if (error) {\r\n        console.error('[FeedGenerator] Error logging signals:', error);\r\n      }\r\n    } catch (error) {\r\n      console.error('[FeedGenerator] Error in logSignals:', error);\r\n    }\r\n  }\r\n  \r\n  private generateSummary(signals: PostSignal[], algorithmName: string): string {\r\n    if (signals.length === 0) {\r\n      return 'No significant signals detected.';\r\n    }\r\n    \r\n    const contributions = signals.map(signal => ({\r\n      name: signal.name.replace(/_/g, ' '),\r\n      percent: Math.round((signal.value * signal.weight) * 100)\r\n    }));\r\n    \r\n    const mainContribution = contributions[0];\r\n    let summary = `Mainly shown because of ${mainContribution.name} (${mainContribution.percent}%).`;\r\n    \r\n    if (contributions.length > 1) {\r\n      const otherText = contributions.slice(1)\r\n        .map(c => `${c.name} (${c.percent}%)`)\r\n        .join(', ');\r\n      summary += ` Also influenced by: ${otherText}.`;\r\n    }\r\n    \r\n    return summary;\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4037, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 4139, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/feed/ExplanationPanel.tsx"],"sourcesContent":["// components/feed/ExplanationPanel.tsx\r\n\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { \r\n  Info, \r\n  X, \r\n  TrendingUp, \r\n  Clock, \r\n  Users, \r\n  Brain,\r\n  Shield,\r\n  Heart\r\n} from 'lucide-react';\r\nimport { Progress } from '@/components/ui/progress';\r\n\r\ninterface ExplanationPanelProps {\r\n  postId: string;\r\n  explanation?: {\r\n    algorithm_name: string;\r\n    total_score: number;\r\n    signals: Array<{\r\n      name: string;\r\n      value: number;\r\n      weight: number;\r\n      description: string;\r\n    }>;\r\n    summary: string;\r\n  };\r\n  onClose?: () => void;\r\n}\r\n\r\nconst signalIcons: Record<string, any> = {\r\n  time_recency: Clock,\r\n  follow_level: Users,\r\n  engagement_history: Users,\r\n  mutual_connections: Users,\r\n  content_quality: Brain,\r\n  clickbait_score: Shield,\r\n  reading_time: Clock,\r\n  source_credibility: Shield,\r\n  sentiment_score: Heart,\r\n  constructiveness: Heart,\r\n  stress_level: Heart,\r\n  geographic_distance: 'Pin',\r\n  local_relevance: 'Pin',\r\n};\r\n\r\nexport function ExplanationPanel({ postId, explanation, onClose }: ExplanationPanelProps) {\r\n  const [expanded, setExpanded] = useState(false);\r\n\r\n  if (!explanation) return null;\r\n\r\n  const totalScorePercent = Math.min(Math.round(explanation.total_score * 100), 100);\r\n\r\n  return (\r\n    <Card className=\"border-l-4 border-l-primary\">\r\n      <CardContent className=\"p-4\">\r\n        <div className=\"flex items-start justify-between mb-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Info className=\"h-4 w-4 text-primary\" />\r\n            <h4 className=\"font-medium\">Why you're seeing this post</h4>\r\n          </div>\r\n          {onClose && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"h-6 w-6\"\r\n              onClick={onClose}\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </Button>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"mb-4\">\r\n          <div className=\"flex items-center justify-between text-sm mb-1\">\r\n            <span className=\"text-muted-foreground\">Algorithm:</span>\r\n            <span className=\"font-medium\">{explanation.algorithm_name}</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between text-sm mb-1\">\r\n            <span className=\"text-muted-foreground\">Overall relevance:</span>\r\n            <span className=\"font-medium\">{totalScorePercent}%</span>\r\n          </div>\r\n          <Progress value={totalScorePercent} className=\"h-2\" />\r\n        </div>\r\n        \r\n        <p className=\"text-sm text-muted-foreground mb-4\">\r\n          {explanation.summary}\r\n        </p>\r\n        \r\n        {expanded ? (\r\n          <div className=\"space-y-3\">\r\n            <h5 className=\"text-sm font-medium\">Detailed breakdown:</h5>\r\n            {explanation.signals.map((signal, index) => {\r\n              const Icon = signalIcons[signal.name] || TrendingUp;\r\n              const contribution = Math.round(signal.value * signal.weight * 100);\r\n              \r\n              return (\r\n                <div key={index} className=\"space-y-1\">\r\n                  <div className=\"flex items-center justify-between text-sm\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {typeof Icon === 'string' ? (\r\n                        <span className=\"h-4 w-4 flex items-center justify-center text-xs\">\r\n                          {Icon}\r\n                        </span>\r\n                      ) : (\r\n                        <Icon className=\"h-4 w-4\" />\r\n                      )}\r\n                      <span className=\"capitalize\">\r\n                        {signal.name.replace(/_/g, ' ')}\r\n                      </span>\r\n                    </div>\r\n                    <span className=\"font-medium\">{contribution}%</span>\r\n                  </div>\r\n                  <div className=\"pl-6\">\r\n                    <p className=\"text-xs text-muted-foreground mb-1\">\r\n                      {signal.description}\r\n                    </p>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"flex-1 h-1.5 bg-muted rounded-full overflow-hidden\">\r\n                        <div \r\n                          className=\"h-full bg-primary rounded-full\"\r\n                          style={{ width: `${signal.value * 100}%` }}\r\n                        />\r\n                      </div>\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        Value: {(signal.value * 100).toFixed(0)}%\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 mt-1\">\r\n                      <div className=\"flex-1 h-1.5 bg-muted rounded-full overflow-hidden\">\r\n                        <div \r\n                          className=\"h-full bg-secondary rounded-full\"\r\n                          style={{ width: `${signal.weight * 100}%` }}\r\n                        />\r\n                      </div>\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        Weight: {(signal.weight * 100).toFixed(0)}%\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        ) : (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"w-full gap-2 text-sm\"\r\n            onClick={() => setExpanded(true)}\r\n          >\r\n            <Info className=\"h-3 w-3\" />\r\n            Show detailed explanation\r\n          </Button>\r\n        )}\r\n        \r\n        {expanded && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"w-full mt-2 gap-2 text-sm\"\r\n            onClick={() => setExpanded(false)}\r\n          >\r\n            <X className=\"h-3 w-3\" />\r\n            Show less\r\n          </Button>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4545, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/skeleton.tsx"],"sourcesContent":["// components/ui/skeleton.tsx\nexport function Skeleton({ className = \"\", ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={`animate-pulse rounded-md bg-muted ${className}`}\n      {...props}\n    />\n  );\n}"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;AACtB,SAAS,SAAS,EAAE,YAAY,EAAE,EAAE,GAAG,OAA6C;IACzF,qBACE,8OAAC;QACC,WAAW,CAAC,kCAAkC,EAAE,WAAW;QAC1D,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 4566, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/feed/AlgorithmFeed.tsx"],"sourcesContent":["// components/feed/AlgorithmFeed.tsx (Updated version)\r\n\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { FeedGenerator } from '@/lib/feed-engine/generator';\r\nimport { PostCard } from '@/components/post/post-card';\r\nimport { ExplanationPanel } from './ExplanationPanel';\r\nimport { Button } from '@/components/ui/button';\r\nimport { RefreshCw, Sparkles, Info, Settings } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { \r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuSeparator,\r\n} from '@/components/ui/dropdown-menu';\r\n\r\ninterface AlgorithmFeedProps {\r\n  userId?: string;\r\n  initialAlgorithm?: string;\r\n  showExplanations?: boolean;\r\n}\r\n\r\nconst feedGenerator = new FeedGenerator();\r\n\r\nexport function AlgorithmFeed({ \r\n  userId, \r\n  initialAlgorithm,\r\n  showExplanations = false \r\n}: AlgorithmFeedProps) {\r\n  const router = useRouter();\r\n  const [posts, setPosts] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [algorithm, setAlgorithm] = useState<any>(null);\r\n  const [explanations, setExplanations] = useState<Record<string, any>>({});\r\n  const [showAllExplanations, setShowAllExplanations] = useState(showExplanations);\r\n  const [activeExplanation, setActiveExplanation] = useState<string | null>(null);\r\n\r\n  const loadFeed = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await feedGenerator.generateFeed({\r\n        userId,\r\n        algorithmSlug: initialAlgorithm,\r\n        limit: 20,\r\n        includeExplanations: showAllExplanations\r\n      });\r\n      \r\n      setPosts(result.posts);\r\n      setAlgorithm(result.algorithm);\r\n      if (result.explanations) {\r\n        setExplanations(result.explanations);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading feed:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [userId, initialAlgorithm, showAllExplanations]);\r\n\r\n  useEffect(() => {\r\n    loadFeed();\r\n  }, [loadFeed]);\r\n\r\n  const handleRefresh = async () => {\r\n    setRefreshing(true);\r\n    await loadFeed();\r\n    setRefreshing(false);\r\n  };\r\n\r\n  const toggleExplanation = (postId: string) => {\r\n    setActiveExplanation(activeExplanation === postId ? null : postId);\r\n  };\r\n\r\n  const toggleAllExplanations = () => {\r\n    setShowAllExplanations(!showAllExplanations);\r\n    if (!showAllExplanations) {\r\n      // Reload with explanations\r\n      loadFeed();\r\n    }\r\n  };\r\n\r\n  if (loading && !refreshing) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        {[...Array(5)].map((_, i) => (\r\n          <div key={i} className=\"space-y-4\">\r\n            <Skeleton className=\"h-48 w-full\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Feed Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h2 className=\"text-xl font-bold\">\r\n            {algorithm?.name || 'Your Feed'}\r\n          </h2>\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            {algorithm?.description || 'Loading...'}\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3\">\r\n          <DropdownMenu>\r\n            <DropdownMenuTrigger asChild>\r\n              <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n                <Settings className=\"h-4 w-4\" />\r\n                Algorithm\r\n              </Button>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent align=\"end\">\r\n              <DropdownMenuItem onClick={toggleAllExplanations}>\r\n                <Info className=\"h-4 w-4 mr-2\" />\r\n                {showAllExplanations ? 'Hide explanations' : 'Show explanations'}\r\n              </DropdownMenuItem>\r\n              <DropdownMenuSeparator />\r\n              <DropdownMenuItem onClick={() => router.push('/algorithms')}>\r\n                <Sparkles className=\"h-4 w-4 mr-2\" />\r\n                Browse algorithms\r\n              </DropdownMenuItem>\r\n              <DropdownMenuItem onClick={() => router.push('/algorithms?tab=installed')}>\r\n                <Settings className=\"h-4 w-4 mr-2\" />\r\n                Manage installed\r\n              </DropdownMenuItem>\r\n            </DropdownMenuContent>\r\n          </DropdownMenu>\r\n          \r\n          <Button \r\n            variant=\"ghost\" \r\n            size=\"icon\"\r\n            onClick={handleRefresh}\r\n            disabled={refreshing}\r\n          >\r\n            <RefreshCw className={`h-4 w-4 ${refreshing ? 'animate-spin' : ''}`} />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Posts */}\r\n      {posts.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <Sparkles className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground/50\" />\r\n          <h3 className=\"text-lg font-semibold mb-2\">No posts yet</h3>\r\n          <p className=\"text-muted-foreground mb-4\">\r\n            {algorithm?.name === 'Friends First' \r\n              ? 'Follow some people to see their posts here!'\r\n              : 'Be the first to post or try a different algorithm.'}\r\n          </p>\r\n          <div className=\"flex gap-3 justify-center\">\r\n            <Link href=\"/explore\">\r\n              <Button variant=\"outline\">Explore</Button>\r\n            </Link>\r\n            <Link href=\"/algorithms\">\r\n              <Button>Try another algorithm</Button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {posts.map((post) => (\r\n            <div key={post.id} className=\"space-y-4\">\r\n              {/* Post Card */}\r\n              <div className=\"relative\">\r\n                <PostCard post={post} />\r\n                \r\n                {/* Explanation toggle button */}\r\n                {showAllExplanations && (\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"absolute top-2 right-2 h-7 w-7 p-0\"\r\n                    onClick={() => toggleExplanation(post.id)}\r\n                  >\r\n                    <Info className=\"h-3 w-3\" />\r\n                  </Button>\r\n                )}\r\n              </div>\r\n              \r\n              {/* Explanation Panel */}\r\n              {showAllExplanations && activeExplanation === post.id && (\r\n                <div className=\"ml-8\">\r\n                  <ExplanationPanel\r\n                    postId={post.id}\r\n                    explanation={explanations[post.id]}\r\n                    onClose={() => setActiveExplanation(null)}\r\n                  />\r\n                </div>\r\n              )}\r\n              \r\n              {/* Mini explanation summary */}\r\n              {showAllExplanations && explanations[post.id] && !activeExplanation && (\r\n                <div className=\"ml-8\">\r\n                  <button\r\n                    onClick={() => toggleExplanation(post.id)}\r\n                    className=\"text-xs text-muted-foreground hover:text-foreground transition-colors flex items-center gap-1\"\r\n                  >\r\n                    <Info className=\"h-3 w-3\" />\r\n                    <span>{explanations[post.id]?.summary?.split('.')[0]}...</span>\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Feed Footer */}\r\n      {posts.length > 0 && (\r\n        <div className=\"pt-6 border-t\">\r\n          <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Sparkles className=\"h-4 w-4\" />\r\n              <span>\r\n                Powered by {algorithm?.name}\r\n                {algorithm?.is_official && ' (Official)'}\r\n              </span>\r\n            </div>\r\n            <Button \r\n              variant=\"link\" \r\n              className=\"p-0 h-auto\"\r\n              onClick={() => router.push('/algorithms')}\r\n            >\r\n              Change algorithm\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5069, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/feed/IntegratedFeed.tsx"],"sourcesContent":["// components/feed/IntegratedFeed.tsx\r\n\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { Feed, AlgorithmFeed, ExplanationPanel } from '@/components/feed';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Brain, Users, Clock } from 'lucide-react';\r\n\r\ninterface IntegratedFeedProps {\r\n  userId: string;\r\n  followingUserIds?: string[];\r\n  showFollowButton?: boolean;\r\n  onFollowChange?: (userId: string, isFollowing: boolean) => void;\r\n  // Možeš dodati i ove props ako Feed komponenta ih podržava\r\n  sortBy?: 'latest' | 'popular' | 'mixed';\r\n}\r\n\r\nexport function IntegratedFeed({\r\n  userId,\r\n  followingUserIds = [],\r\n  showFollowButton = true,\r\n  onFollowChange,\r\n  sortBy = 'mixed',\r\n}: IntegratedFeedProps) {\r\n\r\n  const [feedType, setFeedType] = useState<'algorithm' | 'following' | 'chronological'>('algorithm');\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <Tabs value={feedType} onValueChange={(v) => setFeedType(v as typeof feedType)}>\r\n          <TabsList>\r\n            <TabsTrigger value=\"algorithm\" className=\"gap-2\">\r\n              <Brain className=\"h-4 w-4\" />\r\n              Algorithm\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"following\" className=\"gap-2\">\r\n              <Users className=\"h-4 w-4\" />\r\n              Following\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"chronological\" className=\"gap-2\">\r\n              <Clock className=\"h-4 w-4\" />\r\n              Latest\r\n            </TabsTrigger>\r\n          </TabsList>\r\n        </Tabs>\r\n      </div>\r\n\r\n      <TabsContent value=\"algorithm\" className=\"mt-0\">\r\n        <AlgorithmFeed\r\n          userId={userId}\r\n        />\r\n      </TabsContent>\r\n      <TabsContent value=\"following\" className=\"mt-0\">\r\n        <Feed\r\n          userId={userId}\r\n          followingUserIds={followingUserIds}\r\n          isAuthenticated={true}\r\n          showFollowButton={showFollowButton}\r\n          onFollowChange={onFollowChange}\r\n        />\r\n      </TabsContent>\r\n\r\n      <TabsContent value=\"chronological\" className=\"mt-0\">\r\n        <Feed\r\n          userId={userId}\r\n          followingUserIds={[]} // Prazno za sve postove\r\n          isAuthenticated={true}\r\n          showFollowButton={showFollowButton}\r\n          onFollowChange={onFollowChange}\r\n        />\r\n      </TabsContent>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,qCAAqC;;;;;;AAGrC;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AALA;;;;;;AAgBO,SAAS,eAAe,EAC7B,MAAM,EACN,mBAAmB,EAAE,EACrB,mBAAmB,IAAI,EACvB,cAAc,EACd,SAAS,OAAO,EACI;IAEpB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAA8C;IAEtF,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,iIAAI;oBAAC,OAAO;oBAAU,eAAe,CAAC,IAAM,YAAY;8BACvD,cAAA,8OAAC,qIAAQ;;0CACP,8OAAC,wIAAW;gCAAC,OAAM;gCAAY,WAAU;;kDACvC,8OAAC,6MAAK;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAG/B,8OAAC,wIAAW;gCAAC,OAAM;gCAAY,WAAU;;kDACvC,8OAAC,6MAAK;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAG/B,8OAAC,wIAAW;gCAAC,OAAM;gCAAgB,WAAU;;kDAC3C,8OAAC,6MAAK;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;;;;;;0BAOrC,8OAAC,wIAAW;gBAAC,OAAM;gBAAY,WAAU;0BACvC,cAAA,8OAAC,qJAAa;oBACZ,QAAQ;;;;;;;;;;;0BAGZ,8OAAC,wIAAW;gBAAC,OAAM;gBAAY,WAAU;0BACvC,cAAA,8OAAC,mIAAI;oBACH,QAAQ;oBACR,kBAAkB;oBAClB,iBAAiB;oBACjB,kBAAkB;oBAClB,gBAAgB;;;;;;;;;;;0BAIpB,8OAAC,wIAAW;gBAAC,OAAM;gBAAgB,WAAU;0BAC3C,cAAA,8OAAC,mIAAI;oBACH,QAAQ;oBACR,kBAAkB,EAAE;oBACpB,iBAAiB;oBACjB,kBAAkB;oBAClB,gBAAgB;;;;;;;;;;;;;;;;;AAK1B"}},
    {"offset": {"line": 5235, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/feed/AlgorithmSelector.tsx"],"sourcesContent":["// components/feed/AlgorithmSelector.tsx\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { FeedEngine } from '@/lib/feed-engine/engine';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { \r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { \r\n  Clock, \r\n  Users, \r\n  Brain, \r\n  Heart, \r\n  MapPin, \r\n  Hash, \r\n  Star, \r\n  Download,\r\n  CheckCircle,\r\n  TrendingUp,\r\n  Shield,\r\n  Zap\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nconst feedEngine = new FeedEngine();\r\n\r\ninterface AlgorithmSelectorProps {\r\n  userId?: string;\r\n  onAlgorithmChange?: (algorithm: any) => void;\r\n}\r\n\r\nconst categoryIcons = {\r\n  chronological: Clock,\r\n  social: Users,\r\n  topical: Hash,\r\n  'ai-optimized': Brain,\r\n  wellbeing: Heart,\r\n  local: MapPin,\r\n};\r\n\r\nexport function AlgorithmSelector({ userId, onAlgorithmChange }: AlgorithmSelectorProps) {\r\n  const [algorithms, setAlgorithms] = useState<any[]>([]);\r\n  const [categories, setCategories] = useState<any[]>([]);\r\n  const [userAlgorithms, setUserAlgorithms] = useState<any[]>([]);\r\n  const [activeAlgorithm, setActiveAlgorithm] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeCategory, setActiveCategory] = useState<string>('all');\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [userId]);\r\n\r\nconst loadData = async () => {\r\n  setLoading(true);\r\n  try {\r\n    const [availableAlgos, userAlgos, activeAlgo] = await Promise.all([\r\n      feedEngine.getAvailableAlgorithms({ officialOnly: true }),\r\n      userId ? getUserAlgorithms() : Promise.resolve([]),\r\n      userId ? feedEngine.getUserAlgorithm(userId) : feedEngine.getUserAlgorithm(),\r\n    ]);\r\n\r\n      setAlgorithms(availableAlgos || []);\r\n      setUserAlgorithms(userAlgos || []);\r\n      setActiveAlgorithm(activeAlgo);\r\n\r\n      // Extract unique categories\r\n      const cats = new Set();\r\n      availableAlgos?.forEach((algo: any) => {\r\n        algo.categories?.forEach((cat: any) => {\r\n          cats.add(JSON.stringify(cat.category));\r\n        });\r\n      });\r\n      setCategories(Array.from(cats).map(c => JSON.parse(c as string)));\r\n    } catch (error) {\r\n      console.error('Error loading algorithms:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getUserAlgorithms = async () => {\r\n    const supabase = createClient();\r\n    const { data } = await supabase\r\n      .from('user_feed_algorithms')\r\n      .select(`\r\n        *,\r\n        algorithms:feed_algorithms(*)\r\n      `)\r\n      .eq('user_id', userId);\r\n    return data;\r\n  };\r\n\r\n  const handleInstall = async (algorithmId: string) => {\r\n    if (!userId) {\r\n      toast.error('Please sign in to install algorithms');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await feedEngine.installAlgorithm(userId, algorithmId);\r\n      toast.success('Algorithm installed successfully');\r\n      loadData();\r\n    } catch (error) {\r\n      toast.error('Failed to install algorithm');\r\n    }\r\n  };\r\n\r\n  const handleSetActive = async (algorithmId: string) => {\r\n    if (!userId) {\r\n      toast.error('Please sign in to change algorithms');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await feedEngine.setActiveAlgorithm(userId, algorithmId);\r\n      const algorithm = algorithms.find(a => a.id === algorithmId);\r\n      setActiveAlgorithm(algorithm);\r\n      \r\n      // Call the callback if provided\r\n      if (algorithm && onAlgorithmChange) {\r\n        onAlgorithmChange(algorithm);\r\n      }\r\n      \r\n      toast.success('Feed algorithm updated');\r\n    } catch (error) {\r\n      toast.error('Failed to update algorithm');\r\n    }\r\n  };\r\n\r\n  const filteredAlgorithms = activeCategory === 'all' \r\n    ? algorithms\r\n    : algorithms.filter(algo => \r\n        algo.categories?.some((cat: any) => cat.category.slug === activeCategory)\r\n      );\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Feed Algorithms</CardTitle>\r\n          <CardDescription>Loading...</CardDescription>\r\n        </CardHeader>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card className=\"border-2\">\r\n      <CardHeader>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <CardTitle className=\"text-xl\">Feed Algorithm</CardTitle>\r\n            <CardDescription>\r\n              Control what you see in your feed\r\n            </CardDescription>\r\n          </div>\r\n          {activeAlgorithm && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <Badge variant=\"outline\" className=\"text-sm\">\r\n                Active: {activeAlgorithm.name}\r\n              </Badge>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n      \r\n      <CardContent>\r\n        <Tabs defaultValue=\"browse\" className=\"w-full\">\r\n          <TabsList className=\"grid w-full grid-cols-3\">\r\n            <TabsTrigger value=\"browse\">Browse</TabsTrigger>\r\n            <TabsTrigger value=\"installed\">Installed ({userAlgorithms.length})</TabsTrigger>\r\n            <TabsTrigger value=\"active\">Active</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"browse\">\r\n            {/* Category Filter */}\r\n            <div className=\"mb-6\">\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                <Button\r\n                  variant={activeCategory === 'all' ? 'default' : 'outline'}\r\n                  size=\"sm\"\r\n                  onClick={() => setActiveCategory('all')}\r\n                >\r\n                  All Categories\r\n                </Button>\r\n                {categories.map((category) => {\r\n                  const Icon = categoryIcons[category.slug as keyof typeof categoryIcons] || Hash;\r\n                  return (\r\n                    <Button\r\n                      key={category.id}\r\n                      variant={activeCategory === category.slug ? 'default' : 'outline'}\r\n                      size=\"sm\"\r\n                      onClick={() => setActiveCategory(category.slug)}\r\n                      className=\"gap-2\"\r\n                    >\r\n                      <Icon className=\"h-4 w-4\" />\r\n                      {category.name}\r\n                    </Button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Algorithm Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {filteredAlgorithms.map((algorithm) => {\r\n                const isInstalled = userAlgorithms.some(ua => ua.algorithm_id === algorithm.id);\r\n                const isActive = activeAlgorithm?.id === algorithm.id;\r\n                const Icon = categoryIcons[algorithm.categories?.[0]?.category?.slug as keyof typeof categoryIcons] || Hash;\r\n\r\n                return (\r\n                  <Card key={algorithm.id} className={isActive ? 'border-primary border-2' : ''}>\r\n                    <CardHeader className=\"pb-3\">\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                            <Icon className=\"h-5 w-5 text-primary\" />\r\n                          </div>\r\n                          <div>\r\n                            <CardTitle className=\"text-lg\">{algorithm.name}</CardTitle>\r\n                            <CardDescription className=\"flex items-center gap-2\">\r\n                              <span>By {algorithm.is_official ? 'Nexus' : 'Community'}</span>\r\n                              {algorithm.is_official && (\r\n                                <Badge variant=\"secondary\" className=\"text-xs\">Official</Badge>\r\n                              )}\r\n                            </CardDescription>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <Star className=\"h-4 w-4 text-yellow-500 fill-yellow-500\" />\r\n                          <span className=\"text-sm\">{algorithm.rating?.toFixed(1) || 'N/A'}</span>\r\n                        </div>\r\n                      </div>\r\n                    </CardHeader>\r\n                    \r\n                    <CardContent className=\"pb-3\">\r\n                      <p className=\"text-sm text-muted-foreground mb-4\">\r\n                        {algorithm.description}\r\n                      </p>\r\n                      \r\n                      {/* Signals used */}\r\n                      <div className=\"mb-4\">\r\n                        <p className=\"text-xs font-medium mb-2\">Uses these signals:</p>\r\n                        <div className=\"flex flex-wrap gap-1\">\r\n                          {Object.keys(algorithm.signal_descriptions || {}).slice(0, 3).map(signal => (\r\n                            <Badge key={signal} variant=\"outline\" className=\"text-xs capitalize\">\r\n                              {signal.replace(/_/g, ' ')}\r\n                            </Badge>\r\n                          ))}\r\n                          {Object.keys(algorithm.signal_descriptions || {}).length > 3 && (\r\n                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                              +{Object.keys(algorithm.signal_descriptions || {}).length - 3} more\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {/* Stats */}\r\n                      <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\r\n                        <span>👥 {algorithm.install_count?.toLocaleString() || 0} installs</span>\r\n                        <span>v{algorithm.version}</span>\r\n                      </div>\r\n                    </CardContent>\r\n                    \r\n                    <div className=\"px-6 pb-4\">\r\n                      <div className=\"flex gap-2\">\r\n                        {isActive ? (\r\n                          <Button size=\"sm\" className=\"w-full\" disabled>\r\n                            <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                            Active\r\n                          </Button>\r\n                        ) : isInstalled ? (\r\n                          <Button \r\n                            size=\"sm\" \r\n                            className=\"w-full\" \r\n                            onClick={() => handleSetActive(algorithm.id)}\r\n                          >\r\n                            <Zap className=\"h-4 w-4 mr-2\" />\r\n                            Activate\r\n                          </Button>\r\n                        ) : (\r\n                          <Button \r\n                            size=\"sm\" \r\n                            className=\"w-full\" \r\n                            onClick={() => handleInstall(algorithm.id)}\r\n                            disabled={!userId}\r\n                          >\r\n                            <Download className=\"h-4 w-4 mr-2\" />\r\n                            Install\r\n                          </Button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </Card>\r\n                );\r\n              })}\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"installed\">\r\n            {userAlgorithms.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <Brain className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground/50\" />\r\n                <p className=\"text-muted-foreground\">No algorithms installed yet</p>\r\n                <p className=\"text-sm text-muted-foreground mt-1\">\r\n                  Browse algorithms above to customize your feed\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {userAlgorithms.map((userAlgo) => (\r\n                  <Card key={userAlgo.id}>\r\n                    <CardContent className=\"p-4\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          {userAlgo.is_active && (\r\n                            <div className=\"h-2 w-2 rounded-full bg-green-500 animate-pulse\" />\r\n                          )}\r\n                          <div>\r\n                            <h4 className=\"font-medium\">{userAlgo.algorithms.name}</h4>\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                              {userAlgo.algorithms.description}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                          {userAlgo.is_active ? (\r\n                            <Badge>Active</Badge>\r\n                          ) : (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              onClick={() => handleSetActive(userAlgo.algorithm_id)}\r\n                            >\r\n                              Activate\r\n                            </Button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"active\">\r\n            {activeAlgorithm && (\r\n              <Card>\r\n                <CardHeader>\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                      <Brain className=\"h-6 w-6 text-primary\" />\r\n                    </div>\r\n                    <div>\r\n                      <CardTitle>{activeAlgorithm.name}</CardTitle>\r\n                      <CardDescription>\r\n                        Currently controlling your feed\r\n                      </CardDescription>\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <div>\r\n                    <h4 className=\"font-medium mb-2\">How it works:</h4>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      {activeAlgorithm.description}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <h4 className=\"font-medium mb-2\">Signals used:</h4>\r\n                    <div className=\"space-y-2\">\r\n                      {Object.entries(activeAlgorithm.signal_descriptions || {}).map(([signal, description]) => (\r\n                        <div key={signal} className=\"flex items-start gap-2 text-sm\">\r\n                          <div className=\"w-2 h-2 rounded-full bg-primary mt-1.5 flex-shrink-0\" />\r\n                          <div>\r\n                            <span className=\"font-medium capitalize\">\r\n                              {signal.replace(/_/g, ' ')}:\r\n                            </span>\r\n                            <span className=\"text-muted-foreground ml-1\">\r\n                              {description as string}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <h4 className=\"font-medium mb-2\">Weights:</h4>\r\n                    <div className=\"space-y-1\">\r\n                      {Object.entries(activeAlgorithm.weight_config || {}).map(([signal, weight]) => (\r\n                        <div key={signal} className=\"flex items-center gap-2\">\r\n                          <span className=\"text-sm capitalize w-32\">\r\n                            {signal.replace(/_/g, ' ')}\r\n                          </span>\r\n                          <div className=\"flex-1 h-2 bg-muted rounded-full overflow-hidden\">\r\n                            <div \r\n                              className=\"h-full bg-primary rounded-full\"\r\n                              style={{ width: `${(weight as number) * 100}%` }}\r\n                            />\r\n                          </div>\r\n                          <span className=\"text-xs w-10 text-right\">\r\n                            {((weight as number) * 100).toFixed(0)}%\r\n                          </span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </TabsContent>\r\n        </Tabs>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;AAGxC;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AA9BA;;;;;;;;;;;AAgCA,MAAM,aAAa,IAAI,6IAAU;AAOjC,MAAM,gBAAgB;IACpB,eAAe,6MAAK;IACpB,QAAQ,6MAAK;IACb,SAAS,0MAAI;IACb,gBAAgB,6MAAK;IACrB,WAAW,6MAAK;IAChB,OAAO,oNAAM;AACf;AAEO,SAAS,kBAAkB,EAAE,MAAM,EAAE,iBAAiB,EAA0B;IACrF,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IACtD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAC9D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAM;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS;IAE7D,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAO;IAEb,MAAM,WAAW;QACf,WAAW;QACX,IAAI;YACF,MAAM,CAAC,gBAAgB,WAAW,WAAW,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAChE,WAAW,sBAAsB,CAAC;oBAAE,cAAc;gBAAK;gBACvD,SAAS,sBAAsB,QAAQ,OAAO,CAAC,EAAE;gBACjD,SAAS,WAAW,gBAAgB,CAAC,UAAU,WAAW,gBAAgB;aAC3E;YAEC,cAAc,kBAAkB,EAAE;YAClC,kBAAkB,aAAa,EAAE;YACjC,mBAAmB;YAEnB,4BAA4B;YAC5B,MAAM,OAAO,IAAI;YACjB,gBAAgB,QAAQ,CAAC;gBACvB,KAAK,UAAU,EAAE,QAAQ,CAAC;oBACxB,KAAK,GAAG,CAAC,KAAK,SAAS,CAAC,IAAI,QAAQ;gBACtC;YACF;YACA,cAAc,MAAM,IAAI,CAAC,MAAM,GAAG,CAAC,CAAA,IAAK,KAAK,KAAK,CAAC;QACrD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;QAC7C,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,oBAAoB;QACxB,MAAM,WAAW,IAAA,yIAAY;QAC7B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,wBACL,MAAM,CAAC,CAAC;;;MAGT,CAAC,EACA,EAAE,CAAC,WAAW;QACjB,OAAO;IACT;IAEA,MAAM,gBAAgB,OAAO;QAC3B,IAAI,CAAC,QAAQ;YACX,iJAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,IAAI;YACF,MAAM,WAAW,gBAAgB,CAAC,QAAQ;YAC1C,iJAAK,CAAC,OAAO,CAAC;YACd;QACF,EAAE,OAAO,OAAO;YACd,iJAAK,CAAC,KAAK,CAAC;QACd;IACF;IAEA,MAAM,kBAAkB,OAAO;QAC7B,IAAI,CAAC,QAAQ;YACX,iJAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,IAAI;YACF,MAAM,WAAW,kBAAkB,CAAC,QAAQ;YAC5C,MAAM,YAAY,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YAChD,mBAAmB;YAEnB,gCAAgC;YAChC,IAAI,aAAa,mBAAmB;gBAClC,kBAAkB;YACpB;YAEA,iJAAK,CAAC,OAAO,CAAC;QAChB,EAAE,OAAO,OAAO;YACd,iJAAK,CAAC,KAAK,CAAC;QACd;IACF;IAEA,MAAM,qBAAqB,mBAAmB,QAC1C,aACA,WAAW,MAAM,CAAC,CAAA,OAChB,KAAK,UAAU,EAAE,KAAK,CAAC,MAAa,IAAI,QAAQ,CAAC,IAAI,KAAK;IAGhE,IAAI,SAAS;QACX,qBACE,8OAAC,iIAAI;sBACH,cAAA,8OAAC,uIAAU;;kCACT,8OAAC,sIAAS;kCAAC;;;;;;kCACX,8OAAC,4IAAe;kCAAC;;;;;;;;;;;;;;;;;IAIzB;IAEA,qBACE,8OAAC,iIAAI;QAAC,WAAU;;0BACd,8OAAC,uIAAU;0BACT,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC,sIAAS;oCAAC,WAAU;8CAAU;;;;;;8CAC/B,8OAAC,4IAAe;8CAAC;;;;;;;;;;;;wBAIlB,iCACC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,mIAAK;gCAAC,SAAQ;gCAAU,WAAU;;oCAAU;oCAClC,gBAAgB,IAAI;;;;;;;;;;;;;;;;;;;;;;;0BAOvC,8OAAC,wIAAW;0BACV,cAAA,8OAAC,iIAAI;oBAAC,cAAa;oBAAS,WAAU;;sCACpC,8OAAC,qIAAQ;4BAAC,WAAU;;8CAClB,8OAAC,wIAAW;oCAAC,OAAM;8CAAS;;;;;;8CAC5B,8OAAC,wIAAW;oCAAC,OAAM;;wCAAY;wCAAY,eAAe,MAAM;wCAAC;;;;;;;8CACjE,8OAAC,wIAAW;oCAAC,OAAM;8CAAS;;;;;;;;;;;;sCAG9B,8OAAC,wIAAW;4BAAC,OAAM;;8CAEjB,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,qIAAM;gDACL,SAAS,mBAAmB,QAAQ,YAAY;gDAChD,MAAK;gDACL,SAAS,IAAM,kBAAkB;0DAClC;;;;;;4CAGA,WAAW,GAAG,CAAC,CAAC;gDACf,MAAM,OAAO,aAAa,CAAC,SAAS,IAAI,CAA+B,IAAI,0MAAI;gDAC/E,qBACE,8OAAC,qIAAM;oDAEL,SAAS,mBAAmB,SAAS,IAAI,GAAG,YAAY;oDACxD,MAAK;oDACL,SAAS,IAAM,kBAAkB,SAAS,IAAI;oDAC9C,WAAU;;sEAEV,8OAAC;4DAAK,WAAU;;;;;;wDACf,SAAS,IAAI;;mDAPT,SAAS,EAAE;;;;;4CAUtB;;;;;;;;;;;;8CAKJ,8OAAC;oCAAI,WAAU;8CACZ,mBAAmB,GAAG,CAAC,CAAC;wCACvB,MAAM,cAAc,eAAe,IAAI,CAAC,CAAA,KAAM,GAAG,YAAY,KAAK,UAAU,EAAE;wCAC9E,MAAM,WAAW,iBAAiB,OAAO,UAAU,EAAE;wCACrD,MAAM,OAAO,aAAa,CAAC,UAAU,UAAU,EAAE,CAAC,EAAE,EAAE,UAAU,KAAmC,IAAI,0MAAI;wCAE3G,qBACE,8OAAC,iIAAI;4CAAoB,WAAW,WAAW,4BAA4B;;8DACzE,8OAAC,uIAAU;oDAAC,WAAU;8DACpB,cAAA,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC;4EAAK,WAAU;;;;;;;;;;;kFAElB,8OAAC;;0FACC,8OAAC,sIAAS;gFAAC,WAAU;0FAAW,UAAU,IAAI;;;;;;0FAC9C,8OAAC,4IAAe;gFAAC,WAAU;;kGACzB,8OAAC;;4FAAK;4FAAI,UAAU,WAAW,GAAG,UAAU;;;;;;;oFAC3C,UAAU,WAAW,kBACpB,8OAAC,mIAAK;wFAAC,SAAQ;wFAAY,WAAU;kGAAU;;;;;;;;;;;;;;;;;;;;;;;;0EAKvD,8OAAC;gEAAI,WAAU;;kFACb,8OAAC,0MAAI;wEAAC,WAAU;;;;;;kFAChB,8OAAC;wEAAK,WAAU;kFAAW,UAAU,MAAM,EAAE,QAAQ,MAAM;;;;;;;;;;;;;;;;;;;;;;;8DAKjE,8OAAC,wIAAW;oDAAC,WAAU;;sEACrB,8OAAC;4DAAE,WAAU;sEACV,UAAU,WAAW;;;;;;sEAIxB,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEAAE,WAAU;8EAA2B;;;;;;8EACxC,8OAAC;oEAAI,WAAU;;wEACZ,OAAO,IAAI,CAAC,UAAU,mBAAmB,IAAI,CAAC,GAAG,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA,uBAChE,8OAAC,mIAAK;gFAAc,SAAQ;gFAAU,WAAU;0FAC7C,OAAO,OAAO,CAAC,MAAM;+EADZ;;;;;wEAIb,OAAO,IAAI,CAAC,UAAU,mBAAmB,IAAI,CAAC,GAAG,MAAM,GAAG,mBACzD,8OAAC,mIAAK;4EAAC,SAAQ;4EAAU,WAAU;;gFAAU;gFACzC,OAAO,IAAI,CAAC,UAAU,mBAAmB,IAAI,CAAC,GAAG,MAAM,GAAG;gFAAE;;;;;;;;;;;;;;;;;;;sEAOtE,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;;wEAAK;wEAAI,UAAU,aAAa,EAAE,oBAAoB;wEAAE;;;;;;;8EACzD,8OAAC;;wEAAK;wEAAE,UAAU,OAAO;;;;;;;;;;;;;;;;;;;8DAI7B,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC;wDAAI,WAAU;kEACZ,yBACC,8OAAC,qIAAM;4DAAC,MAAK;4DAAK,WAAU;4DAAS,QAAQ;;8EAC3C,8OAAC,0OAAW;oEAAC,WAAU;;;;;;gEAAiB;;;;;;mEAGxC,4BACF,8OAAC,qIAAM;4DACL,MAAK;4DACL,WAAU;4DACV,SAAS,IAAM,gBAAgB,UAAU,EAAE;;8EAE3C,8OAAC,uMAAG;oEAAC,WAAU;;;;;;gEAAiB;;;;;;iFAIlC,8OAAC,qIAAM;4DACL,MAAK;4DACL,WAAU;4DACV,SAAS,IAAM,cAAc,UAAU,EAAE;4DACzC,UAAU,CAAC;;8EAEX,8OAAC,sNAAQ;oEAAC,WAAU;;;;;;gEAAiB;;;;;;;;;;;;;;;;;;2CA5EpC,UAAU,EAAE;;;;;oCAoF3B;;;;;;;;;;;;sCAIJ,8OAAC,wIAAW;4BAAC,OAAM;sCAChB,eAAe,MAAM,KAAK,kBACzB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,6MAAK;wCAAC,WAAU;;;;;;kDACjB,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;kDACrC,8OAAC;wCAAE,WAAU;kDAAqC;;;;;;;;;;;qDAKpD,8OAAC;gCAAI,WAAU;0CACZ,eAAe,GAAG,CAAC,CAAC,yBACnB,8OAAC,iIAAI;kDACH,cAAA,8OAAC,wIAAW;4CAAC,WAAU;sDACrB,cAAA,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;4DACZ,SAAS,SAAS,kBACjB,8OAAC;gEAAI,WAAU;;;;;;0EAEjB,8OAAC;;kFACC,8OAAC;wEAAG,WAAU;kFAAe,SAAS,UAAU,CAAC,IAAI;;;;;;kFACrD,8OAAC;wEAAE,WAAU;kFACV,SAAS,UAAU,CAAC,WAAW;;;;;;;;;;;;;;;;;;kEAItC,8OAAC;wDAAI,WAAU;kEACZ,SAAS,SAAS,iBACjB,8OAAC,mIAAK;sEAAC;;;;;iFAEP,8OAAC,qIAAM;4DACL,MAAK;4DACL,SAAS,IAAM,gBAAgB,SAAS,YAAY;sEACrD;;;;;;;;;;;;;;;;;;;;;;uCArBA,SAAS,EAAE;;;;;;;;;;;;;;;sCAkC9B,8OAAC,wIAAW;4BAAC,OAAM;sCAChB,iCACC,8OAAC,iIAAI;;kDACH,8OAAC,uIAAU;kDACT,cAAA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC,6MAAK;wDAAC,WAAU;;;;;;;;;;;8DAEnB,8OAAC;;sEACC,8OAAC,sIAAS;sEAAE,gBAAgB,IAAI;;;;;;sEAChC,8OAAC,4IAAe;sEAAC;;;;;;;;;;;;;;;;;;;;;;;kDAMvB,8OAAC,wIAAW;wCAAC,WAAU;;0DACrB,8OAAC;;kEACC,8OAAC;wDAAG,WAAU;kEAAmB;;;;;;kEACjC,8OAAC;wDAAE,WAAU;kEACV,gBAAgB,WAAW;;;;;;;;;;;;0DAIhC,8OAAC;;kEACC,8OAAC;wDAAG,WAAU;kEAAmB;;;;;;kEACjC,8OAAC;wDAAI,WAAU;kEACZ,OAAO,OAAO,CAAC,gBAAgB,mBAAmB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,QAAQ,YAAY,iBACnF,8OAAC;gEAAiB,WAAU;;kFAC1B,8OAAC;wEAAI,WAAU;;;;;;kFACf,8OAAC;;0FACC,8OAAC;gFAAK,WAAU;;oFACb,OAAO,OAAO,CAAC,MAAM;oFAAK;;;;;;;0FAE7B,8OAAC;gFAAK,WAAU;0FACb;;;;;;;;;;;;;+DAPG;;;;;;;;;;;;;;;;0DAehB,8OAAC;;kEACC,8OAAC;wDAAG,WAAU;kEAAmB;;;;;;kEACjC,8OAAC;wDAAI,WAAU;kEACZ,OAAO,OAAO,CAAC,gBAAgB,aAAa,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,QAAQ,OAAO,iBACxE,8OAAC;gEAAiB,WAAU;;kFAC1B,8OAAC;wEAAK,WAAU;kFACb,OAAO,OAAO,CAAC,MAAM;;;;;;kFAExB,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC;4EACC,WAAU;4EACV,OAAO;gFAAE,OAAO,GAAG,AAAC,SAAoB,IAAI,CAAC,CAAC;4EAAC;;;;;;;;;;;kFAGnD,8OAAC;wEAAK,WAAU;;4EACb,CAAC,AAAC,SAAoB,GAAG,EAAE,OAAO,CAAC;4EAAG;;;;;;;;+DAXjC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBlC"}},
    {"offset": {"line": 6225, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/feed/index.ts"],"sourcesContent":["// components/feed/index.ts\r\nexport { Feed } from './feed';\r\nexport { IntegratedFeed } from './IntegratedFeed';\r\nexport { AlgorithmFeed } from './AlgorithmFeed';\r\nexport { AlgorithmSelector } from './AlgorithmSelector';\r\nexport { ExplanationPanel } from './ExplanationPanel';"],"names":[],"mappings":"AAAA,2BAA2B;;AAC3B;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 6241, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/app/home/page.tsx"],"sourcesContent":["// app/home/page.tsx\n\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { \n  Alert, \n  AlertDescription \n} from \"@/components/ui/alert\";\nimport { \n  AlertCircle, \n  Users, \n  Plus, \n  Pencil, \n  Sparkles, \n  Settings, \n  Info, \n  Brain, \n  Clock, \n  Zap, \n  Heart, \n  Shield,\n  Menu,\n  Home,\n  Hash,\n  Search,\n  ArrowRight,\n  TrendingUp,\n  Flame\n} from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Label } from \"@/components/ui/label\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetTrigger,\n} from \"@/components/ui/sheet\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Tabs,\n  TabsList,\n  TabsTrigger,\n} from \"@/components/ui/tabs\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Input } from \"@/components/ui/input\";\nimport { Progress } from \"@/components/ui/progress\";\nimport Link from \"next/link\";\nimport type { User } from \"@supabase/supabase-js\";\n\n// Import feed engine components\nimport { \n  Feed as BaseFeed, \n  AlgorithmFeed, \n  AlgorithmSelector,\n\n} from \"@/components/feed\";\n\n// Import feed engine\nimport { FeedEngine } from \"@/lib/feed-engine/engine\";\n\ninterface Profile {\n  id: string;\n  display_name: string | null;\n  avatar_url: string | null;\n  bio: string | null;\n  username: string;\n  created_at: string;\n  verified: boolean;\n}\n\ninterface FeedAlgorithm {\n  id: string;\n  name: string;\n  slug: string;\n  description: string;\n  is_official: boolean;\n  is_public: boolean;\n  version: string;\n  algorithm_config: any;\n  signal_descriptions: any;\n  weight_config: any;\n  install_count: number;\n  rating: number;\n  created_at: string;\n  updated_at: string;\n}\n\nconst feedEngine = new FeedEngine();\n\nexport default function HomePage(): React.JSX.Element {\n  const [user, setUser] = useState<User | null>(null);\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [followingUserIds, setFollowingUserIds] = useState<string[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [databaseError, setDatabaseError] = useState<string | null>(null);\n  const [showFollowButtons, setShowFollowButtons] = useState(true);\n  const [feedTab, setFeedTab] = useState<'algorithm' | 'following' | 'chronological'>('algorithm');\n  const [createPostDialogOpen, setCreatePostDialogOpen] = useState(false);\n  const [postContent, setPostContent] = useState(\"\");\n  const [posting, setPosting] = useState(false);\n  const [postError, setPostError] = useState<string | null>(null);\n  const [characterCount, setCharacterCount] = useState(0);\n  \n  // Algorithm states\n  const [activeAlgorithm, setActiveAlgorithm] = useState<FeedAlgorithm | null>(null);\n  const [algorithmLoading, setAlgorithmLoading] = useState(false);\n  const [showAlgorithmSelector, setShowAlgorithmSelector] = useState(false);\n  const [showExplanations, setShowExplanations] = useState(false);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  const supabase = createClient();\n\n  useEffect(() => {\n    void fetchUserData();\n  }, []);\n\n  const fetchUserData = async (): Promise<void> => {\n    try {\n      setIsLoading(true);\n      \n      const { data: { user: currentUser } } = await supabase.auth.getUser();\n      setUser(currentUser);\n\n      if (currentUser) {\n        const { data: userProfile } = await supabase\n          .from(\"profiles\")\n          .select(\"*\")\n          .eq(\"id\", currentUser.id)\n          .maybeSingle();\n        \n        if (userProfile) {\n          setProfile({\n            id: userProfile.id,\n            display_name: userProfile.display_name,\n            avatar_url: userProfile.avatar_url,\n            bio: userProfile.bio,\n            username: userProfile.username || 'user',\n            created_at: userProfile.created_at,\n            verified: userProfile.verified || false\n          });\n        }\n\n        const { data: follows } = await supabase\n          .from(\"follows\")\n          .select(\"following_id\")\n          .eq(\"follower_id\", currentUser.id);\n        \n        const followingIds = follows?.map(follow => follow.following_id) || [];\n        setFollowingUserIds([...followingIds, currentUser.id]);\n\n        // Load active algorithm\n        await loadActiveAlgorithm(currentUser.id);\n\n        const { error: profileError } = await supabase\n          .from(\"profiles\")\n          .select(\"id\")\n          .limit(1);\n        \n        if (profileError?.message?.includes(\"Could not find the table\")) {\n          setDatabaseError(\"database_not_setup\");\n        }\n      }\n    } catch (error) {\n      console.error(\"Error fetching user data:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const loadActiveAlgorithm = async (userId: string): Promise<void> => {\n    setAlgorithmLoading(true);\n    try {\n      const algorithm = await feedEngine.getUserAlgorithm(userId);\n      setActiveAlgorithm(algorithm);\n    } catch (error) {\n      console.error(\"Error loading algorithm:\", error);\n    } finally {\n      setAlgorithmLoading(false);\n    }\n  };\n\n  const handleFollowChange = (userId: string, isFollowing: boolean): void => {\n    if (isFollowing) {\n      setFollowingUserIds(prev => [...prev, userId]);\n    } else {\n      setFollowingUserIds(prev => prev.filter(id => id !== userId));\n    }\n  };\n\n  // Helper funkcije (možete ih staviti u poseban fajl)\nconst detectAIContent = (content: string): boolean => {\n  // Jednostavna AI detekcija heuristikom\n  const aiIndicators = [\n    /as an ai language model/gi,\n    /i am an ai/gi,\n    /i cannot.*because/gi,\n    /based on.*training data/gi,\n    /my knowledge cutoff/gi,\n    /i don[']?t have real-time/gi,\n    /as a language model/gi\n  ];\n  \n  let score = 0;\n  aiIndicators.forEach(pattern => {\n    if (pattern.test(content)) score++;\n  });\n  \n  // Check for overly perfect formatting\n  const sentences = content.split(/[.!?]+/).filter(s => s.trim().length > 0);\n  const avgSentenceLength = content.length / Math.max(sentences.length, 1);\n  \n  if (sentences.length > 5 && avgSentenceLength > 50) {\n    score += 0.5;\n  }\n  \n  // Check for common AI phrases\n  const aiPhrases = [\n    'in summary',\n    'to conclude',\n    'furthermore',\n    'additionally',\n    'it is important to note',\n    'this highlights',\n    'it demonstrates'\n  ];\n  \n  aiPhrases.forEach(phrase => {\n    if (content.toLowerCase().includes(phrase)) {\n      score += 0.2;\n    }\n  });\n  \n  return score >= 1.5;\n};\n\nconst generateContentHash = (content: string): string => {\n  // Jednostavni hash za klijentsku stranu\n  // Za produkciju koristite proper kriptografski hash\n  let hash = 0;\n  for (let i = 0; i < content.length; i++) {\n    const char = content.charCodeAt(i);\n    hash = ((hash << 5) - hash) + char;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n  \n  // Dodaj timestamp za jedinstvenost\n  const timestamp = Date.now().toString(36);\n  return `hash-${Math.abs(hash).toString(36)}-${timestamp}`;\n};\n\nconst handleCreatePost = async (): Promise<void> => {\n  if (!user || !postContent.trim()) return;\n\n  setPosting(true);\n  setPostError(null);\n\n  try {\n    // Prvo detektuj da li je AI generisano (jednostavna heuristika)\n    const isAIGenerated = detectAIContent(postContent.trim());\n    \n    // Kreiraj provenance objekat\n    const provenance = {\n      version: '1.0',\n      authorId: user.id,\n      timestamp: new Date().toISOString(),\n      contentHash: generateContentHash(postContent.trim()),\n      metadata: {\n        isAIGenerated,\n        platform: 'nexus',\n        algorithm: 'SHA-256',\n        client: typeof window !== 'undefined' ? 'web' : 'server'\n      },\n      signature: `nexus-sig-${user.id.substring(0, 8)}-${Date.now().toString(16)}`\n    };\n\n    const { error, data } = await supabase\n      .from(\"posts\")\n      .insert({\n        user_id: user.id,\n        content: postContent.trim(),\n        content_hash: provenance.contentHash,\n        signature: provenance.signature,\n        provenance: provenance\n      })\n      .select()\n      .single();\n\n    if (error) {\n      throw new Error(error.message);\n    }\n\n    // Ažuriraj provenance sa stvarnim postId\n    if (data) {\n      const updatedProvenance = {\n        ...provenance,\n        postId: data.id,\n        signature: `nexus-sig-${user.id.substring(0, 8)}-${data.id.substring(0, 8)}`\n      };\n      \n      // Ažuriraj post sa kompletnim provenance\n      await supabase\n        .from(\"posts\")\n        .update({\n          provenance: updatedProvenance,\n          signature: updatedProvenance.signature\n        })\n        .eq('id', data.id);\n    }\n\n    setPostContent(\"\");\n    setCharacterCount(0);\n    setCreatePostDialogOpen(false);\n    \n    // Umesto reload-a, možda bolje soft refresh feed-a\n    await fetchUserData(); // Refresh user data\n    if (feedTab === 'algorithm') {\n      // Trigger refresh feed-a\n      window.dispatchEvent(new Event('feedRefresh'));\n    }\n    \n  } catch (error) {\n    console.error(\"Error creating post:\", error);\n    setPostError(error instanceof Error ? error.message : \"Failed to create post\");\n  } finally {\n    setPosting(false);\n  }\n};\n\n\n\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>): void => {\n    const content = e.target.value;\n    setPostContent(content);\n    setCharacterCount(content.length);\n  };\n\n  const getInitials = (name: string | null | undefined): string => {\n    if (!name) return \"??\";\n    return name\n      .split(\" \")\n      .map((part) => part[0])\n      .join(\"\")\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  const algorithmIcon = (slug?: string): React.ReactNode => {\n    switch (slug) {\n      case 'chronological':\n        return <Clock className=\"h-4 w-4\" />;\n      case 'friends-first':\n        return <Users className=\"h-4 w-4\" />;\n      case 'quality-filter':\n        return <Shield className=\"h-4 w-4\" />;\n      case 'mindful-feed':\n        return <Heart className=\"h-4 w-4\" />;\n      default:\n        return <Brain className=\"h-4 w-4\" />;\n    }\n  };\n\n  const renderLoadingState = (): React.JSX.Element => (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n        <div className=\"mx-auto flex h-16 max-w-7xl items-center justify-between px-4\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"h-8 w-8 animate-pulse rounded-full bg-muted\" />\n            <div className=\"h-6 w-24 animate-pulse rounded bg-muted\" />\n          </div>\n          <div className=\"flex gap-2\">\n            <div className=\"h-9 w-20 animate-pulse rounded-md bg-muted\" />\n            <div className=\"h-9 w-24 animate-pulse rounded-md bg-muted\" />\n          </div>\n        </div>\n      </header>\n      \n      <div className=\"mx-auto max-w-7xl px-4 py-8\">\n        <div className=\"flex gap-6\">\n          <div className=\"hidden w-64 flex-shrink-0 space-y-6 lg:block\">\n            <div className=\"space-y-4\">\n              <div className=\"h-4 w-32 animate-pulse rounded bg-muted\" />\n              <div className=\"space-y-2\">\n                {[...Array(5)].map((_, i) => (\n                  <div key={i} className=\"h-10 animate-pulse rounded-md bg-muted\" />\n                ))}\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"flex-1 space-y-4\">\n            {[...Array(5)].map((_, i) => (\n              <div key={i} className=\"space-y-3 rounded-lg border p-4\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"h-10 w-10 animate-pulse rounded-full bg-muted\" />\n                  <div className=\"flex-1 space-y-1\">\n                    <div className=\"h-4 w-32 animate-pulse rounded bg-muted\" />\n                    <div className=\"h-3 w-24 animate-pulse rounded bg-muted\" />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <div className=\"h-4 w-full animate-pulse rounded bg-muted\" />\n                  <div className=\"h-4 w-3/4 animate-pulse rounded bg-muted\" />\n                </div>\n              </div>\n            ))}\n          </div>\n          \n          <div className=\"hidden w-80 flex-shrink-0 space-y-6 xl:block\">\n            <div className=\"space-y-4\">\n              <div className=\"h-4 w-32 animate-pulse rounded bg-muted\" />\n              <div className=\"space-y-2\">\n                {[...Array(5)].map((_, i) => (\n                  <div key={i} className=\"space-y-2\">\n                    <div className=\"h-3 w-full animate-pulse rounded bg-muted\" />\n                    <div className=\"h-3 w-16 animate-pulse rounded bg-muted\" />\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderDatabaseErrorState = (): React.JSX.Element => (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b\">\n        <div className=\"mx-auto flex h-16 max-w-7xl items-center justify-between px-4\">\n          <div className=\"flex items-center gap-2\">\n            <Sparkles className=\"h-6 w-6 text-primary\" />\n            <span className=\"text-xl font-bold\">Nexus</span>\n          </div>\n          <div className=\"flex gap-3\">\n            <Link href=\"/login\">\n              <Button variant=\"outline\" size=\"sm\">Sign In</Button>\n            </Link>\n            <Link href=\"/register\">\n              <Button size=\"sm\">Get Started</Button>\n            </Link>\n          </div>\n        </div>\n      </header>\n      \n      <div className=\"mx-auto max-w-4xl px-4 py-16\">\n        <div className=\"rounded-xl border border-destructive/20 bg-destructive/5 p-8 text-center\">\n          <div className=\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10\">\n            <AlertCircle className=\"h-8 w-8 text-destructive\" />\n          </div>\n          <h2 className=\"mb-3 text-2xl font-bold\">Setup Required</h2>\n          <p className=\"mb-6 text-muted-foreground\">\n            Database tables need to be created. Run the SQL scripts in your Supabase project.\n          </p>\n          <div className=\"flex justify-center gap-3\">\n            <Link href=\"https://supabase.com/docs\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <Button variant=\"outline\">View Docs</Button>\n            </Link>\n            <Button onClick={() => window.location.reload()} variant=\"secondary\">\n              <Sparkles className=\"mr-2 h-4 w-4\" />\n              Check Again\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  if (isLoading) {\n    return renderLoadingState();\n  }\n\n  if (databaseError === \"database_not_setup\") {\n    return renderDatabaseErrorState();\n  }\n\n  const isAuthenticated = !!user;\n\n  return (\n    <div className=\"min-h-screen bg-background pb-20 lg:pb-0\">\n      {/* Sticky Header */}\n      <header className=\"sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n        <div className=\"mx-auto flex h-16 max-w-7xl items-center justify-between px-4\">\n          {/* Logo & Mobile Menu */}\n          <div className=\"flex items-center gap-4\">\n            <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n              <SheetTrigger asChild className=\"lg:hidden\">\n                <Button variant=\"ghost\" size=\"icon\" className=\"lg:hidden\">\n                  <Menu className=\"h-5 w-5\" />\n                  <span className=\"sr-only\">Open menu</span>\n                </Button>\n              </SheetTrigger>\n              <SheetContent side=\"left\" className=\"w-64\">\n                <SheetHeader>\n                  <SheetTitle className=\"flex items-center gap-2\">\n                    <Sparkles className=\"h-5 w-5 text-primary\" />\n                    <span>Nexus</span>\n                  </SheetTitle>\n                </SheetHeader>\n                <nav className=\"mt-8 space-y-2\">\n                  <Link href=\"/\">\n                    <Button variant=\"ghost\" className=\"w-full justify-start gap-3\">\n                      <Home className=\"h-5 w-5\" />\n                      Home\n                    </Button>\n                  </Link>\n                  <Link href=\"/explore\">\n                    <Button variant=\"ghost\" className=\"w-full justify-start gap-3\">\n                      <Hash className=\"h-5 w-5\" />\n                      Explore\n                    </Button>\n                  </Link>\n                  <Link href=\"/algorithms\">\n                    <Button variant=\"ghost\" className=\"w-full justify-start gap-3\">\n                      <Brain className=\"h-5 w-5\" />\n                      Algorithms\n                    </Button>\n                  </Link>\n                  <Link href=\"/trending\">\n                    <Button variant=\"ghost\" className=\"w-full justify-start gap-3\">\n                      <Flame className=\"h-5 w-5\" />\n                      Trending\n                    </Button>\n                  </Link>\n                  <div className=\"pt-4\">\n                    <Link href=\"/algorithms/create\" className=\"w-full\">\n                      <Button className=\"w-full\">Create Algorithm</Button>\n                    </Link>\n                  </div>\n                </nav>\n              </SheetContent>\n            </Sheet>\n\n            {/* Logo */}\n            <Link href=\"/\" className=\"flex items-center gap-2\">\n              <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-purple-600\">\n                <Sparkles className=\"h-5 w-5 text-white\" />\n              </div>\n              <span className=\"hidden text-xl font-bold tracking-tight sm:inline\">\n                nexus\n              </span>\n            </Link>\n          </div>\n\n          {/* Desktop Navigation */}\n          <nav className=\"hidden items-center gap-6 lg:flex\">\n            <Link href=\"/\" className=\"flex items-center gap-2 text-sm font-medium hover:text-primary\">\n              <Home className=\"h-4 w-4\" />\n              Home\n            </Link>\n            <Link href=\"/explore\" className=\"flex items-center gap-2 text-sm font-medium text-muted-foreground hover:text-foreground\">\n              <Hash className=\"h-4 w-4\" />\n              Explore\n            </Link>\n            <Link href=\"/algorithms\" className=\"flex items-center gap-2 text-sm font-medium text-muted-foreground hover:text-foreground\">\n              <Brain className=\"h-4 w-4\" />\n              Algorithms\n            </Link>\n            <Link href=\"/trending\" className=\"flex items-center gap-2 text-sm font-medium text-muted-foreground hover:text-foreground\">\n              <Flame className=\"h-4 w-4\" />\n              Trending\n            </Link>\n          </nav>\n\n          {/* Right Actions */}\n          <div className=\"flex items-center gap-3\">\n            {/* Search - desktop only */}\n            <div className=\"hidden sm:block\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search Nexus\"\n                  className=\"w-48 pl-9\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              {/* Algorithm Status Badge */}\n              {isAuthenticated && activeAlgorithm && (\n                <div className=\"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 border\">\n                  <div className=\"flex items-center gap-2\">\n                    {algorithmIcon(activeAlgorithm.slug)}\n                    <span className=\"text-sm font-medium\">{activeAlgorithm.name}</span>\n                  </div>\n                  <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                      <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\">\n                        <Settings className=\"h-3 w-3\" />\n                        <span className=\"sr-only\">Algorithm settings</span>\n                      </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\">\n                      <DropdownMenuItem onClick={() => setShowAlgorithmSelector(true)}>\n                        <Brain className=\"h-4 w-4 mr-2\" />\n                        Change algorithm\n                      </DropdownMenuItem>\n                      <DropdownMenuItem onClick={() => setShowExplanations(!showExplanations)}>\n                        <Info className=\"h-4 w-4 mr-2\" />\n                        {showExplanations ? \"Hide explanations\" : \"Show explanations\"}\n                      </DropdownMenuItem>\n                    </DropdownMenuContent>\n                  </DropdownMenu>\n                </div>\n              )}\n              \n              <Dialog open={createPostDialogOpen} onOpenChange={setCreatePostDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button \n                    size=\"sm\" \n                    className=\"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700\"\n                  >\n                    <Pencil className=\"h-4 w-4 mr-2\" />\n                    Create Post\n                  </Button>\n                </DialogTrigger>\n              </Dialog>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"mx-auto max-w-7xl px-4 py-6\">\n        <div className=\"flex gap-6\">\n          {/* Left Sidebar - Desktop */}\n          <aside className=\"hidden w-64 flex-shrink-0 lg:block\">\n            <div className=\"sticky top-24 space-y-8\">\n              {/* User Stats & Algorithm Control */}\n              <div className=\"rounded-xl border bg-card p-6\">\n                <div className=\"mb-4 flex items-center gap-3\">\n                  <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-blue-500/10 to-purple-600/10\">\n                    <Users className=\"h-6 w-6 text-blue-500\" />\n                  </div>\n                  <div>\n                    <p className=\"text-2xl font-bold\">\n                      {Math.max(0, followingUserIds.length - 1)}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground\">Following</p>\n                  </div>\n                </div>\n                \n                {/* Algorithm Control */}\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Active Algorithm</span>\n                    <span className=\"font-medium\">\n                      {activeAlgorithm?.name || 'Default'}\n                    </span>\n                  </div>\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full gap-2\"\n                    onClick={() => setShowAlgorithmSelector(true)}\n                  >\n                    <Settings className=\"h-4 w-4\" />\n                    Change Algorithm\n                  </Button>\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full gap-2\"\n                    onClick={() => setShowExplanations(!showExplanations)}\n                  >\n                    <Info className=\"h-4 w-4\" />\n                    {showExplanations ? \"Hide Explanations\" : \"Show Explanations\"}\n                  </Button>\n                </div>\n              </div>\n\n              {/* Quick Actions */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-sm font-semibold text-muted-foreground\">QUICK ACTIONS</h3>\n                <div className=\"space-y-2\">\n                  <Link href=\"/algorithms\">\n                    <Button variant=\"outline\" className=\"w-full justify-start gap-2\">\n                      <Brain className=\"h-4 w-4\" />\n                      Browse Algorithms\n                    </Button>\n                  </Link>\n                  <Link href=\"/explore\">\n                    <Button variant=\"outline\" className=\"w-full justify-start gap-2\">\n                      <Hash className=\"h-4 w-4\" />\n                      Explore Topics\n                    </Button>\n                  </Link>\n                  <Link href=\"/trending\">\n                    <Button variant=\"outline\" className=\"w-full justify-start gap-2\">\n                      <Flame className=\"h-4 w-4\" />\n                      Trending Posts\n                    </Button>\n                  </Link>\n                </div>\n              </div>\n            </div>\n          </aside>\n\n          {/* Main Content */}\n          <div className=\"flex-1 min-w-0\">\n            {/* Mobile Tabs */}\n            <div className=\"lg:hidden mb-6\">\n              <Tabs \n                value={feedTab} \n                onValueChange={(value) => setFeedTab(value as typeof feedTab)}\n                className=\"w-full\"\n              >\n                <TabsList className=\"grid w-full grid-cols-3\">\n                  <TabsTrigger value=\"algorithm\" className=\"gap-2\">\n                    {algorithmIcon(activeAlgorithm?.slug)}\n                    <span className=\"hidden sm:inline\">Algorithm</span>\n                  </TabsTrigger>\n                  <TabsTrigger value=\"following\" className=\"gap-2\">\n                    <Users className=\"h-4 w-4\" />\n                    <span className=\"hidden sm:inline\">Following</span>\n                  </TabsTrigger>\n                  <TabsTrigger value=\"chronological\" className=\"gap-2\">\n                    <Clock className=\"h-4 w-4\" />\n                    <span className=\"hidden sm:inline\">Latest</span>\n                  </TabsTrigger>\n                </TabsList>\n              </Tabs>\n            </div>\n\n            {/* Welcome Card */}\n            <div className=\"mb-6 overflow-hidden rounded-xl border bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-pink-500/5 p-6\">\n              <div className=\"flex items-start justify-between\">\n                <div>\n                  <h2 className=\"mb-2 text-2xl font-bold\">Welcome back{profile?.display_name ? `, ${profile.display_name}` : ''}!</h2>\n                  <p className=\"mb-4 text-muted-foreground\">\n                    {activeAlgorithm \n                      ? `Your feed is powered by \"${activeAlgorithm.name}\" algorithm.`\n                      : 'Personalize your feed with custom algorithms.'}\n                  </p>\n                  <div className=\"flex gap-3\">\n                    <Button \n                      className=\"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700\"\n                      onClick={() => setShowAlgorithmSelector(true)}\n                    >\n                      <Brain className=\"mr-2 h-4 w-4\" />\n                      Change Algorithm\n                    </Button>\n                    <Link href=\"/algorithms\">\n                      <Button variant=\"outline\">Browse All</Button>\n                    </Link>\n                  </div>\n                </div>\n                <div className=\"hidden md:block\">\n                  <div className=\"flex h-24 w-24 items-center justify-center rounded-full bg-gradient-to-br from-blue-500/20 to-purple-600/20\">\n                    <Brain className=\"h-12 w-12 text-blue-500\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Feed Header */}\n            <div className=\"mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n              <div>\n                <h2 className=\"text-xl font-bold\">\n                  {feedTab === 'algorithm' && 'Algorithm Feed'}\n                  {feedTab === 'following' && 'Following Feed'}\n                  {feedTab === 'chronological' && 'Latest Posts'}\n                </h2>\n                <p className=\"text-sm text-muted-foreground\">\n                  {feedTab === 'algorithm' && activeAlgorithm?.description}\n                  {feedTab === 'following' && 'Posts from people you follow'}\n                  {feedTab === 'chronological' && 'All posts in reverse chronological order'}\n                </p>\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                {feedTab === 'algorithm' && (\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setShowExplanations(!showExplanations)}\n                      className=\"gap-2\"\n                    >\n                      <Info className=\"h-4 w-4\" />\n                      {showExplanations ? \"Hide\" : \"Explain\"}\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setShowAlgorithmSelector(true)}\n                      className=\"gap-2\"\n                    >\n                      <Settings className=\"h-4 w-4\" />\n                      Change\n                    </Button>\n                  </div>\n                )}\n                \n                <div className=\"flex items-center gap-2\">\n                  <Switch\n                    id=\"follow-buttons\"\n                    checked={showFollowButtons}\n                    onCheckedChange={setShowFollowButtons}\n                  />\n                  <Label htmlFor=\"follow-buttons\" className=\"text-sm whitespace-nowrap\">\n                    Follow buttons\n                  </Label>\n                </div>\n              </div>\n            </div>\n\n            {/* Feed Content */}\n         \n\n{feedTab === 'algorithm' ? (\n  <AlgorithmFeed\n    userId={user?.id || ''}\n    showExplanations={showExplanations}\n    // Samo ova tri props postoje:\n    // 1. userId\n    // 2. initialAlgorithm? (možete dodati ako želite)\n    // 3. showExplanations\n  />\n) : feedTab === 'following' ? (\n  <BaseFeed\n    userId={user?.id}\n    followingUserIds={followingUserIds}\n    isAuthenticated={isAuthenticated}\n    showFollowButton={showFollowButtons}\n    onFollowChange={handleFollowChange}\n  />\n) : (\n  <BaseFeed\n    userId={user?.id}\n    followingUserIds={[]}\n    isAuthenticated={isAuthenticated}\n    showFollowButton={showFollowButtons}\n    onFollowChange={handleFollowChange}\n  />\n)}\n\n            {/* Load More / CTA */}\n            <div className=\"mt-8 text-center\">\n              <p className=\"mb-4 text-sm text-muted-foreground\">\n                {feedTab === 'algorithm' \n                  ? 'Want more control over your feed?' \n                  : 'Ready to personalize your experience?'}\n              </p>\n              <Link href=\"/algorithms\">\n                <Button className=\"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700\">\n                  <Brain className=\"mr-2 h-4 w-4\" />\n                  Explore Algorithms\n                  <ArrowRight className=\"ml-2 h-4 w-4\" />\n                </Button>\n              </Link>\n            </div>\n          </div>\n\n          {/* Right Sidebar - Trending & Info */}\n          <aside className=\"hidden w-80 flex-shrink-0 xl:block\">\n            <div className=\"sticky top-24 space-y-6\">\n              {/* Search - Desktop */}\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search posts, people, topics\"\n                  className=\"pl-9\"\n                />\n              </div>\n\n              {/* Algorithm Stats */}\n              {activeAlgorithm && (\n                <div className=\"rounded-xl border bg-card p-6\">\n                  <h3 className=\"font-semibold mb-4\">Algorithm Stats</h3>\n                  <div className=\"space-y-4\">\n                    <div>\n                      <div className=\"flex items-center justify-between text-sm mb-1\">\n                        <span className=\"text-muted-foreground\">Personalization</span>\n                        <span className=\"font-medium\">85%</span>\n                      </div>\n                      <Progress value={85} className=\"h-2\" />\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"space-y-1\">\n                        <p className=\"text-xs text-muted-foreground\">Relevance</p>\n                        <div className=\"h-1.5 bg-muted rounded-full overflow-hidden\">\n                          <div \n                            className=\"h-full bg-green-500 rounded-full\" \n                            style={{ width: '92%' }} \n                          />\n                        </div>\n                      </div>\n                      <div className=\"space-y-1\">\n                        <p className=\"text-xs text-muted-foreground\">Diversity</p>\n                        <div className=\"h-1.5 bg-muted rounded-full overflow-hidden\">\n                          <div \n                            className=\"h-full bg-blue-500 rounded-full\" \n                            style={{ width: '78%' }} \n                          />\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <Button \n                      variant=\"outline\" \n                      className=\"w-full gap-2\"\n                      onClick={() => setShowAlgorithmSelector(true)}\n                    >\n                      <Settings className=\"h-4 w-4\" />\n                      Tune Algorithm\n                    </Button>\n                  </div>\n                </div>\n              )}\n\n              {/* Features */}\n              <div className=\"rounded-xl border bg-card p-6\">\n                <h3 className=\"mb-4 font-semibold\">Why Custom Algorithms?</h3>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-blue-500/10\">\n                      <Zap className=\"h-4 w-4 text-blue-500\" />\n                    </div>\n                    <div>\n                      <p className=\"font-medium\">Personalized Experience</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        See content tailored to your interests\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-purple-500/10\">\n                      <Shield className=\"h-4 w-4 text-purple-500\" />\n                    </div>\n                    <div>\n                      <p className=\"font-medium\">Transparent Control</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Know why you see each post\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-green-500/10\">\n                      <TrendingUp className=\"h-4 w-4 text-green-500\" />\n                    </div>\n                    <div>\n                      <p className=\"font-medium\">Better Discovery</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Find content you actually care about\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* CTA Card */}\n              <div className=\"overflow-hidden rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 p-6 text-white\">\n                <div className=\"mb-4\">\n                  <Brain className=\"h-8 w-8\" />\n                </div>\n                <h3 className=\"mb-2 text-lg font-semibold\">Create Your Own</h3>\n                <p className=\"mb-4 text-sm text-blue-100\">\n                  Design custom algorithms with our visual editor\n                </p>\n                <Link href=\"/algorithms/create\">\n                  <Button \n                    className=\"w-full bg-white text-blue-600 hover:bg-gray-100\"\n                    size=\"lg\"\n                  >\n                    Start Creating\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </aside>\n        </div>\n      </main>\n\n      {/* Create Post Dialog */}\n      <Dialog open={createPostDialogOpen} onOpenChange={setCreatePostDialogOpen}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Pencil className=\"h-5 w-5\" />\n              Create Post\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"flex items-start gap-3\">\n              <Avatar className=\"h-10 w-10\">\n                <AvatarImage \n                  src={profile?.avatar_url ?? undefined} \n                  alt={profile?.display_name ?? \"User\"} \n                />\n                <AvatarFallback>\n                  {getInitials(profile?.display_name)}\n                </AvatarFallback>\n              </Avatar>\n              <div className=\"flex-1\">\n                <Textarea\n                  placeholder=\"What's happening?\"\n                  value={postContent}\n                  onChange={handleContentChange}\n                  className=\"min-h-[120px] resize-none border-0 p-0 focus-visible:ring-0 text-lg\"\n                  maxLength={280}\n                  disabled={posting}\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <div className=\"text-sm text-muted-foreground\">\n                {characterCount}/280 characters\n                {characterCount > 250 && (\n                  <span className=\"ml-2 text-orange-500\">\n                    {280 - characterCount} left\n                  </span>\n                )}\n              </div>\n              <Badge \n                variant={characterCount > 280 ? \"destructive\" : \"secondary\"}\n                className={characterCount > 250 ? \"bg-orange-500\" : \"\"}\n              >\n                {characterCount > 280 ? \"Too long!\" : \"Good\"}\n              </Badge>\n            </div>\n            \n            {postError && (\n              <Alert variant=\"destructive\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>{postError}</AlertDescription>\n              </Alert>\n            )}\n            \n            <div className=\"flex justify-end gap-2\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setCreatePostDialogOpen(false)}\n                disabled={posting}\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={() => void handleCreatePost()}\n                disabled={posting || !postContent.trim() || characterCount > 280}\n                className=\"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700\"\n              >\n                {posting ? (\n                  <>\n                    <span className=\"animate-spin mr-2\">⟳</span>\n                    Posting...\n                  </>\n                ) : (\n                  \"Post\"\n                )}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Algorithm Selector Sheet */}\n      <Sheet open={showAlgorithmSelector} onOpenChange={setShowAlgorithmSelector}>\n        <SheetContent side=\"right\" className=\"w-full sm:max-w-md\">\n          <SheetHeader>\n            <SheetTitle className=\"flex items-center gap-2\">\n              <Brain className=\"h-5 w-5\" />\n              Choose Feed Algorithm\n            </SheetTitle>\n          </SheetHeader>\n          <div className=\"mt-6\">\n            {user && (\n              <AlgorithmSelector \n                userId={user.id}\n                onAlgorithmChange={(algorithm) => {\n                  setActiveAlgorithm(algorithm);\n                  setShowAlgorithmSelector(false);\n                  window.location.reload();\n                }}\n              />\n            )}\n          </div>\n        </SheetContent>\n      </Sheet>\n\n      {/* Mobile Bottom Navigation */}\n      <nav className=\"fixed bottom-0 left-0 right-0 z-50 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 lg:hidden\">\n        <div className=\"flex h-16 items-center justify-around\">\n          <button \n            type=\"button\"\n            onClick={() => setFeedTab('algorithm')}\n            className=\"flex flex-col items-center gap-1 p-2\"\n            aria-label=\"Algorithm feed\"\n          >\n            {algorithmIcon(activeAlgorithm?.slug)}\n            <span className=\"text-xs\">Algorithm</span>\n          </button>\n          <button \n            type=\"button\"\n            onClick={() => setFeedTab('following')}\n            className=\"flex flex-col items-center gap-1 p-2 text-muted-foreground\"\n            aria-label=\"Following feed\"\n          >\n            <Users className=\"h-5 w-5\" />\n            <span className=\"text-xs\">Following</span>\n          </button>\n          <Dialog open={createPostDialogOpen} onOpenChange={setCreatePostDialogOpen}>\n            <DialogTrigger asChild>\n              <button \n                type=\"button\"\n                className=\"flex flex-col items-center gap-1 p-2 text-muted-foreground\"\n                aria-label=\"Create post\"\n              >\n                <Plus className=\"h-5 w-5\" />\n                <span className=\"text-xs\">Post</span>\n              </button>\n            </DialogTrigger>\n          </Dialog>\n          <button \n            type=\"button\"\n            onClick={() => setShowAlgorithmSelector(true)}\n            className=\"flex flex-col items-center gap-1 p-2 text-muted-foreground\"\n            aria-label=\"Algorithms\"\n          >\n            <Brain className=\"h-5 w-5\" />\n            <span className=\"text-xs\">Algorithms</span>\n          </button>\n          <Link href=\"/explore\" className=\"flex flex-col items-center gap-1 p-2 text-muted-foreground\">\n            <Hash className=\"h-5 w-5\" />\n            <span className=\"text-xs\">Explore</span>\n          </Link>\n        </div>\n      </nav>\n      <div className=\"pb-16 lg:pb-0\" />\n\n      {/* Footer */}\n      <footer className=\"border-t\">\n        <div className=\"mx-auto max-w-7xl px-4 py-8\">\n          <div className=\"flex flex-col items-center justify-between gap-6 md:flex-row\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-purple-600\">\n                <Sparkles className=\"h-4 w-4 text-white\" />\n              </div>\n              <span className=\"font-bold\">nexus</span>\n              <div className=\"text-sm text-muted-foreground\">\n                © {new Date().getFullYear()} Personalized social experience\n              </div>\n            </div>\n            <div className=\"flex flex-wrap items-center justify-center gap-6\">\n              <Link href=\"/about\" className=\"text-sm text-muted-foreground hover:text-foreground\">\n                About\n              </Link>\n              <Link href=\"/algorithms\" className=\"text-sm text-muted-foreground hover:text-foreground\">\n                Algorithms\n              </Link>\n              <Link href=\"/privacy\" className=\"text-sm text-muted-foreground hover:text-foreground\">\n                Privacy\n              </Link>\n              <Link href=\"/terms\" className=\"text-sm text-muted-foreground hover:text-foreground\">\n                Terms\n              </Link>\n              <Link href=\"/contact\" className=\"text-sm text-muted-foreground hover:text-foreground\">\n                Contact\n              </Link>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}