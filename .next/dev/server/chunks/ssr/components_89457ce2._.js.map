{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/avatar.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as AvatarPrimitive from '@radix-ui/react-avatar'\n\nimport { cn } from '@/lib/utils'\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        'relative flex size-8 shrink-0 overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn('aspect-square size-full', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        'bg-muted flex size-full items-center justify-center rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,8OAAC,0KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,8OAAC,8KAAwB;QACvB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,oEACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/follow/follow-button.tsx"],"sourcesContent":["// components/follow/follow-button.tsx\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { UserPlus, UserCheck, Loader2 } from \"lucide-react\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface FollowButtonProps {\r\n  followerId: string;\r\n  followingId: string;\r\n  isFollowing: boolean;\r\n  className?: string;\r\n  size?: \"default\" | \"sm\" | \"lg\" | \"icon\";\r\n  variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\";\r\n  onFollowChange?: (isFollowing: boolean) => void;\r\n}\r\n\r\nexport function FollowButton({\r\n  followerId,\r\n  followingId,\r\n  isFollowing: initialIsFollowing,\r\n  className = \"\",\r\n  size = \"sm\",\r\n  variant,\r\n  onFollowChange,\r\n}: FollowButtonProps) {\r\n  const [isFollowing, setIsFollowing] = useState(initialIsFollowing);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const supabase = createClient();\r\n\r\n  const handleFollowToggle = async () => {\r\n    if (!followerId || !followingId) return;\r\n    \r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      if (isFollowing) {\r\n        // Unfollow\r\n        const { error } = await supabase\r\n          .from(\"follows\")\r\n          .delete()\r\n          .eq(\"follower_id\", followerId)\r\n          .eq(\"following_id\", followingId);\r\n        \r\n        if (error) throw error;\r\n        \r\n        setIsFollowing(false);\r\n        toast.success(\"Unfollowed\");\r\n      } else {\r\n        // Follow\r\n        const { error } = await supabase\r\n          .from(\"follows\")\r\n          .insert({\r\n            follower_id: followerId,\r\n            following_id: followingId,\r\n          });\r\n        \r\n        if (error) {\r\n          // Možda već postoji\r\n          if (error.code === '23505') { // Unique violation\r\n            setIsFollowing(true);\r\n          } else {\r\n            throw error;\r\n          }\r\n        } else {\r\n          setIsFollowing(true);\r\n        }\r\n        toast.success(\"Following\");\r\n      }\r\n      \r\n      onFollowChange?.(!isFollowing);\r\n    } catch (error) {\r\n      console.error(\"Error toggling follow:\", error);\r\n      toast.error(\"Failed to update follow status\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Odredite variant na osnovu isFollowing\r\n  const buttonVariant = variant || (isFollowing ? \"outline\" : \"default\");\r\n\r\n  return (\r\n    <Button\r\n      size={size}\r\n      variant={buttonVariant}\r\n      onClick={handleFollowToggle}\r\n      disabled={isLoading || followerId === followingId}\r\n      className={`gap-2 ${className}`}\r\n    >\r\n      {isLoading ? (\r\n        <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n      ) : isFollowing ? (\r\n        <>\r\n          <UserCheck className=\"h-4 w-4\" />\r\n          <span className=\"hidden sm:inline\">Following</span>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <UserPlus className=\"h-4 w-4\" />\r\n          <span className=\"hidden sm:inline\">Follow</span>\r\n        </>\r\n      )}\r\n    </Button>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,sCAAsC;;;;;;AAGtC;AACA;AACA;AAAA;AAAA;AACA;AACA;AANA;;;;;;;AAkBO,SAAS,aAAa,EAC3B,UAAU,EACV,WAAW,EACX,aAAa,kBAAkB,EAC/B,YAAY,EAAE,EACd,OAAO,IAAI,EACX,OAAO,EACP,cAAc,EACI;IAClB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,WAAW,IAAA,yIAAY;IAE7B,MAAM,qBAAqB;QACzB,IAAI,CAAC,cAAc,CAAC,aAAa;QAEjC,aAAa;QAEb,IAAI;YACF,IAAI,aAAa;gBACf,WAAW;gBACX,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,WACL,MAAM,GACN,EAAE,CAAC,eAAe,YAClB,EAAE,CAAC,gBAAgB;gBAEtB,IAAI,OAAO,MAAM;gBAEjB,eAAe;gBACf,iJAAK,CAAC,OAAO,CAAC;YAChB,OAAO;gBACL,SAAS;gBACT,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,WACL,MAAM,CAAC;oBACN,aAAa;oBACb,cAAc;gBAChB;gBAEF,IAAI,OAAO;oBACT,oBAAoB;oBACpB,IAAI,MAAM,IAAI,KAAK,SAAS;wBAC1B,eAAe;oBACjB,OAAO;wBACL,MAAM;oBACR;gBACF,OAAO;oBACL,eAAe;gBACjB;gBACA,iJAAK,CAAC,OAAO,CAAC;YAChB;YAEA,iBAAiB,CAAC;QACpB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,iJAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,aAAa;QACf;IACF;IAEA,yCAAyC;IACzC,MAAM,gBAAgB,WAAW,CAAC,cAAc,YAAY,SAAS;IAErE,qBACE,8OAAC,qIAAM;QACL,MAAM;QACN,SAAS;QACT,SAAS;QACT,UAAU,aAAa,eAAe;QACtC,WAAW,CAAC,MAAM,EAAE,WAAW;kBAE9B,0BACC,8OAAC,4NAAO;YAAC,WAAU;;;;;mBACjB,4BACF;;8BACE,8OAAC,6NAAS;oBAAC,WAAU;;;;;;8BACrB,8OAAC;oBAAK,WAAU;8BAAmB;;;;;;;yCAGrC;;8BACE,8OAAC,0NAAQ;oBAAC,WAAU;;;;;;8BACpB,8OAAC;oBAAK,WAAU;8BAAmB;;;;;;;;;;;;;AAK7C"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/profile/profile-follow-button.tsx"],"sourcesContent":["// components/profile/profile-follow-button.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { FollowButton } from \"@/components/follow/follow-button\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface ProfileFollowButtonProps {\r\n  profileId: string;\r\n  isFollowing: boolean;\r\n  onFollowChange?: (isFollowing: boolean) => void;\r\n  className?: string;\r\n}\r\n\r\nexport function ProfileFollowButton({\r\n  profileId,\r\n  isFollowing,\r\n  onFollowChange,\r\n  className,\r\n}: ProfileFollowButtonProps) {\r\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n  const supabase = createClient();\r\n\r\n  useEffect(() => {\r\n    fetchCurrentUser();\r\n  }, []);\r\n\r\n  const fetchCurrentUser = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      setCurrentUserId(user?.id || null);\r\n    } catch (error) {\r\n      console.error(\"Error fetching current user:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFollowChange = (newIsFollowing: boolean) => {\r\n    // Ako nema korisnika, redirect na login\r\n    if (!currentUserId) {\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n    \r\n    onFollowChange?.(newIsFollowing);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <button\r\n        disabled\r\n        className=\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\"\r\n      >\r\n        Loading...\r\n      </button>\r\n    );\r\n  }\r\n\r\n  if (!currentUserId) {\r\n    return (\r\n      <button\r\n        onClick={() => router.push(\"/login\")}\r\n        className=\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\"\r\n      >\r\n        Follow\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <FollowButton\r\n      followerId={currentUserId}\r\n      followingId={profileId}\r\n      isFollowing={isFollowing}\r\n      onFollowChange={handleFollowChange}\r\n      size=\"default\"\r\n      className={className}\r\n    />\r\n  );\r\n}"],"names":[],"mappings":"AAAA,+CAA+C;;;;;;AAG/C;AACA;AACA;AACA;AALA;;;;;;AAcO,SAAS,oBAAoB,EAClC,SAAS,EACT,WAAW,EACX,cAAc,EACd,SAAS,EACgB;IACzB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,yIAAY;IAE7B,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,mBAAmB;QACvB,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,iBAAiB,MAAM,MAAM;QAC/B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;QAChD,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,qBAAqB,CAAC;QAC1B,wCAAwC;QACxC,IAAI,CAAC,eAAe;YAClB,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,iBAAiB;IACnB;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YACC,QAAQ;YACR,WAAU;sBACX;;;;;;IAIL;IAEA,IAAI,CAAC,eAAe;QAClB,qBACE,8OAAC;YACC,SAAS,IAAM,OAAO,IAAI,CAAC;YAC3B,WAAU;sBACX;;;;;;IAIL;IAEA,qBACE,8OAAC,yJAAY;QACX,YAAY;QACZ,aAAa;QACb,aAAa;QACb,gBAAgB;QAChB,MAAK;QACL,WAAW;;;;;;AAGjB"}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/profile/profile-header.tsx"],"sourcesContent":["// components/profile/profile-header.tsx\n\"use client\"\n\nimport { useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\"\nimport { ProfileFollowButton } from \"@/components/profile/profile-follow-button\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { Settings } from \"lucide-react\"\n\ninterface Profile {\n  id: string\n  username: string\n  display_name: string\n  bio: string | null\n  avatar_url: string | null\n}\n\ninterface ProfileHeaderProps {\n  profile: Profile\n  isOwnProfile: boolean\n  isFollowing: boolean\n  followersCount: number\n  followingCount: number\n  postsCount: number\n  currentUserId?: string // Dodajte ovaj prop\n}\n\nexport function ProfileHeader({\n  profile,\n  isOwnProfile,\n  isFollowing: initialIsFollowing,\n  followersCount: initialFollowersCount,\n  followingCount,\n  postsCount,\n  currentUserId,\n}: ProfileHeaderProps) {\n  const router = useRouter()\n  const [isFollowing, setIsFollowing] = useState(initialIsFollowing)\n  const [followersCount, setFollowersCount] = useState(initialFollowersCount)\n\n  const handleFollowChange = (newIsFollowing: boolean) => {\n    setIsFollowing(newIsFollowing)\n    // Ažurirajte broj pratilaca\n    if (newIsFollowing) {\n      setFollowersCount(prev => prev + 1)\n    } else {\n      setFollowersCount(prev => Math.max(0, prev - 1))\n    }\n    // Refresh stranicu za ažuriranje podataka\n    router.refresh()\n  }\n\n  // Uzmi trenutnog korisnika ako nije prosleđen kao prop\n  const getCurrentUserId = async (): Promise<string | undefined> => {\n    if (currentUserId) return currentUserId\n    \n    const supabase = createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n    return user?.id\n  }\n\n  return (\n    <div className=\"border-b bg-card\">\n      <div className=\"mx-auto max-w-2xl px-4 py-8\">\n        <div className=\"flex items-start gap-6\">\n          <Avatar className=\"h-24 w-24\">\n            <AvatarImage src={profile.avatar_url || undefined} alt={profile.display_name} />\n            <AvatarFallback className=\"text-2xl\">{profile.display_name[0].toUpperCase()}</AvatarFallback>\n          </Avatar>\n\n          <div className=\"flex-1\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h1 className=\"text-2xl font-bold\">{profile.display_name}</h1>\n                <p className=\"text-muted-foreground\">@{profile.username}</p>\n              </div>\n\n\n{isOwnProfile ? (\n  <Button variant=\"outline\" asChild className=\"gap-2\">\n    <Link href=\"/profile/edit\">\n      <Settings className=\"h-4 w-4\" />\n      Edit Profile\n    </Link>\n  </Button>\n) : (\n  <ProfileFollowButton\n    profileId={profile.id}\n    isFollowing={isFollowing}\n    onFollowChange={handleFollowChange}\n  />\n)}\n            </div>\n\n            {profile.bio && <p className=\"mt-4 text-balance\">{profile.bio}</p>}\n\n            <div className=\"mt-4 flex gap-6 text-sm\">\n              <div>\n                <span className=\"font-semibold\">{postsCount}</span> <span className=\"text-muted-foreground\">posts</span>\n              </div>\n              <Link \n                href={`/profile/${profile.username}/followers`}\n                className=\"hover:underline\"\n              >\n                <span className=\"font-semibold\">{followersCount}</span>{\" \"}\n                <span className=\"text-muted-foreground\">followers</span>\n              </Link>\n              <Link \n                href={`/profile/${profile.username}/following`}\n                className=\"hover:underline\"\n              >\n                <span className=\"font-semibold\">{followingCount}</span>{\" \"}\n                <span className=\"text-muted-foreground\">following</span>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;AAGxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AA6BO,SAAS,cAAc,EAC5B,OAAO,EACP,YAAY,EACZ,aAAa,kBAAkB,EAC/B,gBAAgB,qBAAqB,EACrC,cAAc,EACd,UAAU,EACV,aAAa,EACM;IACnB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,MAAM,qBAAqB,CAAC;QAC1B,eAAe;QACf,4BAA4B;QAC5B,IAAI,gBAAgB;YAClB,kBAAkB,CAAA,OAAQ,OAAO;QACnC,OAAO;YACL,kBAAkB,CAAA,OAAQ,KAAK,GAAG,CAAC,GAAG,OAAO;QAC/C;QACA,0CAA0C;QAC1C,OAAO,OAAO;IAChB;IAEA,uDAAuD;IACvD,MAAM,mBAAmB;QACvB,IAAI,eAAe,OAAO;QAE1B,MAAM,WAAW,IAAA,yIAAY;QAC7B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QACtD,OAAO,MAAM;IACf;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,qIAAM;wBAAC,WAAU;;0CAChB,8OAAC,0IAAW;gCAAC,KAAK,QAAQ,UAAU,IAAI;gCAAW,KAAK,QAAQ,YAAY;;;;;;0CAC5E,8OAAC,6IAAc;gCAAC,WAAU;0CAAY,QAAQ,YAAY,CAAC,EAAE,CAAC,WAAW;;;;;;;;;;;;kCAG3E,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAsB,QAAQ,YAAY;;;;;;0DACxD,8OAAC;gDAAE,WAAU;;oDAAwB;oDAAE,QAAQ,QAAQ;;;;;;;;;;;;;oCAItE,6BACC,8OAAC,qIAAM;wCAAC,SAAQ;wCAAU,OAAO;wCAAC,WAAU;kDAC1C,cAAA,8OAAC,uKAAI;4CAAC,MAAK;;8DACT,8OAAC,sNAAQ;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;6DAKpC,8OAAC,4KAAmB;wCAClB,WAAW,QAAQ,EAAE;wCACrB,aAAa;wCACb,gBAAgB;;;;;;;;;;;;4BAKP,QAAQ,GAAG,kBAAI,8OAAC;gCAAE,WAAU;0CAAqB,QAAQ,GAAG;;;;;;0CAE7D,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAK,WAAU;0DAAiB;;;;;;4CAAkB;0DAAC,8OAAC;gDAAK,WAAU;0DAAwB;;;;;;;;;;;;kDAE9F,8OAAC,uKAAI;wCACH,MAAM,CAAC,SAAS,EAAE,QAAQ,QAAQ,CAAC,UAAU,CAAC;wCAC9C,WAAU;;0DAEV,8OAAC;gDAAK,WAAU;0DAAiB;;;;;;4CAAuB;0DACxD,8OAAC;gDAAK,WAAU;0DAAwB;;;;;;;;;;;;kDAE1C,8OAAC,uKAAI;wCACH,MAAM,CAAC,SAAS,EAAE,QAAQ,QAAQ,CAAC,UAAU,CAAC;wCAC9C,WAAU;;0DAEV,8OAAC;gDAAK,WAAU;0DAAiB;;;;;;4CAAuB;0DACxD,8OAAC;gDAAK,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQxD"}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,4KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8OAAC,2KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,yMAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,iLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 715, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/post/likes-list.tsx"],"sourcesContent":["// components/post/likes-list.tsx\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Heart } from \"lucide-react\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\n\r\ninterface User {\r\n  id: string;\r\n  username: string;\r\n  display_name: string;\r\n  avatar_url: string | null;\r\n}\r\n\r\ninterface Like {\r\n  id: string;\r\n  user_id: string;\r\n  created_at: string;\r\n  profiles: User | null; // Ovo je važno - može biti null ili User objekat\r\n}\r\n\r\ninterface LikesListProps {\r\n  postId: string;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport function LikesList({ postId, open, onOpenChange }: LikesListProps) {\r\n  const [likes, setLikes] = useState<Like[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const supabase = createClient();\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      fetchLikes();\r\n    }\r\n  }, [open, postId]);\r\n\r\n  const fetchLikes = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const { data, error: fetchError } = await supabase\r\n        .from(\"likes\")\r\n        .select(`\r\n          id,\r\n          user_id,\r\n          created_at,\r\n          profiles (\r\n            id,\r\n            username,\r\n            display_name,\r\n            avatar_url\r\n          )\r\n        `)\r\n        .eq(\"post_id\", postId)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n      if (fetchError) throw fetchError;\r\n\r\n      // Supabase vraća profiles kao objekat, ali trebamo osigurati tip\r\n      const formattedLikes = (data || []).map((like: any) => {\r\n        // Ovdje uzimamo prvi element ako je array, inače objekat\r\n        const profiles = Array.isArray(like.profiles) \r\n          ? (like.profiles[0] || null)\r\n          : (like.profiles || null);\r\n\r\n        return {\r\n          id: like.id,\r\n          user_id: like.user_id,\r\n          created_at: like.created_at,\r\n          profiles: profiles\r\n        };\r\n      }).filter(like => like.profiles !== null); // Filtriraj prazne profile\r\n\r\n      setLikes(formattedLikes);\r\n    } catch (err) {\r\n      console.error(\"Error fetching likes:\", err);\r\n      setError(err instanceof Error ? err.message : \"Unknown error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getInitials = (name: string): string => {\r\n    if (!name) return \"??\";\r\n    return name\r\n      .split(\" \")\r\n      .map((part) => part[0])\r\n      .join(\"\")\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Heart className=\"h-5 w-5 fill-red-500 text-red-500\" />\r\n            Liked by {likes.length} {likes.length === 1 ? \"person\" : \"people\"}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"mt-4\">\r\n          {loading ? (\r\n            <div className=\"py-8 text-center\">\r\n              <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent\"></div>\r\n              <p className=\"mt-2 text-sm text-muted-foreground\">Loading likes...</p>\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"py-8 text-center\">\r\n              <p className=\"text-destructive\">Error loading likes</p>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">{error}</p>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={fetchLikes}\r\n                className=\"mt-4\"\r\n              >\r\n                Try Again\r\n              </Button>\r\n            </div>\r\n          ) : likes.length === 0 ? (\r\n            <div className=\"py-8 text-center\">\r\n              <Heart className=\"mx-auto h-12 w-12 text-muted-foreground/50\" />\r\n              <p className=\"mt-4 text-muted-foreground\">No likes yet</p>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                Be the first to like this post\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"max-h-[60vh] overflow-y-auto\">\r\n              <div className=\"space-y-2\">\r\n                {likes.map((like) => (\r\n                  <div\r\n                    key={like.id}\r\n                    className=\"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors\"\r\n                  >\r\n                    <Avatar className=\"h-10 w-10\">\r\n                      <AvatarImage\r\n                        src={like.profiles?.avatar_url || undefined}\r\n                        alt={like.profiles?.display_name || \"User\"}\r\n                      />\r\n                      <AvatarFallback>\r\n                        {getInitials(like.profiles?.display_name || \"User\")}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <p className=\"font-medium truncate\">\r\n                            {like.profiles?.display_name || \"Unknown User\"}\r\n                          </p>\r\n                          <p className=\"text-sm text-muted-foreground truncate\">\r\n                            @{like.profiles?.username || \"unknown\"}\r\n                          </p>\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {formatDistanceToNow(new Date(like.created_at), {\r\n                            addSuffix: true,\r\n                          })}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1034, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/post/post-card.tsx"],"sourcesContent":["// components/post/post-card.tsx\n\"use client\";\n\nimport type React from \"react\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Heart, MessageCircle, LogIn, Users, MoreVertical } from \"lucide-react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { FollowButton } from \"@/components/follow/follow-button\";\nimport { LikesList } from \"@/components/post/likes-list\";\n\ninterface Post {\n  id: string;\n  content: string;\n  created_at: string;\n  user_id: string;\n  username: string;\n  display_name: string;\n  avatar_url: string | null;\n  likes_count: number;\n  comments_count: number;\n  user_has_liked: boolean;\n}\n\ninterface PostCardProps {\n  post: Post;\n  showFollowButton?: boolean;\n  currentUserId?: string;\n  isCurrentUserFollowing?: boolean;\n  onFollowChange?: (userId: string, isFollowing: boolean) => void;\n}\n\nexport function PostCard({ \n  post, \n  showFollowButton = false,\n  currentUserId,\n  isCurrentUserFollowing = false,\n  onFollowChange\n}: PostCardProps): React.JSX.Element {\n  const router = useRouter();\n  const [liked, setLiked] = useState<boolean>(post.user_has_liked);\n  const [likesCount, setLikesCount] = useState<number>(post.likes_count);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);\n  const [authUserId, setAuthUserId] = useState<string | null>(null);\n  const [showLikesDialog, setShowLikesDialog] = useState<boolean>(false);\n\n  // Provjera da li je korisnik logovan\n  useEffect(() => {\n    const checkAuth = async (): Promise<void> => {\n      const supabase = createClient();\n      const { data: { user } } = await supabase.auth.getUser();\n      setIsAuthenticated(!!user);\n      setAuthUserId(user?.id || null);\n      \n      // Ažuriraj liked status ako je korisnik logovan\n      if (user) {\n        const { data: like } = await supabase\n          .from(\"likes\")\n          .select(\"id\")\n          .eq(\"post_id\", post.id)\n          .eq(\"user_id\", user.id)\n          .maybeSingle();\n        setLiked(!!like);\n      }\n    };\n    \n    void checkAuth();\n  }, [post.id]);\n\n  // Trenutni korisnik (prioritet: prop > state)\n  const currentUser = currentUserId || authUserId;\n\n  // Da li prati ovog korisnika\n  const isFollowing = isCurrentUserFollowing || false;\n\n  const handleLike = async (e: React.MouseEvent<HTMLButtonElement>): Promise<void> => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // Ako nije logovan, redirect na login\n    if (!isAuthenticated) {\n      router.push(\"/login\");\n      return;\n    }\n\n    setLoading(true);\n    const supabase = createClient();\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      router.push(\"/login\");\n      return;\n    }\n\n    try {\n      if (liked) {\n        await supabase\n          .from(\"likes\")\n          .delete()\n          .eq(\"post_id\", post.id)\n          .eq(\"user_id\", user.id);\n        setLiked(false);\n        setLikesCount((prev) => Math.max(0, prev - 1));\n      } else {\n        await supabase\n          .from(\"likes\")\n          .insert({ \n            post_id: post.id, \n            user_id: user.id \n          });\n        setLiked(true);\n        setLikesCount((prev) => prev + 1);\n      }\n    } catch (error) {\n      console.error(\"Error toggling like:\", error);\n    } finally {\n      setLoading(false);\n      // Refresh feed da bi se ažurirali broječi\n      router.refresh();\n    }\n  };\n\n  const handleFollowStatusChange = (isFollowing: boolean) => {\n    if (onFollowChange && post.user_id) {\n      onFollowChange(post.user_id, isFollowing);\n    }\n  };\n\n  const handleCardClick = (e: React.MouseEvent<HTMLDivElement>): void => {\n    // Provjeri da li je klik na link ili dugme\n    const target = e.target as HTMLElement;\n    if (target.closest(\"a, button, [role='button']\")) {\n      return;\n    }\n    router.push(`/post/${post.id}`);\n  };\n\n  const handleCommentButtonClick = (e: React.MouseEvent<HTMLButtonElement>): void => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Ako nije logovan, redirect na login\n    if (!isAuthenticated) {\n      router.push(\"/login\");\n      return;\n    }\n    \n    router.push(`/post/${post.id}`);\n  };\n\n  const handleShowLikes = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Ako nema lajkova, ne otvaraj dijalog\n    if (likesCount === 0) return;\n    \n    setShowLikesDialog(true);\n  };\n\n  const handleProfileLinkClick = (e: React.MouseEvent<HTMLAnchorElement>): void => {\n    e.stopPropagation();\n  };\n\n  const getInitials = (name: string): string => {\n    if (!name) return \"??\";\n    return name\n      .split(\" \")\n      .map((part) => part[0])\n      .join(\"\")\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  // Mobile-friendly formatiranje datuma\n  const formatDateMobile = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\n    \n    if (diffInHours < 1) {\n      const diffInMinutes = diffInHours * 60;\n      if (diffInMinutes < 1) {\n        return \"now\";\n      }\n      return `${Math.floor(diffInMinutes)}m`;\n    } else if (diffInHours < 24) {\n      return `${Math.floor(diffInHours)}h`;\n    } else if (diffInHours < 168) { // 7 days\n      return `${Math.floor(diffInHours / 24)}d`;\n    } else {\n      return date.toLocaleDateString(\"en-US\", { \n        month: \"short\", \n        day: \"numeric\" \n      });\n    }\n  };\n\n  return (\n    <>\n      <div \n        onClick={handleCardClick}\n        className=\"block transition-colors hover:bg-muted/50 active:bg-muted/30 cursor-pointer rounded-lg relative\"\n        role=\"button\"\n        tabIndex={0}\n        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>) => {\n          if (e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            router.push(`/post/${post.id}`);\n          }\n        }}\n      >\n        <article className=\"p-4 md:p-6\">\n          <div className=\"flex gap-3 md:gap-4\">\n            {/* Avatar link - veći na mobile */}\n            <div className=\"relative z-10 flex-shrink-0\">\n              <Link \n                href={`/profile/${post.username}`} \n                onClick={handleProfileLinkClick}\n                className=\"inline-block\"\n                aria-label={`View ${post.display_name}'s profile`}\n              >\n                <Avatar className=\"h-12 w-12 md:h-10 md:w-10\">\n                  <AvatarImage \n                    src={post.avatar_url || undefined} \n                    alt={post.display_name} \n                    className=\"object-cover\"\n                  />\n                  <AvatarFallback className=\"text-sm md:text-xs\">\n                    {getInitials(post.display_name)}\n                  </AvatarFallback>\n                </Avatar>\n              </Link>\n            </div>\n\n            <div className=\"flex-1 min-w-0 space-y-2 md:space-y-3\">\n              {/* User info and timestamp */}\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap\">\n                    <div className=\"flex items-center gap-2\">\n                      <Link\n                        href={`/profile/${post.username}`}\n                        onClick={handleProfileLinkClick}\n                        className=\"font-semibold hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring text-sm md:text-base truncate max-w-[120px] md:max-w-none\"\n                        aria-label={`View ${post.display_name}'s profile`}\n                      >\n                        {post.display_name}\n                      </Link>\n                      \n                      {/* Follow button inline za mobile */}\n                      {showFollowButton && isAuthenticated && currentUser && currentUser !== post.user_id && (\n                        <div className=\"md:hidden relative z-20\" onClick={(e) => e.stopPropagation()}>\n                          <FollowButton\n                            followerId={currentUser}\n                            followingId={post.user_id}\n                            isFollowing={isFollowing}\n                            onFollowChange={handleFollowStatusChange}\n                            size=\"sm\"\n                          />\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"flex items-center gap-1 md:gap-2 text-xs md:text-sm text-muted-foreground\">\n                      <Link\n                        href={`/profile/${post.username}`}\n                        onClick={handleProfileLinkClick}\n                        className=\"hover:underline truncate max-w-[100px] md:max-w-none\"\n                        aria-label={`View @${post.username}'s profile`}\n                      >\n                        @{post.username}\n                      </Link>\n                      \n                      <span className=\"hidden sm:inline\">·</span>\n                      \n                      <span className=\"whitespace-nowrap\" title={formatDistanceToNow(new Date(post.created_at), { addSuffix: true })}>\n                        {/* Mobile-friendly date format */}\n                        <span className=\"sm:hidden\">{formatDateMobile(post.created_at)}</span>\n                        <span className=\"hidden sm:inline\">\n                          {formatDistanceToNow(new Date(post.created_at), { addSuffix: true })}\n                        </span>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Follow button (desktop) i menu za mobile */}\n                <div className=\"flex items-center gap-2\">\n                  {/* Follow button (desktop) */}\n                  {showFollowButton && isAuthenticated && currentUser && currentUser !== post.user_id && (\n                    <div className=\"hidden md:block relative z-20\" onClick={(e) => e.stopPropagation()}>\n                      <FollowButton\n                        followerId={currentUser}\n                        followingId={post.user_id}\n                        isFollowing={isFollowing}\n                        onFollowChange={handleFollowStatusChange}\n                      />\n                    </div>\n                  )}\n                  \n                  {/* Menu button za mobile */}\n                  <button \n                    className=\"md:hidden p-1 text-muted-foreground hover:text-foreground\"\n                    onClick={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      // Možete dodati funkcionalnost za menu ovdje\n                    }}\n                    aria-label=\"More options\"\n                  >\n                    <MoreVertical className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              </div>\n\n              {/* Post content */}\n              <p className=\"whitespace-pre-wrap text-pretty break-words text-sm md:text-base leading-relaxed\">\n                {post.content}\n              </p>\n\n              {/* Actions - mobile optimizovane */}\n              <div className=\"flex items-center justify-between md:justify-start md:gap-6 pt-2 md:pt-3 border-t md:border-t-0\">\n                {/* Comment button */}\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-9 md:h-8 gap-1.5 md:gap-2 px-2 md:px-3 text-muted-foreground hover:text-primary hover:bg-transparent active:scale-95 transition-transform\"\n                  onClick={handleCommentButtonClick}\n                  type=\"button\"\n                  aria-label={`${isAuthenticated ? `View comments (${post.comments_count})` : 'Sign in to comment'}`}\n                >\n                  <MessageCircle className=\"h-4 w-4 md:h-4 md:w-4\" />\n                  <span className=\"text-xs md:text-sm font-medium\">{post.comments_count}</span>\n                  {!isAuthenticated && (\n                    <span className=\"absolute -top-1 -right-1\">\n                      <LogIn className=\"h-2.5 w-2.5 md:h-3 md:w-3 text-muted-foreground\" />\n                    </span>\n                  )}\n                </Button>\n\n                {/* Like section */}\n                <div className=\"flex items-center\">\n                  {/* Like button */}\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className={`h-9 md:h-8 gap-1.5 md:gap-2 px-2 md:px-3 relative z-10 hover:bg-transparent active:scale-95 transition-transform ${\n                      liked ? \"text-red-500 hover:text-red-600\" : \"text-muted-foreground hover:text-red-500\"\n                    }`}\n                    onClick={handleLike}\n                    disabled={loading || (!isAuthenticated && !liked)}\n                    type=\"button\"\n                    aria-label={`${isAuthenticated ? (liked ? \"Unlike\" : \"Like\") : \"Sign in to like\"} post`}\n                  >\n                    <Heart className={`h-4 w-4 md:h-4 md:w-4 ${liked ? \"fill-current\" : \"\"}`} />\n                  </Button>\n                  \n                  {/* Like count button - touch friendly */}\n                  <button\n                    onClick={handleShowLikes}\n                    disabled={likesCount === 0}\n                    className={`h-9 md:h-8 px-2 md:px-3 text-xs md:text-sm font-medium rounded-md transition-all active:scale-95 min-w-[44px] ${\n                      likesCount > 0 \n                        ? \"hover:bg-muted/50 cursor-pointer text-foreground\" \n                        : \"text-muted-foreground cursor-default\"\n                    }`}\n                    title={likesCount > 0 ? `View ${likesCount} like${likesCount !== 1 ? 's' : ''}` : \"No likes yet\"}\n                  >\n                    {likesCount}\n                    {likesCount > 0 && (\n                      <span className=\"absolute -top-0.5 -right-0.5 md:-top-1 md:-right-1\">\n                        <Users className=\"h-2.5 w-2.5 md:h-3 md:w-3 text-primary/60\" />\n                      </span>\n                    )}\n                  </button>\n                </div>\n\n                {/* Share button za mobile */}\n                <button\n                  className=\"md:hidden p-2 text-muted-foreground hover:text-foreground\"\n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    // Dodajte share funkcionalnost\n                  }}\n                  aria-label=\"Share post\"\n                >\n                  <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\" />\n                  </svg>\n                </button>\n\n                {/* Indikator da treba login */}\n                {!isAuthenticated && (\n                  <span className=\"hidden md:inline text-xs text-muted-foreground\">\n                    Sign in to interact\n                  </span>\n                )}\n              </div>\n              \n              {/* Mobile login prompt */}\n              {!isAuthenticated && (\n                <div className=\"md:hidden mt-3 p-2 bg-muted/30 rounded-lg\">\n                  <p className=\"text-xs text-muted-foreground text-center\">\n                    <button \n                      onClick={() => router.push(\"/login\")}\n                      className=\"text-primary font-medium hover:underline\"\n                    >\n                      Sign in\n                    </button>{\" \"}\n                    to like and comment\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        </article>\n      </div>\n\n      {/* Likes List Dialog */}\n      <LikesList\n        postId={post.id}\n        open={showLikesDialog}\n        onOpenChange={setShowLikesDialog}\n      />\n    </>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1648, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/profile/user-posts.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { PostCard } from \"@/components/post/post-card\"\n\ninterface Post {\n  id: string\n  content: string\n  created_at: string\n  user_id: string\n  username: string\n  display_name: string\n  avatar_url: string | null\n  likes_count: number\n  comments_count: number\n  user_has_liked: boolean\n}\n\ninterface UserPostsProps {\n  userId: string\n}\n\nexport function UserPosts({ userId }: UserPostsProps) {\n  const [posts, setPosts] = useState<Post[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    async function fetchPosts() {\n      const supabase = createClient()\n\n      const { data } = await supabase\n        .from(\"posts\")\n        .select(\n          `\n          *,\n          profiles!posts_user_id_fkey(username, display_name, avatar_url)\n        `,\n        )\n        .eq(\"user_id\", userId)\n        .order(\"created_at\", { ascending: false })\n\n      if (data) {\n        const formattedPosts = await Promise.all(\n          data.map(async (post) => {\n            const { count: likesCount } = await supabase\n              .from(\"likes\")\n              .select(\"*\", { count: \"exact\", head: true })\n              .eq(\"post_id\", post.id)\n\n            const { count: commentsCount } = await supabase\n              .from(\"comments\")\n              .select(\"*\", { count: \"exact\", head: true })\n              .eq(\"post_id\", post.id)\n\n            const {\n              data: { user },\n            } = await supabase.auth.getUser()\n            let userHasLiked = false\n            if (user) {\n              const { data: like } = await supabase\n                .from(\"likes\")\n                .select(\"id\")\n                .eq(\"post_id\", post.id)\n                .eq(\"user_id\", user.id)\n                .maybeSingle()\n              userHasLiked = !!like\n            }\n\n            return {\n              id: post.id,\n              content: post.content,\n              created_at: post.created_at,\n              user_id: post.user_id,\n              username: post.profiles.username,\n              display_name: post.profiles.display_name,\n              avatar_url: post.profiles.avatar_url,\n              likes_count: likesCount ?? 0,\n              comments_count: commentsCount ?? 0,\n              user_has_liked: userHasLiked,\n            }\n          }),\n        )\n\n        setPosts(formattedPosts)\n      }\n\n      setLoading(false)\n    }\n\n    fetchPosts()\n  }, [userId])\n\n  if (loading) {\n    return <div className=\"py-8 text-center text-muted-foreground\">Loading posts...</div>\n  }\n\n  if (posts.length === 0) {\n    return <div className=\"py-8 text-center text-muted-foreground\">No posts yet</div>\n  }\n\n  return (\n    <div className=\"space-y-0 divide-y\">\n      {posts.map((post) => (\n        <PostCard key={post.id} post={post} />\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAuBO,SAAS,UAAU,EAAE,MAAM,EAAkB;IAClD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,MAAM,WAAW,IAAA,yIAAY;YAE7B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,SACL,MAAM,CACL,CAAC;;;QAGH,CAAC,EAEA,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE1C,IAAI,MAAM;gBACR,MAAM,iBAAiB,MAAM,QAAQ,GAAG,CACtC,KAAK,GAAG,CAAC,OAAO;oBACd,MAAM,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,SACL,MAAM,CAAC,KAAK;wBAAE,OAAO;wBAAS,MAAM;oBAAK,GACzC,EAAE,CAAC,WAAW,KAAK,EAAE;oBAExB,MAAM,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,SACpC,IAAI,CAAC,YACL,MAAM,CAAC,KAAK;wBAAE,OAAO;wBAAS,MAAM;oBAAK,GACzC,EAAE,CAAC,WAAW,KAAK,EAAE;oBAExB,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;oBAC/B,IAAI,eAAe;oBACnB,IAAI,MAAM;wBACR,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,SAC1B,IAAI,CAAC,SACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,WAAW;wBACd,eAAe,CAAC,CAAC;oBACnB;oBAEA,OAAO;wBACL,IAAI,KAAK,EAAE;wBACX,SAAS,KAAK,OAAO;wBACrB,YAAY,KAAK,UAAU;wBAC3B,SAAS,KAAK,OAAO;wBACrB,UAAU,KAAK,QAAQ,CAAC,QAAQ;wBAChC,cAAc,KAAK,QAAQ,CAAC,YAAY;wBACxC,YAAY,KAAK,QAAQ,CAAC,UAAU;wBACpC,aAAa,cAAc;wBAC3B,gBAAgB,iBAAiB;wBACjC,gBAAgB;oBAClB;gBACF;gBAGF,SAAS;YACX;YAEA,WAAW;QACb;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,SAAS;QACX,qBAAO,8OAAC;YAAI,WAAU;sBAAyC;;;;;;IACjE;IAEA,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,qBAAO,8OAAC;YAAI,WAAU;sBAAyC;;;;;;IACjE;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC,+IAAQ;gBAAe,MAAM;eAAf,KAAK,EAAE;;;;;;;;;;AAI9B"}},
    {"offset": {"line": 1749, "column": 0}, "map": {"version":3,"sources":["file:///D:/GitHubNovi/Nexus/components/profile/profile-tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { UserPosts } from \"@/components/profile/user-posts\"\n\ninterface ProfileTabsProps {\n  userId: string\n  username: string\n}\n\nexport function ProfileTabs({ userId, username }: ProfileTabsProps) {\n  const [activeTab] = useState<\"posts\">(\"posts\")\n\n  return (\n    <div className=\"mx-auto max-w-2xl\">\n      <div className=\"border-b\">\n        <div className=\"flex\">\n          <button\n            className={`flex-1 py-4 text-sm font-medium ${\n              activeTab === \"posts\" ? \"border-b-2 border-primary text-primary\" : \"text-muted-foreground\"\n            }`}\n          >\n            Posts\n          </button>\n        </div>\n      </div>\n\n      <div className=\"py-4\">{activeTab === \"posts\" && <UserPosts userId={userId} />}</div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUO,SAAS,YAAY,EAAE,MAAM,EAAE,QAAQ,EAAoB;IAChE,MAAM,CAAC,UAAU,GAAG,IAAA,iNAAQ,EAAU;IAEtC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBACC,WAAW,CAAC,gCAAgC,EAC1C,cAAc,UAAU,2CAA2C,yBACnE;kCACH;;;;;;;;;;;;;;;;0BAML,8OAAC;gBAAI,WAAU;0BAAQ,cAAc,yBAAW,8OAAC,oJAAS;oBAAC,QAAQ;;;;;;;;;;;;;;;;;AAGzE"}}]
}